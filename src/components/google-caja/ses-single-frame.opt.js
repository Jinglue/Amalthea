{var cajaBuildVersion='5669',CSS_PROP_BIT_GLOBAL_NAME,CSS_PROP_BIT_HASH_VALUE,CSS_PROP_BIT_NEGATIVE_QUANTITY,CSS_PROP_BIT_PROPERTY_NAME,CSS_PROP_BIT_QSTRING,CSS_PROP_BIT_QUANTITY,CSS_PROP_BIT_UNICODE_RANGE,CSS_PROP_BIT_UNRESERVED_WORD,CSS_PROP_BIT_URL,Domado,Error,Function,HtmlSchema,Q,RegExp,StringMap,URI,WeakMap,bridalMaker,cajaFrameTracker,cajaVM,cssSchema,decodeCss,eval,html,html4,htmlSchema,html_sanitize,lexCss,parseCssDeclarations,parseCssStylesheet,sanitizeCssProperty,sanitizeCssSelectorList,sanitizeMediaQuery,sanitizeStylesheet,sanitizeStylesheetWithExternals,ses,unicode;typeof
window!=='undefined'&&(window['cajaBuildVersion']=cajaBuildVersion),ses||(ses={}),(function
loggerModule(){'use strict';var apply,forward,logger,slice;function logNowhere(str){}slice=[].slice,apply=slice.apply,ses.logger?(logger=ses.logger):typeof
console!=='undefined'&&'log'in console?(forward=function(level,args){var getStack,i,len,stack;args=slice.call(args,0),apply.call(console[level],console,[''].concat(args)),getStack=ses.getStack;if(getStack)for(i=0,len=args.length;i<len;++i)stack=getStack(args[i]),stack&&console[level]('',stack)},logger={'log':function
log(var_args){forward('log',arguments)},'info':function info(var_args){forward('info',arguments)},'warn':function
warn(var_args){forward('warn',arguments)},'error':function error(var_args){forward('error',arguments)},'beginStartup':function
beginStartup(){console.groupCollapsed?console.groupCollapsed('SES initialization'):console.group&&console.group('SES initialization')},'endStartup':function
endStartup(){console.groupEnd&&console.groupEnd()}}):(logger={'log':logNowhere,'info':logNowhere,'warn':logNowhere,'error':logNowhere});function
defaultClassify(postSeverity){var MAX_SES_SAFE=ses.severities.SAFE_SPEC_VIOLATION,consoleLevel='log',note='';return postSeverity.level>ses.severities.SAFE.level&&(consoleLevel='info',note=postSeverity.description+'('+postSeverity.level+')',postSeverity.level>ses.maxAcceptableSeverity.level?(consoleLevel='error',note+=' is not suitable for SES'):postSeverity.level>MAX_SES_SAFE.level&&(consoleLevel='warn',note+=' is not SES-safe'),note+='.'),{'consoleLevel':consoleLevel,'note':note}}logger.classify||(logger.classify=defaultClassify);function
defaultReportRepairs(reports){var i,report;for(i=0;i<reports.length;++i)report=reports[i],report.status!=='All fine'&&logger.warn(report.status+': '+report.description)}logger.reportRepairs||(logger.reportRepairs=defaultReportRepairs);function
defaultReportMax(){var maxClassification;ses.getMaxSeverity().level>ses.severities.SAFE.level&&(maxClassification=ses.logger.classify(ses.getMaxSeverity()),logger[maxClassification.consoleLevel]('Max Severity: '+maxClassification.note))}logger.reportMax||(logger.reportMax=defaultReportMax);function
defaultReportDiagnosis(severity,status,problemList){var classification=ses.logger.classify(severity);ses.logger[classification.consoleLevel](problemList.length+' '+status)}logger.reportDiagnosis||(logger.reportDiagnosis=defaultReportDiagnosis);function
defaultBeginEndStartup(){}logger.beginStartup||(logger.beginStartup=defaultBeginEndStartup),logger.endStartup||(logger.endStartup=defaultBeginEndStartup),ses.logger=logger,logger.beginStartup()})(),(function(){'use strict';var
logger,severities,statuses;logger=ses.logger,severities=ses.severities={'MAGICAL_UNICORN':{'level':-1,'description':'Testing only'},'SAFE':{'level':0,'description':'Safe'},'SAFE_SPEC_VIOLATION':{'level':1,'description':'Safe spec violation'},'UNSAFE_SPEC_VIOLATION':{'level':3,'description':'Unsafe spec violation'},'NOT_OCAP_SAFE':{'level':4,'description':'Not ocap safe'},'NOT_ISOLATED':{'level':5,'description':'Not isolated'},'NEW_SYMPTOM':{'level':6,'description':'New symptom'},'NOT_SUPPORTED':{'level':7,'description':'Not supported'}},statuses=ses.statuses={'ALL_FINE':'All fine','REPAIR_FAILED':'Repair failed','NOT_REPAIRED':'Not repaired','REPAIR_SKIPPED':'Repair skipped','REPAIRED_UNSAFELY':'Repaired unsafely','REPAIRED':'Repaired','ACCIDENTALLY_REPAIRED':'Accidentally repaired','BROKEN_BY_OTHER_ATTEMPTED_REPAIRS':'Broken by other attempted repairs'};function
validateSeverityName(severityName,failIfInvalid){var sev;if(severityName){sev=ses.severities[severityName];if(sev&&typeof
sev.level==='number'&&sev.level>=ses.severities.MAGICAL_UNICORN.level&&sev.level<ses.severities.NOT_SUPPORTED.level);else
if(failIfInvalid)throw new RangeError(('Bad SES severityName: '+severityName));else
logger.error('Ignoring bad severityName: '+severityName+'.'),severityName='SAFE_SPEC_VIOLATION'}else
severityName='SAFE_SPEC_VIOLATION';return severityName}function lookupSeverityName(severityName,failIfInvalid){return ses.severities[validateSeverityName(severityName,failIfInvalid)]}function
strictForEachFn(list,callback){var i,len;for(i=0,len=list.length;i<len;++i)callback(list[i],i)}function
strictMapFn(list,callback){var result=[],i,len;for(i=0,len=list.length;i<len;++i)result.push(callback(list[i],i));return result}function
EarlyStringMap(){var objAsMap={},self={'get':function(key){return objAsMap[key+'$']},'set':function(key,value){objAsMap[key+'$']=value},'has':function(key){return key+'$'in
objAsMap},'delete':function(key){return delete objAsMap[key+'$']},'forEach':function(callback){var
key;for(key in objAsMap)key.lastIndexOf('$')===key.length-1&&callback(objAsMap[key],key.slice(0,-1),self)}};return self}ses._EarlyStringMap=EarlyStringMap;function
Repairer(){var self=this,maxAcceptableSeverity=ses.severities.SAFE,acceptableProblems={},acceptableProblemsLocked=false,plannedSeverity=ses.severities.SAFE,problemRecords=new
EarlyStringMap,notDoneProblems=new EarlyStringMap,yetToRepair=new EarlyStringMap,earliestTests=new
EarlyStringMap,latestTests=new EarlyStringMap,reports=new EarlyStringMap,repairsPerformed=[],postTestKludge=undefined,aboutTo=void
0,defaultDisposition={'permit':false,'doNotRepair':false};function disposition(problem){return acceptableProblemsLocked=true,Object.prototype.hasOwnProperty.call(acceptableProblems,problem.id)?acceptableProblems[problem.id]:defaultDisposition}function
runTests(problems,doing){strictForEachFn(problems,function(problem){var id=problem.id,repairPerformed,report,result;aboutTo=[doing,': ',problem.description],result=problem.test(),earliestTests.has(id)||earliestTests.set(id,result),latestTests.set(id,result),report=computeReport(problem),reports.set(problem.id,report),repairPerformed=repairsPerformed.lastIndexOf(problem.repair)!==-1,repairPerformed||!problem.repair||disposition(problem).doNotRepair?(report.postSeverity.level>severities.SAFE.level&&disposition(problem).permit?logger.warn('Problem ignored by configuration ('+report.postSeverity.description+'): '+problem.description):self.updateMaxSeverity(report.postSeverity),yetToRepair['delete'](id)):result?yetToRepair.set(id,problem):yetToRepair['delete'](id)}),aboutTo=void
0}function computeReport(problem){var status=statuses.ALL_FINE,postSeverity=severities.SAFE,beforeFailure=earliestTests.get(problem.id),afterFailure=latestTests.get(problem.id);if(beforeFailure)afterFailure?disposition(problem).doNotRepair?(postSeverity=problem.preSeverity,status=statuses.REPAIR_SKIPPED):problem.repair?(postSeverity=problem.preSeverity,status=statuses.REPAIR_FAILED):(problem.canRepair||(postSeverity=problem.preSeverity),status=statuses.NOT_REPAIRED):problem.repair&&repairsPerformed.lastIndexOf(problem.repair)!==-1?problem.canRepair?(status=statuses.REPAIRED):(postSeverity=problem.preSeverity,status=statuses.REPAIRED_UNSAFELY):(status=statuses.ACCIDENTALLY_REPAIRED);else
if(afterFailure)(problem.repair||!problem.canRepair)&&(postSeverity=problem.preSeverity),status=statuses.BROKEN_BY_OTHER_ATTEMPTED_REPAIRS;return typeof
beforeFailure==='string'&&(logger.error('New Symptom (pre-repair, '+problem.id+'): '+beforeFailure),postSeverity=severities.NEW_SYMPTOM),typeof
afterFailure==='string'&&(logger.error('New Symptom (post-repair, '+problem.id+'): '+afterFailure),postSeverity=severities.NEW_SYMPTOM),{'id':problem.id,'description':problem.description,'preSeverity':problem.preSeverity,'canRepair':problem.canRepair,'urls':problem.urls,'sections':problem.sections,'tests':problem.tests,'status':status,'postSeverity':postSeverity,'beforeFailure':beforeFailure,'afterFailure':afterFailure}}function
computeOk(actualSeverity,opt_criterionSeverity){return'string'===typeof opt_criterionSeverity&&(opt_criterionSeverity=lookupSeverityName(opt_criterionSeverity,true)),opt_criterionSeverity||(opt_criterionSeverity=maxAcceptableSeverity),actualSeverity.level<=opt_criterionSeverity.level}this.setMaxAcceptableSeverity=function(value){maxAcceptableSeverity=value},this.setAcceptableProblems=function(value){if(acceptableProblemsLocked)throw new
Error('Too late to setAcceptableProblems.');acceptableProblems=value},this.getCurrentSeverity=function(){var
severity=plannedSeverity;return yetToRepair.forEach(function(problem){problem.preSeverity.level>severity.level&&!disposition(problem).permit&&(severity=problem.preSeverity)}),severity},this.getPlannedSeverity=function(){return plannedSeverity},this.addPostTestKludge=function(value){if(postTestKludge)throw new
Error('Only one post-test kludge is supported')},this.updateMaxSeverity=function
updateMaxSeverity(severity){severity.level>plannedSeverity.level&&(plannedSeverity=severity)},this.okToUse=function
okToUse(opt_criterionSeverity){return computeOk(self.getCurrentSeverity(),opt_criterionSeverity)},this.okToLoad=function
okToLoad(){return computeOk(plannedSeverity)},this.registerProblem=function(record){var
fullRecord={'id':record.id,'description':record.description||record.id,'test':record.test,'repair':record.repair,'preSeverity':record.preSeverity,'canRepair':record.canRepair,'urls':record.urls||[],'sections':record.sections||[],'tests':record.tests||[]};if(typeof
fullRecord.id!=='string')throw new TypeError('record.id not a string');if(!/^[A-Z0-9_]+$/.test(fullRecord.id))throw new
TypeError('record.id must contain only uppercase, numbers, and underscores');if(typeof
fullRecord.test!=='function')throw new TypeError('record.test not a function');if(problemRecords.has(fullRecord.id))throw new
Error(('duplicate problem ID: '+fullRecord.id));problemRecords.set(fullRecord.id,fullRecord),notDoneProblems.set(fullRecord.id,fullRecord),yetToRepair.set(fullRecord.id,fullRecord)},this.runTests=function
runTestsMethod(){var todo=[];notDoneProblems.forEach(function(record){todo.push(record)}),runTests(todo,'requested test')},this.testAndRepair=function
testAndRepair(){var todo=[];notDoneProblems.forEach(function(record){todo.push(record)}),runTests(todo,'pre test'),strictForEachFn(todo,function(problem){var
repair;latestTests.get(problem.id)&&!disposition(problem).doNotRepair&&(repair=problem.repair,repair&&repairsPerformed.lastIndexOf(repair)===-1&&(aboutTo=['repair: ',problem.description],repair(),repairsPerformed.push(repair)))}),runTests(todo,'post test'),postTestKludge&&postTestKludge(),strictForEachFn(todo,function(problem,i){notDoneProblems['delete'](problem.id)}),logger.reportRepairs(strictMapFn(todo,function(problem){return reports.get(problem.id)}))},this.getReports=function(){var
array=[];return reports.forEach(function(report){array.push(report)}),array},this.wasDoing=function(){return aboutTo?'('+aboutTo.join('')+') ':''}}ses._Repairer=Repairer,ses.maxAcceptableSeverityName=validateSeverityName(ses.maxAcceptableSeverityName,false),ses.maxAcceptableSeverity=ses.severities[ses.maxAcceptableSeverityName],ses.acceptableProblems=validateAcceptableProblems(ses.acceptableProblems);function
validateAcceptableProblems(opt_problems){var validated={},flag,flags,problem,valFlags;if(opt_problems)for(problem
in opt_problems){flags=opt_problems[problem];if(typeof flags!=='object')throw new
Error(('ses.acceptableProblems[\"'+problem+'\"] is not'+' an object, but '+flags));valFlags={'permit':false,'doNotRepair':false};for(flag
in flags)valFlags.hasOwnProperty(flag)&&(valFlags[flag]=Boolean(flags[flag]));validated[problem]=valFlags}return validated}ses._repairer=new
Repairer,ses._repairer.setMaxAcceptableSeverity(ses.maxAcceptableSeverity),ses._repairer.setAcceptableProblems(ses.acceptableProblems)})(),(function
repairES5Module(global){'use strict';var EarlyStringMap,NEEDS_DUMMY_SETTER_repaired,NO_CREATE_NULL,UnsafeFunction,apply,baseProblems,builtInForEach,builtInMapMethod,call,canMitigateSrcGotchas,concat,during,errorInstanceBlacklist,errorInstanceKnownInvisibleList,errorInstanceWhiteMap,errorInstanceWhitelist,getPrototypeOf,hop,indexedReports,is,isExtensible,logger,makeDelayedTamperProofCalled,needToTamperProof,objToString,repair_FREEZING_BREAKS_PROTOTYPES_wasApplied,repair_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN_wasApplied,reports,severities,simpleTamperProofOk,slice,statuses,strictThis,supportedProblems,typedArrayNames,unrepairedArrayPush,unsafeDefProp,unsafeEval;logger=ses.logger,EarlyStringMap=ses._EarlyStringMap,ses.getMaxSeverity=function
getMaxSeverity(){return ses._repairer.getCurrentSeverity()},ses.ok=function ok(maxSeverity){return ses._repairer.okToUse(maxSeverity)},ses.okToLoad=function
okToLoad(){if(arguments.length!==0)throw new Error('okToLoad takes no arguments');return ses._repairer.okToLoad()},ses.updateMaxSeverity=function
updateMaxSeverity(severity){return ses._repairer.updateMaxSeverity(severity)};function
strictForEachFn(list,callback){var i,len;for(i=0,len=list.length;i<len;++i)callback(list[i],i)}function
strictFnSpecimen(){}objToString=Object.prototype.toString,builtInMapMethod=Array.prototype.map,builtInForEach=Array.prototype.forEach,is=ses.is=Object.is||function(x,y){return x===y?x!==0||1/x===1/y:x!==x&&y!==y},ses.makeCallerHarmless=function
assumeCallerHarmless(func,path){return'Apparently fine'},ses.makeArgumentsHarmless=function
assumeArgumentsHarmless(func,path){return'Apparently fine'},simpleTamperProofOk=false;function
makeTamperProof(){var gopd=Object.getOwnPropertyDescriptor,gopn=Object.getOwnPropertyNames,getProtoOf=Object.getPrototypeOf,freeze=Object.freeze,isFrozen=Object.isFrozen,defProp=Object.defineProperty,call=Function.prototype.call;function
forEachNonPoisonOwn(obj,callback){var list=gopn(obj),len=list.length,i,j,name;if(typeof
obj==='function')for(i=0,j=0;i<len;++i)name=list[i],name!=='caller'&&name!=='arguments'&&(callback(name,j),++j);else
strictForEachFn(list,callback)}function simpleTamperProof(obj,opt_pushNext){return obj!==Object(obj)?obj:(opt_pushNext&&forEachNonPoisonOwn(obj,function(name){var
desc=gopd(obj,name);'value'in desc?opt_pushNext(desc.value):(opt_pushNext(desc.get),opt_pushNext(desc.set))}),freeze(obj))}function
tamperProof(obj,opt_pushNext){var func,pushNext;return obj!==Object(obj)?obj:(typeof
obj==='object'||obj===Function.prototype)&&!!gopd(obj,'constructor')&&typeof(func=obj.constructor)==='function'&&func.prototype===obj&&!isFrozen(obj)?(pushNext=opt_pushNext||function(v){},forEachNonPoisonOwn(obj,function(name){var
desc,value;function getter(){return value}function setter(newValue){if(obj===this)throw new
TypeError(('Cannot set virtually frozen property: '+name));!gopd(this,name)||(this[name]=newValue),defProp(this,name,{'value':newValue,'writable':true,'enumerable':true,'configurable':true})}desc=gopd(obj,name),'value'in
desc?(value=desc.value,desc.configurable&&name!=='__proto__'&&(getter.prototype=null,setter.prototype=null,defProp(obj,name,{'get':getter,'set':setter,'enumerable':desc.enumerable,'configurable':false}),pushNext(getter),pushNext(setter)),pushNext(value)):(pushNext(desc.get),pushNext(desc.set))}),freeze(obj)):simpleTamperProof(obj,opt_pushNext)}return simpleTamperProofOk?simpleTamperProof:tamperProof}needToTamperProof=[];function
rememberToTamperProof(obj){needToTamperProof.push(obj)}makeDelayedTamperProofCalled=false,ses.makeDelayedTamperProof=function
makeDelayedTamperProof(){var tamperProof;if(makeDelayedTamperProofCalled)throw'makeDelayedTamperProof() must only be called once.';return tamperProof=makeTamperProof(),strictForEachFn(needToTamperProof,tamperProof),needToTamperProof=void
0,makeDelayedTamperProofCalled=true,tamperProof},ses.verifyStrictFunctionBody=simpleVerifyStrictFunctionBody,unsafeEval=eval,UnsafeFunction=Function;function
simpleVerifyStrictFunctionBody(funcBodySrc){return funcBodySrc=''+funcBodySrc,UnsafeFunction('\"use strict\";'+funcBodySrc),funcBodySrc}function
verifyStrictFunctionBodyByEvalThrowing(funcBodySrc){funcBodySrc=''+funcBodySrc;try{unsafeEval('\"use strict\"; throw \"not a SyntaxError 1\";(function(){'+funcBodySrc+'\n});')}catch(outerErr){if(outerErr==='not a SyntaxError 1')try{unsafeEval('throw \"not a SyntaxError 2\";(function(){{'+funcBodySrc+'\n}})')}catch(innerErr){if(innerErr==='not a SyntaxError 2')return funcBodySrc;if(innerErr
instanceof SyntaxError)throw innerErr}if(outerErr instanceof SyntaxError)throw outerErr}throw new
TypeError('Unexpected verification outcome')}canMitigateSrcGotchas=typeof ses.mitigateSrcGotchas==='function';function
verifyStrictFunctionBodyByParsing(funcBodySrc){var newSrc,safeError;funcBodySrc=''+funcBodySrc;try{newSrc=ses.mitigateSrcGotchas(funcBodySrc,{'parseFunctionBody':true},ses.logger)}catch(error){try{safeError=new
Error(error.message)}catch(metaerror){throw new Error('Could not safely obtain error from mitigateSrcGotchas')}throw safeError}if(newSrc!==funcBodySrc)throw new
SyntaxError('Failed to parse program');return funcBodySrc}function testGlobalLeak(desc,that){return that===void
0?false:that===global?true:objToString.call(that)==='[object Window]'?true:desc+' leaked as: '+that}repair_FREEZING_BREAKS_PROTOTYPES_wasApplied=false,repair_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN_wasApplied=false;function
test_MISSING_GETOWNPROPNAMES(){return!('getOwnPropertyNames'in Object)}function
test_PROTO_SETTER_UNGETTABLE(){var desc=Object.getOwnPropertyDescriptor(Object.prototype,'__proto__');if(!desc)return false;try{desc.set}catch(err){return err
instanceof TypeError?true:''+err}return false}function inTestFrame(callback){var
container,iframe;if(!document||!document.createElement)return undefined;iframe=document.createElement('iframe'),container=document.body||(document.getElementsByTagName('head'))[0]||document.documentElement||document,container.appendChild(iframe);try{return callback(iframe.contentWindow)}finally{container.removeChild(iframe)}}function
test_FREEZING_BREAKS_PROTOTYPES(){var a,b,proto,testObject;if(Object.isFrozen(Object.prototype))testObject=Object;else{testObject=inTestFrame(function(window){return window.Object});if(!testObject)return false;repair_FREEZING_BREAKS_PROTOTYPES_wasApplied&&repair_FREEZING_BREAKS_PROTOTYPES(testObject)}return a=new
testObject,testObject.freeze(testObject.prototype),b=testObject.create(a),proto=Object.getPrototypeOf(b),proto===a?false:proto===testObject.prototype?true:'Prototype of created object is neither specified prototype nor Object.prototype'}ses.kludge_test_FREEZING_BREAKS_PROTOTYPES=test_FREEZING_BREAKS_PROTOTYPES;function
test_FREEZING_BREAKS_WEAKMAP(){var result;return typeof WeakMap==='undefined'?false:(result=inTestFrame(function(window){var
wm1=new window.WeakMap,o,wm2;return wm1.set(window.Object.prototype,true),window.Object.freeze(window.Object.prototype),wm2=new
window.WeakMap,o=window.Object.create(window.Object.prototype),wm2.set(o,true),[wm2.get(o)]}),!result||result[0]===true?false:result[0]===undefined?true:'Unexpected WeakMap value: '+result[0])}function
test_GLOBAL_LEAKS_FROM_GLOBAL_FUNCTION_CALLS(){var that;return global.___global_test_function___=function(){return this},that=___global_test_function___(),delete
global.___global_test_function___,testGlobalLeak('Global func \"this\"',that)}function
test_GLOBAL_LEAKS_FROM_ANON_FUNCTION_CALLS(){var that=(function(){return this})();return testGlobalLeak('Anon func \"this\"',that)}strictThis=this;function
test_GLOBAL_LEAKS_FROM_STRICT_THIS(){return testGlobalLeak('Strict \"this\"',strictThis)}function
test_GLOBAL_LEAKS_FROM_BUILTINS(){var v=({}).valueOf,that='dummy';try{that=v()}catch(err){return err
instanceof TypeError?false:'valueOf() threw: '+err}return that===void 0?false:testGlobalLeak('valueOf()',that)}function
test_GLOBAL_LEAKS_FROM_GLOBALLY_CALLED_BUILTINS(){var that;global.___global_valueOf_function___=({}).valueOf,that='dummy';try{that=___global_valueOf_function___()}catch(err){return err
instanceof TypeError?false:'valueOf() threw: '+err}finally{delete global.___global_valueOf_function___}return that===void
0?false:testGlobalLeak('Global valueOf()',that)}function test_GLOBAL_LEAKS_FROM_ARRAY_METHODS(){var
readCanary={},writeCanary={},saved=[],found,i,lengthVal,minSaveLength;function save(name){var
opt_desc=Object.getOwnPropertyDescriptor(global,name);return saved.push([name,opt_desc]),!!opt_desc}lengthVal=global.length,minSaveLength=(typeof
lengthVal==='number'&&isFinite(lengthVal)?lengthVal:0)+2,save('length'),found=true;for(i=0;found||i<minSaveLength;++i)found=save(i);function
subtest(name,args,failPredicate){var method=Array.prototype[name],result;try{result=method(args[0],args[1],args[2])}catch(err){return err
instanceof TypeError?false:'Unexpected error from '+name+': '+err}return failPredicate(result)?true:'Unexpected result from '+name+': '+result}try{try{Array.prototype.push.call(global,readCanary)}catch(e){}return subtest('concat',[[]],function(result){return result[0]===global})||subtest('slice',[0],function(result){return result[result.length-1]===readCanary})||subtest('pop',[],function(result){return result===readCanary})||subtest('push',[writeCanary],function(result){return global[global.length-1]===writeCanary})||subtest('shift',[],function(result){return true})||subtest('slice',[],function(result){return result.indexOf(readCanary)!==-1})||subtest('splice',[0,1,writeCanary],function(result){return global[0]===writeCanary})||subtest('unshift',[writeCanary],function(result){return global[0]===writeCanary})}finally{saved.forEach(function(record){record[1]?Object.defineProperty(global,record[0],record[1]):delete
global[record[0]]})}}function test_MISSING_FREEZE_ETC(){return!('freeze'in Object)}function
test_FUNCTION_PROTOTYPE_DESCRIPTOR_LIES(){function foo(){}return Object.defineProperty(foo,'prototype',{'value':{}}),foo.prototype!==Object.getOwnPropertyDescriptor(foo,'prototype').value}function
test_MISSING_CALLEE_DESCRIPTOR(){function foo(){}return Object.getOwnPropertyNames(foo).indexOf('callee')<0?false:foo.hasOwnProperty('callee')?'Empty strict function has own callee':true}function
test_STRICT_DELETE_RETURNS_FALSE(){var deleted;if(!RegExp.hasOwnProperty('rightContext'))return false;try{deleted=delete
RegExp.rightContext}catch(err){return err instanceof TypeError?false:'Deletion failed with: '+err}return!deleted}function
test_REGEXP_CANT_BE_NEUTERED(){var deleted;if(!RegExp.hasOwnProperty('leftContext'))return false;try{deleted=delete
RegExp.leftContext}catch(err){return err instanceof TypeError?true:'Deletion failed with: '+err}return RegExp.hasOwnProperty('leftContext')?deleted?'Deletion of RegExp.leftContext did not succeed.':true:false}function
test_REGEXP_TEST_EXEC_UNSAFE(){var match;return/foo/.test('xfoox'),match=((new RegExp('(.|\r|\n)*','')).exec())[0],match==='undefined'?false:match==='xfoox'?true:'regExp.exec() does not match against \"undefined\".'}function
test_MISSING_BIND(){return!('bind'in Function.prototype)}function test_BIND_CALLS_APPLY(){var
answer,applyCalled,b;if(!('bind'in Function.prototype))return false;applyCalled=false;function
foo(){return[].slice.call(arguments,0).join(',')}return foo.apply=function fakeApply(self,args){return applyCalled=true,Function.prototype.apply.call(this,self,args)},b=foo.bind(33,44),answer=b(55,66),applyCalled?true:answer==='44,55,66'?false:'Bind test returned \"'+answer+'\" instead of \"44,55,66\".'}function
test_BIND_CANT_CURRY_NEW(){var d,str;function construct(f,args){var bound=Function.prototype.bind.apply(f,[null].concat(args));return new
bound}try{d=construct(Date,[1957,4,27])}catch(err){return err instanceof TypeError?true:'Curries construction failed with: '+err}return typeof
d==='string'?true:(str=objToString.call(d),str==='[object Date]'?false:'Unexpected '+str+': '+d)}function
test_MUTABLE_DATE_PROTO(){var v;try{Date.prototype.setFullYear(1957)}catch(err){return err
instanceof TypeError?false:'Mutating Date.prototype failed with: '+err}return v=Date.prototype.getFullYear(),Date.prototype.setFullYear(NaN),v!==v&&typeof
v==='number'?false:v===1957?true:'Mutating Date.prototype did not throw'}function
test_MUTABLE_WEAKMAP_PROTO(){var v,x;if(typeof WeakMap!=='function')return false;x={};try{WeakMap.prototype.set(x,86)}catch(err){return err
instanceof TypeError?false:'Mutating WeakMap.prototype failed with: '+err}return v=WeakMap.prototype.get(x),v===86?true:'Mutating WeakMap.prototype did not throw'}function
test_NEED_TO_WRAP_FOREACH(){if(!('freeze'in Object))return false;if(Array.prototype.forEach!==builtInForEach)return false;try{return['z'].forEach(function(){Object.freeze(Array.prototype.forEach)}),false}catch(err){return err
instanceof TypeError?true:'freezing forEach failed with '+err}}function test_FOREACH_COERCES_THISOBJ(){var
needsWrapping=true;return[1].forEach(function(){needsWrapping='string'!=typeof this},'f'),needsWrapping}function
test_NEEDS_DUMMY_SETTER(){var ChromeMajorVersionPattern,match,ver;return NEEDS_DUMMY_SETTER_repaired?false:typeof
navigator==='undefined'?false:(ChromeMajorVersionPattern=/Chrome\/(\d*)\./,match=ChromeMajorVersionPattern.exec(navigator.userAgent),match?(ver=+match[1],ver<=17):false)}NEEDS_DUMMY_SETTER_repaired=false;function
test_FORM_GETTERS_DISAPPEAR(){var desc,f;function getter(){return'gotten'}if(typeof
document==='undefined'||typeof document.createElement!=='function')return false;f=document.createElement('form');try{Object.defineProperty(f,'foo',{'get':getter,'set':void
0})}catch(err){return'defining accessor on form failed with: '+err}return desc=Object.getOwnPropertyDescriptor(f,'foo'),desc.get===getter?false:desc.get===void
0?true:'Getter became '+desc.get}function test_ACCESSORS_INHERIT_AS_OWN(){var base={},derived=Object.create(base);function
getter(){return'gotten'}return Object.defineProperty(base,'foo',{'get':getter}),!derived.hasOwnProperty('foo')&&Object.getOwnPropertyDescriptor(derived,'foo')===void
0&&Object.getOwnPropertyNames(derived).indexOf('foo')<0?false:!derived.hasOwnProperty('foo')||Object.getOwnPropertyDescriptor(derived,'foo').get!==getter||Object.getOwnPropertyNames(derived).indexOf('foo')<0?'Accessor properties partially inherit as own properties.':(Object.defineProperty(base,'bar',{'get':getter,'configurable':true}),!derived.hasOwnProperty('bar')&&Object.getOwnPropertyDescriptor(derived,'bar')===void
0&&Object.getOwnPropertyNames(derived).indexOf('bar')<0?true:'Accessor properties inherit as own even if configurable.')}function
test_SORT_LEAKS_GLOBAL(){var that='dummy';return[2,3].sort(function(x,y){return that=this,x-y}),that===void
0?false:that===global?true:'sort called comparefn with \"this\" === '+that}function
test_REPLACE_LEAKS_GLOBAL(){var that='dummy';function capture(){return that=this,'y'}return'x'.replace(/x/,capture),that===void
0?false:that===capture?true:that===global?true:'Replace called replaceValue function with \"this\" === '+that}function
test_CANT_GOPD_CALLER(){var desc=null;try{desc=Object.getOwnPropertyDescriptor(function(){},'caller')}catch(err){return err
instanceof TypeError?true:'getOwnPropertyDescriptor failed with: '+err}return desc&&typeof
desc.get==='function'&&typeof desc.set==='function'&&!desc.configurable?false:desc&&desc.value===null&&!desc.writable&&!desc.configurable?false:'getOwnPropertyDesciptor returned unexpected caller descriptor'}function
test_CANT_HASOWNPROPERTY_CALLER(){var answer=void 0;try{answer=(function(){}).hasOwnProperty('caller')}catch(err){return err
instanceof TypeError?true:'hasOwnProperty failed with: '+err}return answer?false:'strict_function.hasOwnProperty(\"caller\") was false'}function
has(base,name,baseDesc){var result=void 0,finallySkipped=true;try{result=name in
base}catch(err){return logger.error('New symptom (a): (\''+name+'\' in \x3c'+baseDesc+'\x3e) threw: ',err),result=false,false}finally{finallySkipped=false,result===void
0&&logger.error('New symptom (b): (\''+name+'\' in \x3c'+baseDesc+'\x3e) failed')}return finallySkipped&&logger.error('New symptom (e): (\''+name+'\' in \x3c'+baseDesc+'\x3e) inner finally skipped'),!!result}function
has2(base,name,baseDesc){var result=void 0,finallySkipped=true;try{result=has(base,name,baseDesc)}catch(err){return logger.error('New symptom (c): (\''+name+'\' in \x3c'+baseDesc+'\x3e) threw: ',err),result=false,false}finally{finallySkipped=false,result===void
0&&logger.error('New symptom (d): (\''+name+'\' in \x3c'+baseDesc+'\x3e) failed')}return finallySkipped&&logger.error('New symptom (f): (\''+name+'\' in \x3c'+baseDesc+'\x3e) outer finally skipped'),!!result}function
test_CANT_IN_CALLER(){var answer=void 0;try{answer=has2(function(){},'caller','strict_function')}catch(err){return err
instanceof TypeError?true:'(\"caller\" in strict_func) failed with: '+err}finally{}return answer?false:'(\"caller\" in strict_func) was false.'}function
test_CANT_IN_ARGUMENTS(){var answer=void 0;try{answer=has2(function(){},'arguments','strict_function')}catch(err){return err
instanceof TypeError?true:'(\"arguments\" in strict_func) failed with: '+err}finally{}return answer?false:'(\"arguments\" in strict_func) was false.'}function
test_STRICT_CALLER_NOT_POISONED(){var caller,testfn;if(!has2(strictFnSpecimen,'caller','a strict function'))return false;function
foo(m){return m.caller}testfn=Function('m','f','return m([m], f)[0];');try{caller=testfn(strictFnSpecimen,foo)}catch(err){return err
instanceof TypeError?false:'Strict \"caller\" failed with: '+err}return testfn===caller?true:'Unexpected \"caller\": '+caller}function
test_STRICT_ARGUMENTS_NOT_POISONED(){var args,testfn;if(!has2(strictFnSpecimen,'arguments','a strict function'))return false;function
foo(m){return m.arguments}testfn=Function('m','f','return m([m], f)[0];');try{args=testfn(strictFnSpecimen,foo)}catch(err){return err
instanceof TypeError?false:'Strict \"arguments\" failed with: '+err}return args[1]===foo?true:'Unexpected arguments: '+arguments}function
test_BUILTIN_LEAKS_CALLER(){var a,caller,testfn;if(!has2(builtInMapMethod,'caller','a builtin'))return false;function
foo(m){return m.caller}testfn=Function('a','f','return a.map(f)[0];'),a=[builtInMapMethod],a.map=builtInMapMethod;try{caller=testfn(a,foo)}catch(err){return err
instanceof TypeError?false:'Built-in \"caller\" failed with: '+err}return null===caller||void
0===caller?false:testfn===caller?true:'Unexpected \"caller\": '+caller}function
test_BUILTIN_LEAKS_ARGUMENTS(){var a,args,testfn;if(!has2(builtInMapMethod,'arguments','a builtin'))return false;function
foo(m){return m.arguments}testfn=Function('a','f','return a.map(f)[0];'),a=[builtInMapMethod],a.map=builtInMapMethod;try{args=testfn(a,foo)}catch(err){return err
instanceof TypeError?false:'Built-in \"arguments\" failed with: '+err}return!(args===void
0||args===null)}function test_BOUND_FUNCTION_LEAKS_CALLER(){var bar,caller,testfn;if(!('bind'in
Function.prototype))return false;function foo(){return bar.caller}bar=foo.bind({});if(!has2(bar,'caller','a bound function'))return false;testfn=Function('b','return b();');try{caller=testfn(bar)}catch(err){return err
instanceof TypeError?false:'Bound function \"caller\" failed with: '+err}return caller===void
0||caller===null?false:caller===testfn?true:'Unexpected \"caller\": '+caller}function
test_BOUND_FUNCTION_LEAKS_ARGUMENTS(){var args,bar,testfn;if(!('bind'in Function.prototype))return false;function
foo(){return bar.arguments}bar=foo.bind({});if(!has2(bar,'arguments','a bound function'))return false;testfn=Function('b','return b();');try{args=testfn(bar)}catch(err){return err
instanceof TypeError?false:'Bound function \"arguments\" failed with: '+err}return!(args===void
0||args===null)}function test_DELETED_BUILTINS_IN_OWN_NAMES(){var desc,names;if(!('__defineSetter__'in
Object.prototype))return false;desc=Object.getOwnPropertyDescriptor(Object.prototype,'__defineSetter__');try{try{delete
Object.prototype.__defineSetter__}catch(err1){return false}return names=Object.getOwnPropertyNames(Object.prototype),names.indexOf('__defineSetter__')===-1?false:!('__defineSetter__'in
Object.prototype)}finally{Object.defineProperty(Object.prototype,'__defineSetter__',desc)}}function
test_GETOWNPROPDESC_OF_ITS_OWN_CALLER_FAILS(){try{Object.getOwnPropertyDescriptor(Object.getOwnPropertyDescriptor,'caller')}catch(err){return err
instanceof TypeError?true:'getOwnPropertyDescriptor threw: '+err}return false}function
test_JSON_PARSE_PROTO_CONFUSION(){var x;try{x=JSON.parse('{\"__proto__\":[]}')}catch(err){return err
instanceof TypeError?false:'JSON.parse failed with: '+err}return Object.getPrototypeOf(x)!==Object.prototype?true:Array.isArray(x.__proto__)?false:'JSON.parse did not set \"__proto__\" as a regular property'}function
test_PROTO_NOT_FROZEN(){var x,y;if(!('freeze'in Object))return false;x=Object.preventExtensions({});if(x.__proto__===void
0&&!('__proto__'in x))return false;y={};try{x.__proto__=y}catch(err){return err
instanceof TypeError?false:'Mutating __proto__ failed with: '+err}return y.isPrototypeOf(x)?true:'Mutating __proto__ neither failed nor succeeded'}function
test_PROTO_REDEFINABLE(){var x,y;if(!('freeze'in Object))return false;x=Object.preventExtensions({});if(x.__proto__===void
0&&!('__proto__'in x))return false;y={};try{Object.defineProperty(x,'__proto__',{'value':y})}catch(err){return err
instanceof TypeError?false:'Defining __proto__ failed with: '+err}return x.__proto__===y}function
test_DEFINING_READ_ONLY_PROTO_FAILS_SILENTLY(){var x,y;if(!('freeze'in Object))return false;x=Object.preventExtensions({});if(x.__proto__===void
0&&!('__proto__'in x))return false;y={};try{Object.defineProperty(x,'__proto__',{'value':y})}catch(err){return err
instanceof TypeError?false:'Defining __proto__ failed with: '+err}return x.__proto__===Object.prototype?true:'Read-only proto was changed in a strange way.'}function
test_STRICT_EVAL_LEAKS_GLOBAL_VARS(){return unsafeEval('\"use strict\"; var ___global_test_variable___ = 88;'),'___global_test_variable___'in
global?(delete global.___global_test_variable___,true):false}function test_STRICT_EVAL_LEAKS_GLOBAL_FUNCS(){return unsafeEval('\"use strict\"; function ___global_test_func___(){}'),'___global_test_func___'in
global?(delete global.___global_test_func___,true):false}function test_EVAL_BREAKS_MASKING(){var
x=function a(){function a(){}return eval(''),a};return x()===x}function test_PARSEINT_STILL_PARSING_OCTAL(){var
n=parseInt('010');return n===10?false:n===8?true:'parseInt(\"010\") returned '+n}function
test_STRICT_E4X_LITERALS_ALLOWED(){var x;try{x=eval('\"use strict\";(\x3cfoo/\x3e);')}catch(err){return err
instanceof SyntaxError?false:'E4X test failed with: '+err}return x!==void 0?true:'E4X literal expression had no value'}function
test_ASSIGN_CAN_OVERRIDE_FROZEN(){var x=Object.freeze({'foo':88}),y=Object.create(x);try{y.foo=99}catch(err){return err
instanceof TypeError?false:'Override failed with: '+err}return y.foo===99?true:y.foo===88?'Override failed silently':'Unexpected override outcome: '+y.foo}function
test_INCREMENT_IGNORES_FROZEN(){var i,threw,x;function optimizedFun(o,i){var j;if(i==3)for(j=0;j<100000;++j);++o.a}x=Object.freeze({'a':88}),threw=true;for(i=0;i<4;++i)try{optimizedFun(x,i),threw=false}catch(err){if(!(err
instanceof TypeError))return'Increment failed with: '+err}return x.a===89?true:x.a===88?threw?false:'Increment failed silently':'Unexpected increment outcome: '+JSON.stringify(x)}function
test_POP_IGNORES_FROZEN(){var x=[1,2];Object.freeze(x);try{x.pop()}catch(e){if(x.length!==2)return'Unexpected modification of frozen array';if(x[0]===1&&x[1]===2)return false}return x.length===1&&x[0]===1&&x[1]===2?true:x.length===1&&x[0]===1&&!('1'in
x)?true:x.length!==2?'Unexpected silent modification of frozen array':x[0]!==1||x[1]!==2}function
test_SORT_IGNORES_FROZEN(){var x=[2,1];Object.freeze(x);try{x.sort()}catch(e){if(x.length!==2)return'Unexpected modification of frozen array';if(x[0]===2&&x[1]===1)return false}return x.length!==2?'Unexpected silent modification of frozen array':x[0]!==2||x[1]!==1}function
test_PUSH_IGNORES_SEALED(){var x=[1,2];Object.seal(x);try{x.push(3)}catch(e){if(x.length!==2)return'Unexpected modification of frozen array';if(x[0]===1&&x[1]===2)return false}return x.length!==2||x[0]!==1||x[1]!==2}function
test_PUSH_DOES_NOT_THROW_ON_FROZEN_ARRAY(){var x=[1,2];Object.freeze(x);try{x.push(3)}catch(e){return false}return true}function
test_PUSH_IGNORES_FROZEN(){var x=[1,2];Object.freeze(x);try{x.push(3)}catch(e){if(x.length!==2)return'Unexpected modification of frozen array';if(x[0]===1&&x[1]===2)return false}return x.length!==2||x[0]!==1||x[1]!==2}unrepairedArrayPush=Array.prototype.push;function
test_ARRAY_LENGTH_MUTABLE(){var i,x;for(i=0;i<2;++i){x=[1,2],Object.freeze(x);try{unrepairedArrayPush.call(x,3)}catch(e){}if(x.length===3&&x[0]===1&&x[1]===2&&x[2]===3)return true;if(x[0]!==1||x[1]!==2||x[2]!==undefined)return'Unexpected modification to elements of array';if(x.length===3)return true;if(x.length!==2)return'Unexpected modification to length of array'}return false}function
test_ARRAYS_DELETE_NONCONFIGURABLE(){var x=[];Object.defineProperty(x,0,{'value':3,'configurable':false});try{x.length=0}catch(e){}return x.length!==1||x[0]!==3}function
test_ARRAYS_MODIFY_READONLY(){var x=[];try{Object.defineProperty(x,'length',{'value':0,'writable':false}),x[0]=1}catch(e){}return x.length!==0||x[0]!==void
0}function test_CANT_REDEFINE_NAN_TO_ITSELF(){var descNaN=Object.getOwnPropertyDescriptor(global,'NaN');try{Object.defineProperty(global,'NaN',descNaN)}catch(err){return err
instanceof TypeError?true:'defineProperty of NaN failed with: '+err}return false}function
test_FREEZE_IS_FRAME_DEPENDENT(){var other=inTestFrame(function(window){return{'Object':window.Object,'mutator':window.Function('o','o.x = 1;')}}),freezeSucceeded,frozenInOtherFrame,frozenInThisFrame;if(!other)return false;frozenInOtherFrame=other.Object();try{Object.freeze(frozenInOtherFrame),freezeSucceeded=true}catch(e){freezeSucceeded=false}if(Object.isFrozen(frozenInOtherFrame)&&other.Object.isFrozen(frozenInOtherFrame)&&freezeSucceeded);else
if(!Object.isFrozen(frozenInOtherFrame)&&!other.Object.isFrozen(frozenInOtherFrame)&&!freezeSucceeded);else
if(Object.isFrozen(frozenInOtherFrame)&&!other.Object.isFrozen(frozenInOtherFrame)&&freezeSucceeded)return true;else
return'Other freeze failure: '+Object.isFrozen(frozenInOtherFrame)+other.Object.isFrozen(frozenInOtherFrame)+freezeSucceeded;return frozenInThisFrame=Object.freeze({}),other.mutator(frozenInThisFrame),frozenInThisFrame.x!==undefined?'mutable in other frame':false}errorInstanceWhitelist=['arguments','message','stack','type','fileName','lineNumber','message','stack','columnNumber','line','message','sourceId','sourceURL','message','stack','line','column','description','message','number','message','stack','stacktrace'],errorInstanceWhiteMap=new
EarlyStringMap,strictForEachFn(errorInstanceWhitelist,function(name){errorInstanceWhiteMap.set(name,true)}),errorInstanceKnownInvisibleList=['message','fileName','lineNumber','columnNumber','stack'],errorInstanceBlacklist=['category','context','href','lineNo','msgId','source','trace','correctSourcePoint','correctWithStackTrace','getSourceLine','resetSource'];function
test_UNEXPECTED_ERROR_PROPERTIES(){var errs=[new Error('e1')],result;try{null.foo=3}catch(err){errs.push(err)}return result=false,strictForEachFn(errs,function(err){strictForEachFn(Object.getOwnPropertyNames(err),function(name){errorInstanceWhiteMap.has(name)||(result='Unexpected error instance property: '+name)})}),result}function
test_ERRORS_HAVE_INVISIBLE_PROPERTIES(){var gopn=Object.getOwnPropertyNames,gopd=Object.getOwnPropertyDescriptor,checks=errorInstanceWhitelist.concat(errorInstanceBlacklist),needRepair=false,errors=[new
Error('e1')],err,found,i,j,prop;try{null.foo=3}catch(err){errors.push(err)}for(i=0;i<errors.length;++i){err=errors[i],found=new
EarlyStringMap,strictForEachFn(gopn(err),function(prop){found.set(prop,true)});for(j=0;j<errorInstanceKnownInvisibleList.length;++j)prop=errorInstanceKnownInvisibleList[j],gopd(err,prop)&&!found.get(prop)&&(needRepair=true,found.set(prop,true));for(j=0;j<checks.length;++j){prop=checks[j];if(gopd(err,prop)&&!found.get(prop))return'Unexpectedly invisible Error property: '+prop}}return needRepair}function
test_STRICT_GETTER_BOXES(){var v;Object.defineProperty(Number.prototype,'___test_prop___',{'get':function(){return this},'set':void
0,'enumerable':false,'configurable':true}),v=null;try{return v=(3).___test_prop___,v===3?false:v
instanceof Number?true:'unexpected boxing test result: '+v}finally{delete Number.prototype.___test_prop___}}function
test_NON_STRICT_GETTER_DOESNT_BOX(){var v;Object.defineProperty(Number.prototype,'___test_prop___',{'get':new
Function('return this;'),'set':void 0,'enumerable':false,'configurable':true}),v=null;try{return v=(3).___test_prop___,v
instanceof Number?false:v===3?true:'unexpected non-boxing test result: '+v}finally{delete
Number.prototype.___test_prop___}}function test_NONCONFIGURABLE_OWN_PROTO(){var
desc,o;try{o=Object.create(null)}catch(e){if(e.message===NO_CREATE_NULL)return false;throw e}return desc=Object.getOwnPropertyDescriptor(o,'__proto__'),desc===undefined?false:desc.configurable?false:desc.value===null&&desc.configurable===false?true:'Unexpected __proto__ own property descriptor, enumerable: '+desc.enumerable+', value: '+desc.value}function
getThrowTypeError(){return Object.getOwnPropertyDescriptor(getThrowTypeError,'arguments').get}function
test_THROWTYPEERROR_UNFROZEN(){return!Object.isFrozen(getThrowTypeError())}function
test_THROWTYPEERROR_PROPERTIES(){var tte=getThrowTypeError();return!!Object.getOwnPropertyDescriptor(tte,'prototype')||!!Object.getOwnPropertyDescriptor(tte,'arguments')||!!Object.getOwnPropertyDescriptor(tte,'caller')}function
test_SYNTAX_ERRORS_ARENT_ALWAYS_EARLY(){try{unsafeEval('throw \"not a SyntaxError\"; return;')}catch(err){return err==='not a SyntaxError'?true:err
instanceof SyntaxError?false:'Unexpected error: '+err}return'Invalid text parsed'}function
test_CANT_SAFELY_VERIFY_SYNTAX(){try{Function('/*','*/){')}catch(err){return err
instanceof SyntaxError?false:'Unexpected error: '+err}if(ses.verifyStrictFunctionBody===simpleVerifyStrictFunctionBody)return true;if(ses.verifyStrictFunctionBody===verifyStrictFunctionBodyByParsing)return false;try{ses.CANT_SAFELY_VERIFY_SYNTAX_canary=false;try{ses.verifyStrictFunctionBody('}), (ses.CANT_SAFELY_VERIFY_SYNTAX_canary = true), (function(){')}catch(err){return err
instanceof SyntaxError?false:'Unexpected error: '+err}return ses.CANT_SAFELY_VERIFY_SYNTAX_canary===true?true:'Unexpected verification failure'}finally{delete
ses.CANT_SAFELY_VERIFY_SYNTAX_canary}}typedArrayNames=['Int8Array','Uint8Array','Uint8ClampedArray','Int16Array','Uint16Array','Int32Array','Uint32Array','Float32Array','Float64Array'];function
test_TYPED_ARRAYS_THROW_DOMEXCEPTION(){if(global.DataView==='undefined')return false;if(global.DOMException==='undefined')return false;function
subtest(f){try{f()}catch(e){return e instanceof DOMException?true:e instanceof Error&&!(e
instanceof DOMException)?false:'Exception from '+f+' of unexpected type: '+e}return f+' did not throw'}return[function(){(new
global.Int8Array(1)).set(new global.Int8Array,10)},function(){(new global.DataView((new
global.ArrayBuffer(1)))).getInt8(-1)}].some(subtest)}function test_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN(){return inTestFrame(function(window){var
fail;return repair_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN_wasApplied&&repair_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN(window),fail=false,typedArrayNames.forEach(function(ctorName){var
ctor=window[ctorName],proto;if(!ctor)return;proto=ctor.prototype,window.Object.freeze(proto);if(!window.Object.isFrozen(proto))return fail=true,void
0;window.Object.getOwnPropertyNames(proto,function(prop){var desc;if(typeof fail==='string')return;desc=window.Object.getOwnPropertyDescriptor(proto,prop);if(!desc.configurable&&desc.writable)fail=true;else
if(!desc.configurable&&!desc.writable);else return fail='Unexpected property attributes for '+ctorName+'.'+prop,void
0;try{proto[prop]=9}catch(e){}if(proto[prop]!==desc.value)return fail='Unexpected actual writability of '+ctorName+'.'+prop,void
0})}),fail})}function test_NESTED_STRICT_FUNCTIONS_LEAK(){try{return unsafeEval('(function() {\n  \"use strict\";\n  var a = function good() { return false; };\n  try {\n    function a() { return true; }    a = function blah() {\n      return \"Assignment skipped nested function definition\";\n    };\n  } catch (x) {}\n  return a();\n})();\n')}catch(err){return err
instanceof SyntaxError?false:'Unexpected error from strict nested function: '+err}}call=Function.prototype.call,apply=Function.prototype.apply,hop=Object.prototype.hasOwnProperty,slice=Array.prototype.slice,concat=Array.prototype.concat,getPrototypeOf=Object.getPrototypeOf,unsafeDefProp=Object.defineProperty,isExtensible=Object.isExtensible;function
repair_DEFINE_PROPERTY(){function repairedDefineProperty(base,name,desc){if(name==='prototype'&&typeof
base==='function'&&'value'in desc)try{base.prototype=desc.value}catch(err){logger.warn('prototype fixup failed',err)}else
if(name==='__proto__'&&!isExtensible(base))throw TypeError('Cannot redefine __proto__ on a non-extensible object');return unsafeDefProp(base,name,desc)}Object.defineProperty(Object,'defineProperty',{'value':repairedDefineProperty})}function
repair_REGEXP_CANT_BE_NEUTERED(){var UnsafeRegExp=RegExp,FakeRegExp=function RegExpWrapper(pattern,flags){switch(arguments.length){case
0:return UnsafeRegExp();case 1:return UnsafeRegExp(pattern);default:return UnsafeRegExp(pattern,flags)}};Object.defineProperty(FakeRegExp,'prototype',{'value':UnsafeRegExp.prototype}),Object.defineProperty(FakeRegExp.prototype,'constructor',{'value':FakeRegExp}),RegExp=FakeRegExp}function
makeMutableProtoPatcher(constr,classString){var proto=constr.prototype,baseToString=objToString.call(proto),grandBaseToString,grandProto;if(baseToString!=='[object '+classString+']')throw new
TypeError(('unexpected: '+baseToString));grandProto=getPrototypeOf(proto),grandBaseToString=objToString.call(grandProto);if(grandBaseToString==='[object '+classString+']')throw new
TypeError(('malformed inheritance: '+classString));grandProto!==Object.prototype&&logger.log('unexpected inheritance: '+classString);function
mutableProtoPatcher(name){var originalMethod;if(!hop.call(proto,name))return;originalMethod=proto[name];function
replacement(var_args){var parent=getPrototypeOf(this),thisToString;if(parent!==proto){if(objToString.call(parent)!==baseToString)throw thisToString=objToString.call(this),thisToString===baseToString?new
TypeError(('May not mutate internal state of a '+classString+'.prototype')):new TypeError(('Unexpected: '+thisToString))};return originalMethod.apply(this,arguments)}Object.defineProperty(proto,name,{'value':replacement})}return mutableProtoPatcher}function
repair_MUTABLE_DATE_PROTO(){['setYear','setTime','setFullYear','setUTCFullYear','setMonth','setUTCMonth','setDate','setUTCDate','setHours','setUTCHours','setMinutes','setUTCMinutes','setSeconds','setUTCSeconds','setMilliseconds','setUTCMilliseconds'].forEach(makeMutableProtoPatcher(Date,'Date'))}function
repair_MUTABLE_WEAKMAP_PROTO(){['set','delete'].forEach(makeMutableProtoPatcher(WeakMap,'WeakMap'))}function
repair_NEED_TO_WRAP_FOREACH(){Object.defineProperty(Array.prototype,'forEach',{'value':function(callback,thisArg){var
O,T,k,kValue,len;if(this===null||this===undefined)throw new TypeError('this is null or not defined');O=Object(this),len=O.length>>>0;if(objToString.call(callback)!=='[object Function]')throw new
TypeError((callback+' is not a function'));T=thisArg,k=0;while(k<len)k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),++k}})}function
repair_NEEDS_DUMMY_SETTER(){var defProp=Object.defineProperty,gopd=Object.getOwnPropertyDescriptor;function
dummySetter(newValue){throw new TypeError(('no setter for assigning: '+newValue))}dummySetter.prototype=null,rememberToTamperProof(dummySetter),defProp(Object,'defineProperty',{'value':function
setSetterDefProp(base,name,desc){var desc2,newDesc,oldDesc,result,testBase;if(typeof
desc.get==='function'&&desc.set===void 0){oldDesc=gopd(base,name);if(oldDesc)testBase={},defProp(testBase,name,oldDesc),defProp(testBase,name,desc),desc=gopd(testBase,name),desc.set===void
0&&(desc.set=dummySetter);else{if(objToString.call(base)==='[object HTMLFormElement]'){desc2={'get':desc.get},'enumerable'in
desc&&(desc2.enumerable=desc.enumerable),'configurable'in desc&&(desc2.configurable=desc.configurable),result=defProp(base,name,desc2),newDesc=gopd(base,name);if(newDesc.get===desc.get)return result}desc.set=dummySetter}}return defProp(base,name,desc)}}),NEEDS_DUMMY_SETTER_repaired=true}function
repair_JSON_PARSE_PROTO_CONFUSION(){var unsafeParse=JSON.parse;function validate(plainJSON){var
proto;if(plainJSON!==Object(plainJSON))return;proto=getPrototypeOf(plainJSON);if(proto!==Object.prototype&&proto!==Array.prototype)throw new
TypeError('Parse resulted in invalid JSON. See https://code.google.com/p/v8/issues/detail?id=621');Object.keys(plainJSON).forEach(function(key){validate(plainJSON[key])})}Object.defineProperty(JSON,'parse',{'value':function
parseWrapper(text,opt_reviver){var result=unsafeParse(text);return validate(result),opt_reviver?unsafeParse(text,opt_reviver):result},'writable':true,'enumerable':false,'configurable':true})}function
repair_PARSEINT_STILL_PARSING_OCTAL(){var badParseInt=parseInt;function goodParseInt(n,radix){var
isHexOrOctal,isOct;return n=''+n,radix=+radix,isHexOrOctal=/^\s*[+-]?\s*0(x?)/.exec(n),isOct=isHexOrOctal?isHexOrOctal[1]!=='x':false,isOct&&(radix!==radix||0===radix)?badParseInt(n,10):badParseInt(n,radix)}parseInt=goodParseInt}function
repair_ASSIGN_CAN_OVERRIDE_FROZEN(){simpleTamperProofOk=true}function repair_CANT_REDEFINE_NAN_TO_ITSELF(){var
defProp=Object.defineProperty,attrs=['writable','get','set','enumerable','configurable'];defProp(Object,'defineProperty',{'value':function(base,name,desc){var
attr,i,len,oldDesc;try{return defProp(base,name,desc)}catch(err){oldDesc=Object.getOwnPropertyDescriptor(base,name);for(i=0,len=attrs.length;i<len;++i){attr=attrs[i];if(attr
in desc&&desc[attr]!==oldDesc[attr])throw err}if(!('value'in desc)||is(desc.value,oldDesc.value))return base;throw err}}})}function
repair_FREEZE_IS_FRAME_DEPENDENT(){fix('preventExtensions'),fix('freeze'),fix('seal');function
fix(prop){var base=Object[prop];Object.defineProperty(Object,prop,{'configurable':true,'writable':true,'value':function
frameCheckWrapper(obj){var parent=obj;while(Object.getPrototypeOf(parent)!==null)parent=Object.getPrototypeOf(parent);if(parent===obj||parent===Object.prototype)return base(obj);throw new
Error(('Cannot reliably '+prop+' object from other frame.'))}})}}function repair_POP_IGNORES_FROZEN(){var
pop=Array.prototype.pop,frozen=Object.isFrozen;Object.defineProperty(Array.prototype,'pop',{'value':function(){if(frozen(this))throw new
TypeError('Cannot pop a frozen object.');return pop.call(this)},'configurable':true,'writable':true})}function
repair_SORT_IGNORES_FROZEN(){var sort=Array.prototype.sort,frozen=Object.isFrozen;Object.defineProperty(Array.prototype,'sort',{'value':function(compareFn){if(frozen(this))throw new
TypeError('Cannot sort a frozen object.');return arguments.length===0?sort.call(this):sort.call(this,compareFn)},'configurable':true,'writable':true})}function
repair_PUSH_IGNORES_SEALED(){var push=Array.prototype.push,sealed=Object.isSealed;Object.defineProperty(Array.prototype,'push',{'value':function(compareFn){if(sealed(this))throw new
TypeError('Cannot push onto a sealed object.');return push.apply(this,arguments)},'configurable':true,'writable':true})}function
repair_ARRAY_LENGTH_MUTABLE(){var freeze=Object.freeze,seal=Object.seal,preventExtensions=Object.preventExtensions,isArray=Array.isArray;['freeze','seal','preventExtensions'].forEach(function(prop){var
desc=Object.getOwnPropertyDescriptor(Object,prop),existingMethod=desc.value;desc.value=function
protectLengthWrapper(O){var lengthDesc;return isArray(O)&&(lengthDesc=Object.getOwnPropertyDescriptor(O,'length'),typeof
lengthDesc.writable==='boolean'&&(lengthDesc.writable=false,Object.defineProperty(O,'length',lengthDesc))),existingMethod(O),O},Object.defineProperty(Object,prop,desc)})}NO_CREATE_NULL='Repaired Object.create can not support Object.create(null)';function
repair_FREEZING_BREAKS_PROTOTYPES(opt_Object){var baseObject=opt_Object||Object,baseDefProp=baseObject.defineProperties,baseErrorToString;baseObject.defineProperty(baseObject,'create',{'configurable':true,'writable':true,'value':function
repairedObjectCreate(O,Properties){var obj;if(O===null)throw new TypeError(NO_CREATE_NULL);if(O!==Object(O))throw new
TypeError('Object.create: prototype must be an object');function temporaryConstructor(){}return temporaryConstructor.prototype=O,obj=new
temporaryConstructor,Properties!==void 0&&baseDefProp(obj,Properties),obj}}),baseErrorToString=Error.prototype.toString,baseObject.defineProperty(Error.prototype,'toString',{'configurable':true,'writable':true,'value':function
repairedErrorToString(){var O=this,msg,name;if(O!==baseObject(O))throw new TypeError('Error.prototype.toString: this not an object');return name=O.name,name=name===void
0?'Error':''+name,msg=O.message,msg=msg===void 0?'':''+msg,msg=msg===void 0?'':''+msg,name===''?msg:msg===''?name:name+': '+msg}}),baseObject===Object&&(repair_FREEZING_BREAKS_PROTOTYPES_wasApplied=true)}function
repair_FREEZING_BREAKS_WEAKMAP(){global.WeakMap=undefined}function repair_ERRORS_HAVE_INVISIBLE_PROPERTIES(){var
baseGOPN=Object.getOwnPropertyNames,baseGOPD=Object.getOwnPropertyDescriptor,errorPattern=/^\[object [\w$]*Error\]$/;function
touch(name){baseGOPD(this,name)}Object.defineProperty(Object,'getOwnPropertyNames',{'writable':true,'value':function
repairedErrorInvisGOPN(object){return errorPattern.test(objToString.call(object))&&errorInstanceKnownInvisibleList.forEach(touch,object),baseGOPN(object)}})}function
repair_CANT_SAFELY_VERIFY_SYNTAX(){if(!test_SYNTAX_ERRORS_ARENT_ALWAYS_EARLY()&&!test_STRICT_EVAL_LEAKS_GLOBAL_VARS()&&!test_STRICT_EVAL_LEAKS_GLOBAL_FUNCS())ses.verifyStrictFunctionBody=verifyStrictFunctionBodyByEvalThrowing;else
if(canMitigateSrcGotchas)ses.verifyStrictFunctionBody=verifyStrictFunctionBodyByParsing}function
repair_TYPED_ARRAYS_THROW_DOMEXCEPTION(){var protos=typedArrayNames.map(function(ctorName){return global[ctorName].prototype});protos.push(global.DataView.prototype),protos.forEach(function(proto){Object.getOwnPropertyNames(proto).forEach(function(prop){var
origMethod;(/^[gs]et/.test(prop)&&(origMethod=proto[prop],proto[prop]=function exceptionAdapterWrapper(var_args){try{origMethod.apply(this,arguments)}catch(e){if(e
instanceof DOMException)throw new RangeError(e.message)}}))})})}function repair_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN(opt_global){var
targetGlobal=opt_global||global,typedArrayProtos=targetGlobal.Object.freeze(typedArrayNames.map(function(ctorName){return targetGlobal[ctorName].prototype})),isFrozen=targetGlobal.Object.isFrozen,getOwnPropertyDescriptor=targetGlobal.Object.getOwnPropertyDescriptor;Object.defineProperty(targetGlobal.Object,'getOwnPropertyDescriptor',{'configurable':true,'writable':true,'value':function
getOwnPropertyDescriptor_typedArrayPatch(object,prop){var desc=getOwnPropertyDescriptor(object,prop);return desc&&typedArrayProtos.indexOf(object)!==-1&&'value'in
desc&&ses._primordialsHaveBeenFrozen&&(desc.writable=false),desc}}),Object.defineProperty(targetGlobal.Object,'isFrozen',{'configurable':true,'writable':true,'value':function
isFrozen_typedArrayPatch(object){var v=typedArrayProtos.indexOf(object)!==-1;return isFrozen(object)||v&&ses._primordialsHaveBeenFrozen}}),targetGlobal===global&&(repair_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN_wasApplied=true)}function
repair_GLOBAL_LEAKS_FROM_ARRAY_METHODS(){var object=Array.prototype;['concat','pop','push','shift','slice','splice','unshift'].forEach(function(name){var
desc=Object.getOwnPropertyDescriptor(object,name),existingMethod=desc.value;if(Function.prototype.toString.call(existingMethod).indexOf('[native code]')===-1)return;desc.value=function
globalLeakDefenseWrapper(){return existingMethod.apply(this,arguments)},Object.defineProperty(object,name,desc)})}function
arrayMutatorProblem(destination,prop,testArgs){function test_method_IGNORES_SEALED(){var
x=[2,1];Object.seal(x);try{x[prop].apply(x,testArgs)}catch(e){}return!(x.length===2&&'0'in
x&&'1'in x&&!('2'in x))}function test_method_IGNORES_FROZEN(){var x=[2,1];Object.freeze(x);try{x[prop].apply(x,testArgs)}catch(e){}return!(x.length===2&&x[0]===2&&x[1]===1&&!('2'in
x))}function repair_method_IGNORES_SEALED(){var originalMethod=Array.prototype[prop],isSealed=Object.isSealed;Object.defineProperty(Array.prototype,prop,{'value':function
repairedArrayMutator(var_args){if(isSealed(this))throw new TypeError('Cannot mutate a sealed array.');return originalMethod.apply(this,arguments)},'configurable':true,'writable':true})}destination.push({'id':(prop+'_IGNORES_SEALED').toUpperCase(),'description':'Array.prototype.'+prop+' ignores sealing','test':test_method_IGNORES_SEALED,'repair':repair_method_IGNORES_SEALED,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=2615','https://code.google.com/p/v8/issues/detail?id=2711'],'sections':['15.2.3.8'],'tests':[]}),destination.push({'id':(prop+'_IGNORES_FROZEN').toUpperCase(),'description':'Array.prototype.'+prop+' ignores freezing','test':test_method_IGNORES_FROZEN,'repair':repair_method_IGNORES_SEALED,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2615','https://code.google.com/p/v8/issues/detail?id=2711'],'sections':['15.2.3.9'],'tests':[]})}severities=ses.severities,statuses=ses.statuses,baseProblems=[{'id':'MISSING_GETOWNPROPNAMES','description':'Missing getOwnPropertyNames','test':test_MISSING_GETOWNPROPNAMES,'repair':void
0,'preSeverity':severities.NOT_SUPPORTED,'canRepair':false,'urls':[],'sections':['15.2.3.4'],'tests':['15.2.3.4-0-1']},{'id':'PROTO_SETTER_UNGETTABLE','description':'Can\'t get Object.prototype.__proto__\'s setter','test':test_PROTO_SETTER_UNGETTABLE,'repair':void
0,'preSeverity':severities.NOT_SUPPORTED,'canRepair':false,'urls':['mailto:DSK-383293@bugs.opera.com'],'sections':[],'tests':[]}],supportedProblems=[{'id':'GLOBAL_LEAKS_FROM_GLOBAL_FUNCTION_CALLS','description':'Global object leaks from global function calls','test':test_GLOBAL_LEAKS_FROM_GLOBAL_FUNCTION_CALLS,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=64250'],'sections':['10.2.1.2','10.2.1.2.6'],'tests':['10.4.3-1-8gs']},{'id':'GLOBAL_LEAKS_FROM_ANON_FUNCTION_CALLS','description':'Global object leaks from anonymous function calls','test':test_GLOBAL_LEAKS_FROM_ANON_FUNCTION_CALLS,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':[],'sections':['10.4.3'],'tests':['S10.4.3_A1']},{'id':'GLOBAL_LEAKS_FROM_STRICT_THIS','description':'Global leaks through strict this','test':test_GLOBAL_LEAKS_FROM_STRICT_THIS,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':[],'sections':['10.4.3'],'tests':['10.4.3-1-8gs','10.4.3-1-8-s']},{'id':'GLOBAL_LEAKS_FROM_BUILTINS','description':'Global object leaks from built-in methods','test':test_GLOBAL_LEAKS_FROM_BUILTINS,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=51097','https://bugs.webkit.org/show_bug.cgi?id=58338','https://code.google.com/p/v8/issues/detail?id=1437','https://connect.microsoft.com/IE/feedback/details/685430/global-object-leaks-from-built-in-methods'],'sections':['15.2.4.4'],'tests':['S15.2.4.4_A14']},{'id':'GLOBAL_LEAKS_FROM_GLOBALLY_CALLED_BUILTINS','description':'Global object leaks from globally called built-in methods','test':test_GLOBAL_LEAKS_FROM_GLOBALLY_CALLED_BUILTINS,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':[],'sections':['10.2.1.2','10.2.1.2.6','15.2.4.4'],'tests':['S15.2.4.4_A15']},{'id':'MISSING_FREEZE_ETC','description':'Object.freeze is missing','test':test_MISSING_FREEZE_ETC,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=55736'],'sections':['15.2.3.9'],'tests':['15.2.3.9-0-1']},{'id':'FUNCTION_PROTOTYPE_DESCRIPTOR_LIES','description':'A function.prototype\'s descriptor lies','test':test_FUNCTION_PROTOTYPE_DESCRIPTOR_LIES,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1530','https://code.google.com/p/v8/issues/detail?id=1570'],'sections':['15.2.3.3','15.2.3.6','15.3.5.2'],'tests':['S15.3.3.1_A4']},{'id':'MISSING_CALLEE_DESCRIPTOR','description':'Phantom callee on strict functions','test':test_MISSING_CALLEE_DESCRIPTOR,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=55537'],'sections':['15.2.3.4'],'tests':['S15.2.3.4_A1_T1']},{'id':'STRICT_DELETE_RETURNS_FALSE','description':'Strict delete returned false rather than throwing','test':test_STRICT_DELETE_RETURNS_FALSE,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://connect.microsoft.com/IE/feedback/details/685432/strict-delete-sometimes-returns-false-rather-than-throwing'],'sections':['11.4.1'],'tests':['S11.4.1_A5']},{'id':'REGEXP_CANT_BE_NEUTERED','description':'Non-deletable RegExp statics are a global communication channel','test':test_REGEXP_CANT_BE_NEUTERED,'repair':repair_REGEXP_CANT_BE_NEUTERED,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=591846','http://wiki.ecmascript.org/doku.php?id=conventions:make_non-standard_properties_configurable','https://connect.microsoft.com/IE/feedback/details/685439/non-deletable-regexp-statics-are-a-global-communication-channel'],'sections':['11.4.1'],'tests':['S11.4.1_A5']},{'id':'REGEXP_TEST_EXEC_UNSAFE','description':'RegExp.exec leaks match globally','test':test_REGEXP_TEST_EXEC_UNSAFE,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1393','https://code.google.com/p/chromium/issues/detail?id=75740','https://bugzilla.mozilla.org/show_bug.cgi?id=635017','https://code.google.com/p/google-caja/issues/detail?id=528'],'sections':['15.10.6.2'],'tests':['S15.10.6.2_A12']},{'id':'MISSING_BIND','description':'Function.prototype.bind is missing','test':test_MISSING_BIND,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=26382','https://bugs.webkit.org/show_bug.cgi?id=42371'],'sections':['15.3.4.5'],'tests':['S15.3.4.5_A3']},{'id':'BIND_CALLS_APPLY','description':'Function.prototype.bind calls .apply rather than [[Call]]','test':test_BIND_CALLS_APPLY,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=892','https://code.google.com/p/v8/issues/detail?id=828'],'sections':['15.3.4.5.1'],'tests':['S15.3.4.5_A4']},{'id':'BIND_CANT_CURRY_NEW','description':'Function.prototype.bind does not curry construction','test':test_BIND_CANT_CURRY_NEW,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=26382#c29'],'sections':['15.3.4.5.2'],'tests':['S15.3.4.5_A5']},{'id':'MUTABLE_DATE_PROTO','description':'Date.prototype is a global communication channel','test':test_MUTABLE_DATE_PROTO,'repair':repair_MUTABLE_DATE_PROTO,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['https://code.google.com/p/google-caja/issues/detail?id=1362'],'sections':['15.9.5'],'tests':[]},{'id':'MUTABLE_WEAKMAP_PROTO','description':'WeakMap.prototype is a global communication channel','test':test_MUTABLE_WEAKMAP_PROTO,'repair':repair_MUTABLE_WEAKMAP_PROTO,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=656828'],'sections':[],'tests':[]},{'id':'NEED_TO_WRAP_FOREACH','description':'Array forEach cannot be frozen while in progress','test':test_NEED_TO_WRAP_FOREACH,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1447'],'sections':['15.4.4.18'],'tests':['S15.4.4.18_A1','S15.4.4.18_A2']},{'id':'FOREACH_COERCES_THISOBJ','description':'Array forEach converts primitive thisObj arg to object','test':test_FOREACH_COERCES_THISOBJ,'repair':repair_NEED_TO_WRAP_FOREACH,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2273','https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach'],'sections':['15.4.4.18'],'tests':[]},{'id':'NEEDS_DUMMY_SETTER','description':'Workaround undiagnosed need for dummy setter','test':test_NEEDS_DUMMY_SETTER,'repair':repair_NEEDS_DUMMY_SETTER,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':[],'sections':[],'tests':[]},{'id':'FORM_GETTERS_DISAPPEAR','description':'Getter on HTMLFormElement disappears','test':test_FORM_GETTERS_DISAPPEAR,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/chromium/issues/detail?id=94666','https://code.google.com/p/v8/issues/detail?id=1651','https://code.google.com/p/google-caja/issues/detail?id=1401'],'sections':['15.2.3.6'],'tests':['S15.2.3.6_A1']},{'id':'ACCESSORS_INHERIT_AS_OWN','description':'Accessor properties inherit as own properties','test':test_ACCESSORS_INHERIT_AS_OWN,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=637994'],'sections':['8.6.1','15.2.3.6'],'tests':['S15.2.3.6_A2']},{'id':'SORT_LEAKS_GLOBAL','description':'Array sort leaks global','test':test_SORT_LEAKS_GLOBAL,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1360'],'sections':['15.4.4.11'],'tests':['S15.4.4.11_A8']},{'id':'REPLACE_LEAKS_GLOBAL','description':'String replace leaks global','test':test_REPLACE_LEAKS_GLOBAL,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1360','https://connect.microsoft.com/IE/feedback/details/685928/bad-this-binding-for-callback-in-string-prototype-replace'],'sections':['15.5.4.11'],'tests':['S15.5.4.11_A12']},{'id':'CANT_GOPD_CALLER','description':'getOwnPropertyDescriptor on strict \"caller\" throws','test':test_CANT_GOPD_CALLER,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://connect.microsoft.com/IE/feedback/details/685436/getownpropertydescriptor-on-strict-caller-throws'],'sections':['15.2.3.3','13.2','13.2.3'],'tests':['S13.2_A6_T1']},{'id':'CANT_HASOWNPROPERTY_CALLER','description':'strict_function.hasOwnProperty(\"caller\") throws','test':test_CANT_HASOWNPROPERTY_CALLER,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=63398#c3'],'sections':['15.2.4.5','13.2','13.2.3'],'tests':['S13.2_A7_T1']},{'id':'CANT_IN_CALLER','description':'Cannot \"in\" caller on strict function','test':test_CANT_IN_CALLER,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=63398'],'sections':['11.8.7','13.2','13.2.3'],'tests':['S13.2_A8_T1']},{'id':'CANT_IN_ARGUMENTS','description':'Cannot \"in\" arguments on strict function','test':test_CANT_IN_ARGUMENTS,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=63398'],'sections':['11.8.7','13.2','13.2.3'],'tests':['S13.2_A8_T2']},{'id':'STRICT_CALLER_NOT_POISONED','description':'Strict \"caller\" not poisoned','test':test_STRICT_CALLER_NOT_POISONED,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':[],'sections':['13.2'],'tests':['S13.2.3_A1']},{'id':'STRICT_ARGUMENTS_NOT_POISONED','description':'Strict \"arguments\" not poisoned','test':test_STRICT_ARGUMENTS_NOT_POISONED,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':[],'sections':['13.2'],'tests':['S13.2.3_A1']},{'id':'BUILTIN_LEAKS_CALLER','description':'Built in functions leak \"caller\"','test':test_BUILTIN_LEAKS_CALLER,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1643','https://code.google.com/p/v8/issues/detail?id=1548','https://bugzilla.mozilla.org/show_bug.cgi?id=591846','http://wiki.ecmascript.org/doku.php?id=conventions:make_non-standard_properties_configurable'],'sections':[],'tests':['Sbp_A10_T1']},{'id':'BUILTIN_LEAKS_ARGUMENTS','description':'Built in functions leak \"arguments\"','test':test_BUILTIN_LEAKS_ARGUMENTS,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1643','https://code.google.com/p/v8/issues/detail?id=1548','https://bugzilla.mozilla.org/show_bug.cgi?id=591846','http://wiki.ecmascript.org/doku.php?id=conventions:make_non-standard_properties_configurable'],'sections':[],'tests':['Sbp_A10_T2']},{'id':'BOUND_FUNCTION_LEAKS_CALLER','description':'Bound functions leak \"caller\"','test':test_BOUND_FUNCTION_LEAKS_CALLER,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=893','https://bugs.webkit.org/show_bug.cgi?id=63398'],'sections':['15.3.4.5'],'tests':['S13.2.3_A1','S15.3.4.5_A1']},{'id':'BOUND_FUNCTION_LEAKS_ARGUMENTS','description':'Bound functions leak \"arguments\"','test':test_BOUND_FUNCTION_LEAKS_ARGUMENTS,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=893','https://bugs.webkit.org/show_bug.cgi?id=63398'],'sections':['15.3.4.5'],'tests':['S13.2.3_A1','S15.3.4.5_A2']},{'id':'DELETED_BUILTINS_IN_OWN_NAMES','description':'Deleting built-in leaves phantom behind','test':test_DELETED_BUILTINS_IN_OWN_NAMES,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=70207'],'sections':['15.2.3.4'],'tests':[]},{'id':'GETOWNPROPDESC_OF_ITS_OWN_CALLER_FAILS','description':'getOwnPropertyDescriptor on its own \"caller\" fails','test':test_GETOWNPROPDESC_OF_ITS_OWN_CALLER_FAILS,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1769'],'sections':['13.2','15.2.3.3'],'tests':[]},{'id':'JSON_PARSE_PROTO_CONFUSION','description':'JSON.parse confused by \"__proto__\"','test':test_JSON_PARSE_PROTO_CONFUSION,'repair':repair_JSON_PARSE_PROTO_CONFUSION,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=621','https://code.google.com/p/v8/issues/detail?id=1310'],'sections':['15.12.2'],'tests':['S15.12.2_A1']},{'id':'PROTO_NOT_FROZEN','description':'Prototype still mutable on non-extensible object','test':test_PROTO_NOT_FROZEN,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=65832','https://bugs.webkit.org/show_bug.cgi?id=78438'],'sections':['8.6.2'],'tests':['S8.6.2_A8']},{'id':'PROTO_REDEFINABLE','description':'Prototype still redefinable on non-extensible object','test':test_PROTO_REDEFINABLE,'repair':void
0,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=65832'],'sections':['8.6.2'],'tests':['S8.6.2_A8']},{'id':'DEFINING_READ_ONLY_PROTO_FAILS_SILENTLY','description':'Defining __proto__ on non-extensible object fails silently','test':test_DEFINING_READ_ONLY_PROTO_FAILS_SILENTLY,'repair':repair_DEFINE_PROPERTY,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2441'],'sections':['8.6.2'],'tests':[]},{'id':'STRICT_EVAL_LEAKS_GLOBAL_VARS','description':'Strict eval function leaks variable definitions','test':test_STRICT_EVAL_LEAKS_GLOBAL_VARS,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1624'],'sections':['10.4.2.1'],'tests':['S10.4.2.1_A1']},{'id':'STRICT_EVAL_LEAKS_GLOBAL_FUNCS','description':'Strict eval function leaks function definitions','test':test_STRICT_EVAL_LEAKS_GLOBAL_FUNCS,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1624'],'sections':['10.4.2.1'],'tests':['S10.4.2.1_A1']},{'id':'EVAL_BREAKS_MASKING','description':'Eval breaks masking of named functions in non-strict code','test':test_EVAL_BREAKS_MASKING,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=2396'],'sections':['10.2'],'tests':[]},{'id':'PARSEINT_STILL_PARSING_OCTAL','description':'parseInt still parsing octal','test':test_PARSEINT_STILL_PARSING_OCTAL,'repair':repair_PARSEINT_STILL_PARSING_OCTAL,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=1645'],'sections':['15.1.2.2'],'tests':['S15.1.2.2_A5.1_T1']},{'id':'STRICT_E4X_LITERALS_ALLOWED','description':'E4X literals allowed in strict code','test':test_STRICT_E4X_LITERALS_ALLOWED,'repair':void
0,'preSeverity':severities.NOT_ISOLATED,'canRepair':false,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=695577','https://bugzilla.mozilla.org/show_bug.cgi?id=695579'],'sections':[],'tests':[]},{'id':'ASSIGN_CAN_OVERRIDE_FROZEN','description':'Assignment can override frozen inherited property','test':test_ASSIGN_CAN_OVERRIDE_FROZEN,'repair':repair_ASSIGN_CAN_OVERRIDE_FROZEN,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1169','https://code.google.com/p/v8/issues/detail?id=1475','https://mail.mozilla.org/pipermail/es-discuss/2011-November/017997.html','http://wiki.ecmascript.org/doku.php?id=strawman:fixing_override_mistake'],'sections':['8.12.4'],'tests':['15.2.3.6-4-405']},{'id':'INCREMENT_IGNORES_FROZEN','description':'Increment operators can mutate frozen properties','test':test_INCREMENT_IGNORES_FROZEN,'repair':void
0,'preSeverity':canMitigateSrcGotchas?severities.SAFE_SPEC_VIOLATION:severities.NOT_OCAP_SAFE,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=2779'],'sections':['11.4.4','8.12.4'],'tests':[]},{'id':'POP_IGNORES_FROZEN','description':'Array.prototype.pop ignores frozeness','test':test_POP_IGNORES_FROZEN,'repair':repair_POP_IGNORES_FROZEN,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://bugs.webkit.org/show_bug.cgi?id=75788'],'sections':['15.4.4.6'],'tests':[]},{'id':'SORT_IGNORES_FROZEN','description':'Array.prototype.sort ignores frozeness','test':test_SORT_IGNORES_FROZEN,'repair':repair_SORT_IGNORES_FROZEN,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2419'],'sections':['15.4.4.11'],'tests':[]},{'id':'PUSH_IGNORES_SEALED','description':'Array.prototype.push ignores sealing','test':test_PUSH_IGNORES_SEALED,'repair':repair_ARRAY_LENGTH_MUTABLE,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2412'],'sections':['15.4.4.11'],'tests':[]},{'id':'PUSH_DOES_NOT_THROW_ON_FROZEN_ARRAY','description':'Array.prototype.push does not throw on a frozen array','test':test_PUSH_DOES_NOT_THROW_ON_FROZEN_ARRAY,'repair':repair_PUSH_IGNORES_SEALED,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2711'],'sections':['15.2.3.9'],'tests':[]},{'id':'PUSH_IGNORES_FROZEN','description':'Array.prototype.push ignores frozen','test':test_PUSH_IGNORES_FROZEN,'repair':repair_ARRAY_LENGTH_MUTABLE,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2711'],'sections':['15.2.3.9'],'tests':[]},{'id':'ARRAYS_DELETE_NONCONFIGURABLE','description':'Setting [].length can delete non-configurable elements','test':test_ARRAYS_DELETE_NONCONFIGURABLE,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=590690'],'sections':['15.4.5.2'],'tests':[]},{'id':'ARRAY_LENGTH_MUTABLE','description':'Freezing an array does not make .length immutable','test':test_ARRAY_LENGTH_MUTABLE,'repair':repair_ARRAY_LENGTH_MUTABLE,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2711'],'sections':['15.4.5.1'],'tests':[]},{'id':'ARRAYS_MODIFY_READONLY','description':'Extending an array can modify read-only array length','test':test_ARRAYS_MODIFY_READONLY,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=2379'],'sections':['15.4.5.1.3.f'],'tests':[]},{'id':'CANT_REDEFINE_NAN_TO_ITSELF','description':'Cannot redefine global NaN to itself','test':test_CANT_REDEFINE_NAN_TO_ITSELF,'repair':repair_CANT_REDEFINE_NAN_TO_ITSELF,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':[],'sections':['8.12.9','15.1.1.1'],'tests':[]},{'id':'FREEZE_IS_FRAME_DEPENDENT','description':'Object.freeze falsely succeeds on other-frame objects','test':test_FREEZE_IS_FRAME_DEPENDENT,'repair':repair_FREEZE_IS_FRAME_DEPENDENT,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=784892','https://bugzilla.mozilla.org/show_bug.cgi?id=674195','https://bugzilla.mozilla.org/show_bug.cgi?id=789897'],'sections':[],'tests':[]},{'id':'UNEXPECTED_ERROR_PROPERTIES','description':'Error instances have unexpected properties','test':test_UNEXPECTED_ERROR_PROPERTIES,'repair':void
0,'preSeverity':severities.NEW_SYMPTOM,'canRepair':false,'urls':[],'sections':[],'tests':[]},{'id':'ERRORS_HAVE_INVISIBLE_PROPERTIES','description':'Error instances have invisible properties','test':test_ERRORS_HAVE_INVISIBLE_PROPERTIES,'repair':repair_ERRORS_HAVE_INVISIBLE_PROPERTIES,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=726477','https://bugzilla.mozilla.org/show_bug.cgi?id=724768'],'sections':[],'tests':[]},{'id':'STRICT_GETTER_BOXES','description':'Strict getter must not box this, but does','test':test_STRICT_GETTER_BOXES,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.ecmascript.org/show_bug.cgi?id=284','https://bugs.webkit.org/show_bug.cgi?id=79843','https://connect.microsoft.com/ie/feedback/details/727027','https://bugzilla.mozilla.org/show_bug.cgi?id=603201','https://bugzilla.mozilla.org/show_bug.cgi?id=732669'],'sections':['10.4.3'],'tests':['10.4.3-1-59-s']},{'id':'NON_STRICT_GETTER_DOESNT_BOX','description':'Non-strict getter must box this, but does not','test':test_NON_STRICT_GETTER_DOESNT_BOX,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.ecmascript.org/show_bug.cgi?id=284','https://code.google.com/p/v8/issues/detail?id=1977','https://bugzilla.mozilla.org/show_bug.cgi?id=732669'],'sections':['10.4.3'],'tests':['10.4.3-1-59-s']},{'id':'NONCONFIGURABLE_OWN_PROTO','description':'All objects have non-configurable __proto__','test':test_NONCONFIGURABLE_OWN_PROTO,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=1310','https://mail.mozilla.org/pipermail/es-discuss/2013-March/029177.html'],'sections':[],'tests':[]},{'id':'FREEZING_BREAKS_PROTOTYPES','description':'Freezing Object.prototype breaks prototype setting','test':test_FREEZING_BREAKS_PROTOTYPES,'repair':repair_FREEZING_BREAKS_PROTOTYPES,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2565'],'sections':['15.2.3.5'],'tests':[]},{'id':'FREEZING_BREAKS_WEAKMAP','description':'Freezing Object.prototype breaks WeakMap','test':test_FREEZING_BREAKS_WEAKMAP,'repair':repair_FREEZING_BREAKS_WEAKMAP,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://code.google.com/p/v8/issues/detail?id=2829'],'sections':[],'tests':[]},{'id':'THROWTYPEERROR_UNFROZEN','description':'[[ThrowTypeError]] is not frozen','test':test_THROWTYPEERROR_UNFROZEN,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://bugs.webkit.org/show_bug.cgi?id=108873'],'sections':['13.2.3'],'tests':[]},{'id':'THROWTYPEERROR_PROPERTIES','description':'[[ThrowTypeError]] has normal function properties','test':test_THROWTYPEERROR_PROPERTIES,'repair':void
0,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':false,'urls':[],'sections':['13.2.3'],'tests':[]},{'id':'SYNTAX_ERRORS_ARENT_ALWAYS_EARLY','description':'SyntaxErrors aren\'t always early','test':test_SYNTAX_ERRORS_ARENT_ALWAYS_EARLY,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://code.google.com/p/v8/issues/detail?id=2728','https://code.google.com/p/google-caja/issues/detail?id=1616'],'sections':[],'tests':[]},{'id':'CANT_SAFELY_VERIFY_SYNTAX','description':'Function constructor does not verify syntax','test':test_CANT_SAFELY_VERIFY_SYNTAX,'repair':repair_CANT_SAFELY_VERIFY_SYNTAX,'preSeverity':severities.NOT_ISOLATED,'canRepair':true,'urls':['https://code.google.com/p/google-caja/issues/detail?id=1616','https://code.google.com/p/v8/issues/detail?id=2470','https://bugs.webkit.org/show_bug.cgi?id=106160'],'sections':['15.3.2.1'],'tests':[]},{'id':'TYPED_ARRAYS_THROW_DOMEXCEPTION','description':'Typed Array operations throw DOMException','test':test_TYPED_ARRAYS_THROW_DOMEXCEPTION,'repair':repair_TYPED_ARRAYS_THROW_DOMEXCEPTION,'preSeverity':severities.NOT_OCAP_SAFE,'canRepair':true,'urls':[],'sections':['13.2.3'],'tests':[]},{'id':'TYPED_ARRAY_PROTOS_LOOK_UNFROZEN','description':'Typed Array prototypes look unfrozen','test':test_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN,'repair':repair_TYPED_ARRAY_PROTOS_LOOK_UNFROZEN,'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':[],'sections':['15.2.3.9','15.2.3.12'],'tests':[]},{'id':'NESTED_STRICT_FUNCTIONS_LEAK','description':'Strict nested functions leak from block scope','test':test_NESTED_STRICT_FUNCTIONS_LEAK,'repair':void
0,'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':false,'urls':['https://connect.microsoft.com/IE/feedback/details/811124/ie11-javascript-function-scoping-is-weird-with-respect-to-functions-and-try-catch','http://wiki.ecmascript.org/doku.php?id=conventions:recommendations_for_implementors'],'sections':[],'tests':[]}],arrayMutatorProblem(supportedProblems,'unshift',['foo']),arrayMutatorProblem(supportedProblems,'splice',[0,0,'foo']),arrayMutatorProblem(supportedProblems,'shift',[]),supportedProblems.push({'id':'GLOBAL_LEAKS_FROM_ARRAY_METHODS','description':'Array methods as functions operate on global object','test':test_GLOBAL_LEAKS_FROM_ARRAY_METHODS,'repair':repair_GLOBAL_LEAKS_FROM_ARRAY_METHODS,'preSeverity':severities.NOT_ISOLATED,'canRepair':true,'urls':['https://code.google.com/p/google-caja/issues/detail?id=1789','https://code.google.com/p/v8/issues/detail?id=2758'],'sections':['15.4.4'],'tests':[]}),ses._repairer.addPostTestKludge(function
extraRepair(){Object.isFrozen&&Object.isFrozen(Array.prototype.forEach)&&repair_NEED_TO_WRAP_FOREACH()});try{strictForEachFn(baseProblems,ses._repairer.registerProblem),ses._repairer.testAndRepair(),ses._repairer.okToLoad()&&(strictForEachFn(supportedProblems,ses._repairer.registerProblem),ses._repairer.testAndRepair()),reports=ses._repairer.getReports();try{indexedReports=Object.create(null)}catch(e){indexedReports={}}reports.forEach(function(report){indexedReports[report.id]=report}),ses.es5ProblemReports=indexedReports}catch(err){ses._repairer.updateMaxSeverity(ses.severities.NOT_SUPPORTED),during=ses._repairer.wasDoing(),logger.error('ES5 Repair '+during+'failed with: ',err)}logger.reportMax()})(this),(function
WeakMapModule(){'use strict';var calledAsFunctionWarningDone,hiddenNameInstalled,repairer,severities;if(typeof
ses!=='undefined'&&ses.okToLoad&&!ses.okToLoad())return;function constFunc(func){return func.prototype=null,Object.freeze(func)}calledAsFunctionWarningDone=false;function
calledAsFunctionWarning(){!calledAsFunctionWarningDone&&typeof console!=='undefined'&&(calledAsFunctionWarningDone=true,console.warn('WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future.'))}hiddenNameInstalled=false;function
weakMapPermitHostObjects(map){map.permitHostObjects___&&map.permitHostObjects___(weakMapPermitHostObjects)}typeof
ses!=='undefined'&&(ses.weakMapPermitHostObjects=weakMapPermitHostObjects),repairer=ses._repairer||new
ses._Repairer,severities=ses.severities,repairer.registerProblem({'id':'WEAKMAP_DOES_NOT_EXIST','description':'WeakMap does not exist','test':function(){return typeof
WeakMap!=='function'},'repair':function(){WeakMap=implementWeakMap(),typeof Proxy!=='undefined'&&(Proxy=undefined)},'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':[],'sections':[],'tests':[]}),repairer.registerProblem({'id':'WEAKMAP_REJECTS_SOME_KEYS','description':'WeakMap throws when given some keys','test':function(){return typeof
WeakMap==='undefined'?false:WeakMap.name==='DoubleWeakMap'?false:typeof navigator!=='undefined'&&/Firefox/.test(navigator.userAgent)},'repair':function(){WeakMap=wrapWeakMap(WeakMap,false)},'preSeverity':severities.SAFE_SPEC_VIOLATION,'canRepair':true,'urls':['https://bugzilla.mozilla.org/show_bug.cgi?id=803844'],'sections':[],'tests':[]}),repairer.registerProblem({'id':'WEAKMAP_DROPS_FROZEN_KEYS','description':'WeakMap drops frozen keys','test':function(){var
result,testMap,testObject;return typeof WeakMap==='undefined'?false:(testMap=new
WeakMap,testObject=Object.freeze({}),testMap.set(testObject,1),result=testMap.get(testObject),result===1?false:result===undefined?true:'Unexpected get() result: '+result)},'repair':function(){WeakMap=wrapWeakMap(WeakMap,true),typeof
Proxy!=='undefined'&&(Proxy=undefined)},'preSeverity':severities.UNSAFE_SPEC_VIOLATION,'canRepair':true,'urls':[],'sections':[],'tests':[]}),repairer.testAndRepair();function
implementWeakMap(){var HIDDEN_NAME,HIDDEN_NAME_PREFIX,OurWeakMap,ab,calledAsFunctionWarningDone,defProp,gopn,hop,isExtensible,nextId,originalGetPropertyNames,u8s;if(hiddenNameInstalled)throw new
Error('shouldn\'t happen: implementWeakMap called twice');hiddenNameInstalled=true,hop=Object.prototype.hasOwnProperty,gopn=Object.getOwnPropertyNames,defProp=Object.defineProperty,isExtensible=Object.isExtensible,HIDDEN_NAME_PREFIX='weakmap:',HIDDEN_NAME=HIDDEN_NAME_PREFIX+'ident:'+Math.random()+'___',typeof
crypto!=='undefined'&&typeof crypto.getRandomValues==='function'&&typeof ArrayBuffer==='function'&&typeof
Uint8Array==='function'&&(ab=new ArrayBuffer(25),u8s=new Uint8Array(ab),crypto.getRandomValues(u8s),HIDDEN_NAME=HIDDEN_NAME_PREFIX+'rand:'+Array.prototype.map.call(u8s,function(u8){return(u8%36).toString(36)}).join('')+'___');function
isNotHiddenName(name){return!(name.substr(0,HIDDEN_NAME_PREFIX.length)==HIDDEN_NAME_PREFIX&&name.substr(name.length-3)==='___')}defProp(Object,'getOwnPropertyNames',{'value':function
fakeGetOwnPropertyNames(obj){return gopn(obj).filter(isNotHiddenName)}}),'getPropertyNames'in
Object&&(originalGetPropertyNames=Object.getPropertyNames,defProp(Object,'getPropertyNames',{'value':function
fakeGetPropertyNames(obj){return originalGetPropertyNames(obj).filter(isNotHiddenName)}}));function
getHiddenRecord(key){var hiddenRecord;if(key!==Object(key))throw new TypeError(('Not an object: '+key));return hiddenRecord=key[HIDDEN_NAME],hiddenRecord&&hiddenRecord.key===key?hiddenRecord:isExtensible(key)?(hiddenRecord={'key':key},defProp(key,HIDDEN_NAME,{'value':hiddenRecord,'writable':false,'enumerable':false,'configurable':false}),hiddenRecord):void
0}(function(){var oldFreeze=Object.freeze,oldPreventExtensions,oldSeal;defProp(Object,'freeze',{'value':function
identifyingFreeze(obj){return getHiddenRecord(obj),oldFreeze(obj)}}),oldSeal=Object.seal,defProp(Object,'seal',{'value':function
identifyingSeal(obj){return getHiddenRecord(obj),oldSeal(obj)}}),oldPreventExtensions=Object.preventExtensions,defProp(Object,'preventExtensions',{'value':function
identifyingPreventExtensions(obj){return getHiddenRecord(obj),oldPreventExtensions(obj)}})})();function
constFunc(func){return func.prototype=null,Object.freeze(func)}calledAsFunctionWarningDone=false;function
calledAsFunctionWarning(){!calledAsFunctionWarningDone&&typeof console!=='undefined'&&(calledAsFunctionWarningDone=true,console.warn('WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future.'))}return nextId=0,OurWeakMap=function(){var
id,keys,values;this instanceof OurWeakMap||calledAsFunctionWarning(),keys=[],values=[],id=nextId++;function
get___(key,opt_default){var hiddenRecord=getHiddenRecord(key),index;return hiddenRecord?id
in hiddenRecord?hiddenRecord[id]:opt_default:(index=keys.indexOf(key),index>=0?values[index]:opt_default)}function
has___(key){var hiddenRecord=getHiddenRecord(key);return hiddenRecord?id in hiddenRecord:keys.indexOf(key)>=0}function
set___(key,value){var hiddenRecord=getHiddenRecord(key),index;return hiddenRecord?(hiddenRecord[id]=value):(index=keys.indexOf(key),index>=0?(values[index]=value):(index=keys.length,values[index]=value,keys[index]=key)),this}function
delete___(key){var hiddenRecord=getHiddenRecord(key),index,lastIndex;return hiddenRecord?id
in hiddenRecord&&delete hiddenRecord[id]:(index=keys.indexOf(key),index<0?false:(lastIndex=keys.length-1,keys[index]=void
0,values[index]=values[lastIndex],keys[index]=keys[lastIndex],keys.length=lastIndex,values.length=lastIndex,true))}return Object.create(OurWeakMap.prototype,{'get___':{'value':constFunc(get___)},'has___':{'value':constFunc(has___)},'set___':{'value':constFunc(set___)},'delete___':{'value':constFunc(delete___)}})},OurWeakMap.prototype=Object.create(Object.prototype,{'get':{'value':function
get(key,opt_default){return this.get___(key,opt_default)},'writable':true,'configurable':true},'has':{'value':function
has(key){return this.has___(key)},'writable':true,'configurable':true},'set':{'value':function
set(key,value){return this.set___(key,value)},'writable':true,'configurable':true},'delete':{'value':function
remove(key){return this.delete___(key)},'writable':true,'configurable':true}}),OurWeakMap}function
wrapWeakMap(HostWeakMap,doubleWeakMapCheckSilentFailure){var OurWeakMap=implementWeakMap();function
DoubleWeakMap(){var dset,enableSwitching,hmap,omap;this instanceof OurWeakMap||calledAsFunctionWarning(),hmap=new
HostWeakMap,omap=undefined,enableSwitching=false;function dget(key,opt_default){return omap?hmap.has(key)?hmap.get(key):omap.get___(key,opt_default):hmap.get(key,opt_default)}function
dhas(key){return hmap.has(key)||(omap?omap.has___(key):false)}dset=doubleWeakMapCheckSilentFailure?function(key,value){return hmap.set(key,value),hmap.has(key)||(omap||(omap=new
OurWeakMap),omap.set(key,value)),this}:function(key,value){if(enableSwitching)try{hmap.set(key,value)}catch(e){omap||(omap=new
OurWeakMap),omap.set___(key,value)}else hmap.set(key,value);return this};function
ddelete(key){var result=!!hmap['delete'](key);return omap?omap.delete___(key)||result:result}return Object.create(OurWeakMap.prototype,{'get___':{'value':constFunc(dget)},'has___':{'value':constFunc(dhas)},'set___':{'value':constFunc(dset)},'delete___':{'value':constFunc(ddelete)},'permitHostObjects___':{'value':constFunc(function(token){if(token===weakMapPermitHostObjects)enableSwitching=true;else
throw new Error('bogus call to permitHostObjects___')})}})}return DoubleWeakMap.prototype=OurWeakMap.prototype,Object.defineProperty(DoubleWeakMap.prototype,'constructor',{'value':DoubleWeakMap,'enumerable':false,'configurable':true,'writable':true}),DoubleWeakMap}})(),(function
debugModule(global){'use strict';var UnsafeError;if(typeof ses!=='undefined'&&ses.okToLoad&&!ses.okToLoad())return;UnsafeError=Error,ses.UnsafeError=Error;function
FakeError(message){return UnsafeError(message)}FakeError.prototype=UnsafeError.prototype,FakeError.prototype.constructor=FakeError,Error=FakeError,ses.getCWStack=function
uselessGetCWStack(err){return};if('captureStackTrace'in UnsafeError)(function(){var
ssts,unsafeCaptureStackTrace;UnsafeError.prepareStackTrace=function(err,sst){return ssts===void
0?ses.logger.error('Error while initializing debug module',err):ssts.set(err,sst),void
0},unsafeCaptureStackTrace=UnsafeError.captureStackTrace,UnsafeError.captureStackTrace=function(obj,opt_MyError){var
wasFrozen=Object.isFrozen(obj),stackDesc=Object.getOwnPropertyDescriptor(obj,'stack'),ignore,result;try{return result=unsafeCaptureStackTrace(obj,opt_MyError),ignore=obj.stack,result}finally{wasFrozen&&!Object.isFrozen(obj)&&(stackDesc?Object.defineProperty(obj,'stack',stackDesc):delete
obj.stack,Object.freeze(obj))}},ssts=new WeakMap;function getCWStack(err){var sst=ssts.get(err),ignore;return sst===void
0&&err instanceof Error&&(ignore=err.stack,sst=ssts.get(err)),sst===void 0?void 0:{'calls':sst.map(function(frame){return{'name':''+(frame.getFunctionName()||frame.getMethodName()||'?'),'source':''+(frame.getFileName()||'?'),'span':[[frame.getLineNumber(),frame.getColumnNumber()]]}})}}ses.getCWStack=getCWStack})();else
if(global.opera);else if((new Error).stack)(function(){var FFFramePattern=/^([^@]*)@(.*?):?(\d*)$/;function
getCWStack(err){var stack=err.stack,frames,lines;return stack?(lines=stack.split('\n'),frames=lines.map(function(line){var
match=FFFramePattern.exec(line);return match?{'name':match[1].trim()||'?','source':match[2].trim()||'?','span':[[+match[3]]]}:{'name':line.trim()||'?','source':'?','span':[]}}),{'calls':frames}):void
0}ses.getCWStack=getCWStack})();function stackString(cwStack){var calls,result;return cwStack?(calls=cwStack.calls,result=calls.map(function(call){var
spanString=call.span.map(function(subSpan){return subSpan.join(':')}).join('::');return spanString&&(spanString=':'+spanString),'  at '+call.name+' ('+call.source+spanString+')'}),result.join('\n')):void
0}ses.stackString=stackString;function getStack(err){var cwStack,result;return err!==Object(err)?void
0:(cwStack=ses.getCWStack(err),cwStack?(result=ses.stackString(cwStack),err instanceof
Error&&(result=err+'\n'+result),result):void 0)}ses.getStack=getStack})(this),(function(){'use strict';var
create,createNull,freeze;create=Object.create,freeze=Object.freeze;function constFunc(func){return func.prototype=null,freeze(func)}function
assertString(x){if('string'!==typeof x)throw new TypeError(('Not a string: '+x));return x}typeof
ses==='undefined'||!ses.ok()||ses.es5ProblemReports.FREEZING_BREAKS_PROTOTYPES.beforeFailure?(createNull=function(){return{}}):(createNull=function(){return Object.create(null)}),StringMap=function
StringMap(){var objAsMap=createNull();return freeze({'get':constFunc(function(key){return objAsMap[assertString(key)+'$']}),'set':constFunc(function(key,value){objAsMap[assertString(key)+'$']=value}),'has':constFunc(function(key){return assertString(key)+'$'in
objAsMap}),'delete':constFunc(function(key){return delete objAsMap[assertString(key)+'$']})})}})(),(function
whitelistModule(){'use strict';var TypedArrayWhitelist,t;ses||(ses={}),t=true,ses.whitelist={'cajaVM':{'[[ThrowTypeError]]':t,'log':t,'tamperProof':t,'constFunc':t,'Nat':t,'def':t,'is':t,'compileExpr':t,'confine':t,'compileModule':t,'compileProgram':t,'eval':t,'Function':t,'sharedImports':t,'makeImports':t,'copyToImports':t,'GuardT':{'coerce':t},'makeTableGuard':t,'Trademark':{'stamp':t},'guard':t,'passesGuard':t,'stamp':t,'makeSealerUnsealerPair':t,'makeArrayLike':{'canBeFullyLive':t}},'WeakMap':{'prototype':{'get':t,'set':t,'has':t,'delete':t}},'StringMap':{'prototype':{}},'escape':t,'unescape':t,'Object':{'getPropertyDescriptor':t,'getPropertyNames':t,'is':t,'prototype':{'__defineGetter__':t,'__defineSetter__':t,'__lookupGetter__':t,'__lookupSetter__':t,'constructor':'*','toString':'*','toLocaleString':'*','valueOf':t,'hasOwnProperty':t,'isPrototypeOf':t,'propertyIsEnumerable':t},'getPrototypeOf':t,'getOwnPropertyDescriptor':t,'getOwnPropertyNames':t,'create':t,'defineProperty':t,'defineProperties':t,'seal':t,'freeze':t,'preventExtensions':t,'isSealed':t,'isFrozen':t,'isExtensible':t,'keys':t},'NaN':t,'Infinity':t,'undefined':t,'parseInt':t,'parseFloat':t,'isNaN':t,'isFinite':t,'decodeURI':t,'decodeURIComponent':t,'encodeURI':t,'encodeURIComponent':t,'Function':{'prototype':{'apply':t,'call':t,'bind':t,'prototype':'*','length':'*','arity':'*','name':'*'}},'Array':{'prototype':{'concat':t,'join':t,'pop':t,'push':t,'reverse':t,'shift':t,'slice':t,'sort':t,'splice':t,'unshift':t,'indexOf':t,'lastIndexOf':t,'every':t,'some':t,'forEach':t,'map':t,'filter':t,'reduce':t,'reduceRight':t,'length':t},'isArray':t},'String':{'prototype':{'substr':t,'anchor':t,'big':t,'blink':t,'bold':t,'fixed':t,'fontcolor':t,'fontsize':t,'italics':t,'link':t,'small':t,'strike':t,'sub':t,'sup':t,'trimLeft':t,'trimRight':t,'valueOf':t,'charAt':t,'charCodeAt':t,'concat':t,'indexOf':t,'lastIndexOf':t,'localeCompare':t,'match':t,'replace':t,'search':t,'slice':t,'split':t,'substring':t,'toLowerCase':t,'toLocaleLowerCase':t,'toUpperCase':t,'toLocaleUpperCase':t,'trim':t,'length':'*'},'fromCharCode':t},'Boolean':{'prototype':{'valueOf':t}},'Number':{'prototype':{'valueOf':t,'toFixed':t,'toExponential':t,'toPrecision':t},'MAX_VALUE':t,'MIN_VALUE':t,'NaN':t,'NEGATIVE_INFINITY':t,'POSITIVE_INFINITY':t},'Math':{'E':t,'LN10':t,'LN2':t,'LOG2E':t,'LOG10E':t,'PI':t,'SQRT1_2':t,'SQRT2':t,'abs':t,'acos':t,'asin':t,'atan':t,'atan2':t,'ceil':t,'cos':t,'exp':t,'floor':t,'log':t,'max':t,'min':t,'pow':t,'random':t,'round':t,'sin':t,'sqrt':t,'tan':t},'Date':{'prototype':{'getYear':t,'setYear':t,'toGMTString':t,'toDateString':t,'toTimeString':t,'toLocaleString':t,'toLocaleDateString':t,'toLocaleTimeString':t,'valueOf':t,'getTime':t,'getFullYear':t,'getUTCFullYear':t,'getMonth':t,'getUTCMonth':t,'getDate':t,'getUTCDate':t,'getDay':t,'getUTCDay':t,'getHours':t,'getUTCHours':t,'getMinutes':t,'getUTCMinutes':t,'getSeconds':t,'getUTCSeconds':t,'getMilliseconds':t,'getUTCMilliseconds':t,'getTimezoneOffset':t,'setTime':t,'setFullYear':t,'setUTCFullYear':t,'setMonth':t,'setUTCMonth':t,'setDate':t,'setUTCDate':t,'setHours':t,'setUTCHours':t,'setMinutes':t,'setUTCMinutes':t,'setSeconds':t,'setUTCSeconds':t,'setMilliseconds':t,'setUTCMilliseconds':t,'toUTCString':t,'toISOString':t,'toJSON':t},'parse':t,'UTC':t,'now':t},'RegExp':{'prototype':{'exec':t,'test':t,'source':'*','global':'*','ignoreCase':'*','multiline':'*','lastIndex':'*','options':'*','sticky':'*'}},'Error':{'prototype':{'name':'*','message':'*'}},'EvalError':{'prototype':t},'RangeError':{'prototype':t},'ReferenceError':{'prototype':t},'SyntaxError':{'prototype':t},'TypeError':{'prototype':t},'URIError':{'prototype':t},'JSON':{'parse':t,'stringify':t},'ArrayBuffer':{'length':t,'name':t,'isView':t,'prototype':{'byteLength':'maybeAccessor','slice':t}},'Int8Array':TypedArrayWhitelist={'length':t,'name':t,'BYTES_PER_ELEMENT':t,'prototype':{'buffer':'maybeAccessor','byteOffset':'maybeAccessor','byteLength':'maybeAccessor','length':'maybeAccessor','BYTES_PER_ELEMENT':t,'set':t,'subarray':t}},'Uint8Array':TypedArrayWhitelist,'Uint8ClampedArray':TypedArrayWhitelist,'Int16Array':TypedArrayWhitelist,'Uint16Array':TypedArrayWhitelist,'Int32Array':TypedArrayWhitelist,'Uint32Array':TypedArrayWhitelist,'Float32Array':TypedArrayWhitelist,'Float64Array':TypedArrayWhitelist,'DataView':{'length':t,'name':t,'prototype':{'buffer':'maybeAccessor','byteOffset':'maybeAccessor','byteLength':'maybeAccessor','getInt8':t,'getUint8':t,'getInt16':t,'getUint16':t,'getInt32':t,'getUint32':t,'getFloat32':t,'getFloat64':t,'setInt8':t,'setUint8':t,'setInt16':t,'setUint16':t,'setInt32':t,'setUint32':t,'setFloat32':t,'setFloat64':t}}}})(),(function
atLeastFreeVarNamesModule(){'use strict';var OTHER_WHITESPACE;ses||(ses={}),OTHER_WHITESPACE=new
RegExp('[\\uFEFF\\u1680\\u180E\\u2000-\\u2009\\u200a\\u2028\\u2029\\u200f\\u205F\\u3000]'),ses.limitSrcCharset=function(programSrc){return OTHER_WHITESPACE.test(programSrc)?{'error':'Disallowing unusual unicode whitespace characters'}:(programSrc=programSrc.replace(/([\u0080-\u009f\u00a1-\uffff])/g,function(_,u){return'\\u'+('0000'+u.charCodeAt(0).toString(16)).slice(-4)}),{'programSrc':programSrc})};function
SHOULD_MATCH_IDENTIFIER(){return/(\w|\\u\d{4}|\$)+/g}ses.DISABLE_SECURITY_FOR_DEBUGGER=false,ses.atLeastFreeVarNames=function
atLeastFreeVarNames(programSrc){var a,found,limited,name,regexp,result;programSrc=''+programSrc,limited=ses.limitSrcCharset(programSrc);if(!('programSrc'in
limited))throw new EvalError(limited.error);programSrc=limited.programSrc,regexp=SHOULD_MATCH_IDENTIFIER(),result=[],found=StringMap(),ses.DISABLE_SECURITY_FOR_DEBUGGER&&found.set('eval',true);while(a=regexp.exec(programSrc))name=a[0],found.has(name)||(result.push(name),found.set(name,true));return result}})(),ses.startSES=function(global,whitelist,limitSrcCharset,atLeastFreeVarNames,extensions){'use strict';var
EMULATE_LEGACY_GETTERS_SETTERS,INCREMENT_IGNORES_FROZEN,MAX_NAT,NONCONFIGURABLE_OWN_PROTO,TAME_GLOBAL_EVAL,cleaning,create,defProp,dirty,freeze,getProto,gopd,gopn,hop,keys,propertyReports,result,rootReports,sharedImports,tamperProof,whiteTable,whitelistSymbols;TAME_GLOBAL_EVAL=false,EMULATE_LEGACY_GETTERS_SETTERS=true,NONCONFIGURABLE_OWN_PROTO=ses.es5ProblemReports.NONCONFIGURABLE_OWN_PROTO.afterFailure,INCREMENT_IGNORES_FROZEN=ses.es5ProblemReports.INCREMENT_IGNORES_FROZEN.afterFailure,dirty=true,hop=Object.prototype.hasOwnProperty,getProto=Object.getPrototypeOf,defProp=Object.defineProperty,gopd=Object.getOwnPropertyDescriptor,gopn=Object.getOwnPropertyNames,keys=Object.keys,freeze=Object.freeze,create=Object.create;function
createNullIfPossible(){try{return create(null)}catch(e){return{}}}function resolveOptions(opt_mitigateOpts){var
options;typeof opt_mitigateOpts==='string'&&(opt_mitigateOpts={'sourceUrl':opt_mitigateOpts});function
resolve(opt,defaultOption){return opt_mitigateOpts&&opt in opt_mitigateOpts?opt_mitigateOpts[opt]:defaultOption}return options={},opt_mitigateOpts===undefined||opt_mitigateOpts===null?(options.maskReferenceError=true,options.parseFunctionBody=true,options.sourceUrl=void
0,options.rewriteTopLevelVars=true,options.rewriteTopLevelFuncs=true,options.rewriteFunctionCalls=true,options.rewriteTypeOf=false,options.forceParseAndRender=false):(options.maskReferenceError=resolve('maskReferenceError',true),options.parseFunctionBody=resolve('parseFunctionBody',false),options.sourceUrl=resolve('sourceUrl',void
0),options.rewriteTopLevelVars=resolve('rewriteTopLevelVars',true),options.rewriteTopLevelFuncs=resolve('rewriteTopLevelFuncs',true),options.rewriteFunctionCalls=resolve('rewriteFunctionCalls',true),options.rewriteTypeOf=resolve('rewriteTypeOf',!options.maskReferenceError),options.forceParseAndRender=resolve('forceParseAndRender',false)),options}ses.resolveOptions=resolveOptions;function
mitigateSrcGotchas(funcBodySrc,options){var safeError;if('function'===typeof ses.mitigateSrcGotchas){INCREMENT_IGNORES_FROZEN&&(options.rewritePropertyUpdateExpr=true,options.rewritePropertyCompoundAssignmentExpr=true);try{return ses.mitigateSrcGotchas(funcBodySrc,options,ses.logger)}catch(error){try{safeError=new
Error(error.message)}catch(metaerror){throw new Error('Could not safely obtain error from mitigateSrcGotchas')}throw safeError}}else
return''+funcBodySrc}function constFunc(func){return func.prototype=null,freeze(func)}function
getThrowTypeError(){return gopd(getThrowTypeError,'arguments').get}function fail(str){debugger;throw new
EvalError(str)}typeof WeakMap==='undefined'&&fail('No built-in WeakMaps, so WeakMap.js must be loaded first'),EMULATE_LEGACY_GETTERS_SETTERS?(function(){function
legacyDefineGetter(sprop,getter){sprop=''+sprop,hop.call(this,sprop)?defProp(this,sprop,{'get':getter}):defProp(this,sprop,{'get':getter,'set':undefined,'enumerable':true,'configurable':true})}legacyDefineGetter.prototype=null,defProp(Object.prototype,'__defineGetter__',{'value':legacyDefineGetter,'writable':false,'enumerable':false,'configurable':false});function
legacyDefineSetter(sprop,setter){sprop=''+sprop,hop.call(this,sprop)?defProp(this,sprop,{'set':setter}):defProp(this,sprop,{'get':undefined,'set':setter,'enumerable':true,'configurable':true})}legacyDefineSetter.prototype=null,defProp(Object.prototype,'__defineSetter__',{'value':legacyDefineSetter,'writable':false,'enumerable':false,'configurable':false});function
legacyLookupGetter(sprop){var base,desc;sprop=''+sprop,base=this,desc=void 0;while(base&&!(desc=gopd(base,sprop)))base=getProto(base);return desc&&desc.get}legacyLookupGetter.prototype=null,defProp(Object.prototype,'__lookupGetter__',{'value':legacyLookupGetter,'writable':false,'enumerable':false,'configurable':false});function
legacyLookupSetter(sprop){var base,desc;sprop=''+sprop,base=this,desc=void 0;while(base&&!(desc=gopd(base,sprop)))base=getProto(base);return desc&&desc.set}legacyLookupSetter.prototype=null,defProp(Object.prototype,'__lookupSetter__',{'value':legacyLookupSetter,'writable':false,'enumerable':false,'configurable':false})})():(delete
Object.prototype.__defineGetter__,delete Object.prototype.__defineSetter__,delete
Object.prototype.__lookupGetter__,delete Object.prototype.__lookupSetter__),tamperProof=ses.makeDelayedTamperProof(),sharedImports=createNullIfPossible(),MAX_NAT=Math.pow(2,53)-1;function
Nat(allegedNum){if(typeof allegedNum!=='number')throw new RangeError('not a number');if(allegedNum!==allegedNum)throw new
RangeError('NaN not natural');if(allegedNum<0)throw new RangeError('negative');if(allegedNum%1!==0)throw new
RangeError('not integral');if(allegedNum>MAX_NAT)throw new RangeError('too big');return allegedNum}(function
startSESPrelude(){var unsafeEval=eval,UnsafeFunction=Function,defended,defendingStack,directivePattern,extensionsRecord,makeArrayLike,requirePattern;function
verifyStrictExpression(exprSrc){return exprSrc=''+exprSrc,ses.verifyStrictFunctionBody('( '+exprSrc+'\n);'),ses.verifyStrictFunctionBody('(( '+exprSrc+'\n));'),exprSrc}function
makeImports(){var imports=createNullIfPossible();return copyToImports(imports,sharedImports),imports}function
copyToImports(imports,from){return gopn(from).forEach(function(name){var desc=gopd(from,name);desc.enumerable=false,desc.configurable=true,defProp(imports,name,desc)}),imports}function
makeScopeObject(imports,freeNames,options){var scopeObject=createNullIfPossible();return freeNames.forEach(function
interceptName(name){var desc=gopd(imports,name),existing;(!desc||desc.writable!==false||desc.configurable)&&(desc={'get':function
scopedGet(){if(name in imports)return imports[name];if(options.maskReferenceError)return;throw new
ReferenceError(('\"'+name+'\" is not defined in this scope.'))},'set':function scopedSet(newValue){if(name
in imports)return imports[name]=newValue,void 0;throw new TypeError(('Cannot set \"'+name+'\"'))},'enumerable':false}),desc.enumerable=false,existing=gopd(scopeObject,name);if(existing)if(name==='__proto__'){if(NONCONFIGURABLE_OWN_PROTO)return}else
throw new Error(('New symptom: '+name+' in null-proto object'));defProp(scopeObject,name,desc)}),freeze(scopeObject)}function
securableWrapperSrc(exprSrc){return exprSrc=verifyStrictExpression(exprSrc),'(function() { with (this) { return function() { \"use strict\"; '+(NONCONFIGURABLE_OWN_PROTO?'var __proto__; ':'')+'return ('+''+exprSrc+'\n'+'); '+'}; '+'} '+'})\n'}ses.securableWrapperSrc=securableWrapperSrc;function
makeCompiledExpr(wrapper,freeNames,options){dirty&&fail('Initial cleaning failed');function
compiledCode(imports){var scopeObject=makeScopeObject(imports,freeNames,options);return wrapper.call(scopeObject).call(imports)}return compiledCode.prototype=null,compiledCode}ses.makeCompiledExpr=makeCompiledExpr;function
compileExpr(exprSrc,opt_mitigateOpts){var freeNames,options,result,wrapper,wrapperSrc;return exprSrc='('+exprSrc+'\n)',options=resolveOptions(opt_mitigateOpts),exprSrc=mitigateSrcGotchas(exprSrc,options),exprSrc[exprSrc.length-1]===';'&&(exprSrc=exprSrc.substr(0,exprSrc.length-1)),wrapperSrc=securableWrapperSrc(exprSrc),wrapper=unsafeEval(wrapperSrc),freeNames=atLeastFreeVarNames(exprSrc),result=makeCompiledExpr(wrapper,freeNames,options),freeze(result)}function
confine(exprSrc,opt_endowments,opt_mitigateOpts){var imports;return exprSrc=''+exprSrc,imports=makeImports(),opt_endowments&&copyToImports(imports,opt_endowments),def(imports),compileExpr(exprSrc,opt_mitigateOpts)(imports)}directivePattern=/^['"](?:\w|\s)*['"]$/m,requirePattern=/^(?:\w*\s*(?:\w|\$|\.)*\s*=)?\s*require\s*\(\s*['"]((?:\w|\$|\.|\/)+)['"]\s*\)$/m;function
getRequirements(modSrc){var result=[],stmts=modSrc.split(';'),i=0,ilen=stmts.length,m,stmt;for(;i<ilen;++i){stmt=stmts[i].trim();if(stmt!==''){if(!directivePattern.test(stmt))break}}for(;i<ilen;++i){stmt=stmts[i].trim();if(stmt!==''){m=requirePattern.exec(stmt);if(!m)break;result.push(m[1])}}return freeze(result)}function
compileModule(modSrc,opt_mitigateOpts){var exprSrc,freeNames,moduleMaker,options,wrapper,wrapperSrc;return modSrc=''+modSrc,options=resolveOptions(opt_mitigateOpts),'programSrc'in
limitSrcCharset(modSrc)||(options.forceParseAndRender=true),exprSrc='(function() {'+mitigateSrcGotchas(modSrc,options)+'\n}).call(this)',wrapperSrc=securableWrapperSrc(exprSrc),wrapper=unsafeEval(wrapperSrc),freeNames=atLeastFreeVarNames(exprSrc),moduleMaker=makeCompiledExpr(wrapper,freeNames,options),moduleMaker.requirements=getRequirements(modSrc),freeze(moduleMaker)}function
FakeFunction(var_args){var params=[].slice.call(arguments,0),body=ses.verifyStrictFunctionBody(params.pop()||''),exprSrc;return params=params.join(','),exprSrc='(function('+params+'\n){'+body+'\n})',compileExpr(exprSrc)(sharedImports)}FakeFunction.prototype=UnsafeFunction.prototype,FakeFunction.prototype.constructor=FakeFunction,global.Function=FakeFunction;function
fakeEval(src){try{src=verifyStrictExpression(src)}catch(x){src='(function() {'+src+'\n}).call(this)'}return compileExpr(src)(sharedImports)}TAME_GLOBAL_EVAL&&(global.eval=fakeEval),defended=new
WeakMap,defendingStack=[];function pushDefending(val){var t;if(!val)return;t=typeof
val;if(t==='number'||t==='string'||t==='boolean')return;if(t!=='object'&&t!=='function')throw new
TypeError(('unexpected typeof: '+t));if(defended.get(val))return;defended.set(val,true),defendingStack.push(val)}function
def(node){var next;try{pushDefending(node);while(defendingStack.length>0)next=defendingStack.pop(),pushDefending(getProto(next)),tamperProof(next,pushDefending)}catch(err){throw defended=new
WeakMap,defendingStack=[],err}return node}(function(){var itemMap=new WeakMap,lengthMap=new
WeakMap,nativeProxies;function lengthGetter(){var getter=lengthMap.get(this);return getter?getter():void
0}constFunc(lengthGetter),nativeProxies=global.Proxy&&(function(){var obj={'0':'hi'},p=global.Proxy.create({'get':function(O,P){return obj[P]}});return p[0]==='hi'})(),nativeProxies?(function(){function
ArrayLike(proto,getItem,getLength){var obj;if(typeof proto!=='object')throw new TypeError('Expected proto to be an object.');if(!(proto
instanceof ArrayLike))throw new TypeError('Expected proto to be instanceof ArrayLike.');return obj=create(proto),itemMap.set(obj,getItem),lengthMap.set(obj,getLength),obj}function
ownPropDesc(P){return P=''+P,P==='length'?{'get':lengthGetter,'enumerable':false,'configurable':true}:typeof
P==='number'||P===''+ +P?{'get':constFunc(function(){var getter=itemMap.get(this);return getter?getter(+P):void
0}),'enumerable':true,'configurable':true}:void 0}function propDesc(P){var opd=ownPropDesc(P);return opd||gopd(Object.prototype,P)}function
get(O,P){var getter;return P=''+P,P==='length'?lengthGetter.call(O):typeof P==='number'||P===''+
+P?(getter=itemMap.get(O),getter?getter(+P):void 0):Object.prototype[P]}function
has(P){return P=''+P,P==='length'||typeof P==='number'||P===''+ +P||P in Object.prototype}function
hasOwn(P){return P=''+P,P==='length'||typeof P==='number'||P===''+ +P}function getPN(){var
result=getOwnPN(),objPropNames=gopn(Object.prototype);return result.push.apply(result,objPropNames),result}function
getOwnPN(){return['length']}function del(P){return P=''+P,!(P==='length'||''+ +P===P)}ArrayLike.prototype=global.Proxy.create({'toString':function(){return'[SES ArrayLike proxy handler]'},'getPropertyDescriptor':propDesc,'getOwnPropertyDescriptor':ownPropDesc,'get':get,'has':has,'hasOwn':hasOwn,'getPropertyNames':getPN,'getOwnPropertyNames':getOwnPN,'delete':del,'fix':function(){return}},Object.prototype),tamperProof(ArrayLike),makeArrayLike=function(){return ArrayLike},makeArrayLike.canBeFullyLive=true})():(function(){var
BiggestArrayLike,maxLen;function nextUInt31PowerOf2(v){if(!(isFinite(v)&&v>=0))throw new
RangeError((v+' not \x3e= 0'));return v&=2147483647,v|=v>>1,v|=v>>2,v|=v>>4,v|=v>>8,v|=v>>16,v+1}BiggestArrayLike=void
0,maxLen=0,makeArrayLike=function(length){var BAL,i,len;length=+length,isFinite(length)&&length>=0||(length=0);if(!BiggestArrayLike||length>maxLen){len=nextUInt31PowerOf2(length),BAL=function(proto,getItem,getLength){var
obj;if(typeof proto!=='object')throw new TypeError('Expected proto to be an object.');if(!(proto
instanceof BAL))throw new TypeError('Expected proto to be instanceof ArrayLike.');return obj=create(proto),itemMap.set(obj,getItem),lengthMap.set(obj,getLength),obj};for(i=0;i<len;++i)(function(j){function
get(){return itemMap.get(this)(j)}defProp(BAL.prototype,j,{'get':constFunc(get),'enumerable':true})})(i);defProp(BAL.prototype,'length',{'get':lengthGetter}),tamperProof(BAL),tamperProof(BAL.prototype),BiggestArrayLike=BAL,maxLen=len}return BiggestArrayLike},makeArrayLike.canBeFullyLive=false})()})(),global.cajaVM={'log':constFunc(function
log(str){typeof console!=='undefined'&&'log'in console&&console.log(str)}),'tamperProof':constFunc(tamperProof),'constFunc':constFunc(constFunc),'Nat':constFunc(Nat),'is':constFunc(ses.is),'compileExpr':constFunc(compileExpr),'confine':constFunc(confine),'compileModule':constFunc(compileModule),'eval':fakeEval,'Function':FakeFunction,'sharedImports':sharedImports,'makeImports':constFunc(makeImports),'copyToImports':constFunc(copyToImports),'makeArrayLike':constFunc(makeArrayLike)},defProp(cajaVM,'[[ThrowTypeError]]',{'enumerable':false,'value':getThrowTypeError()}),extensionsRecord=extensions(),gopn(extensionsRecord).forEach(function(p){defProp(cajaVM,p,gopd(extensionsRecord,p))}),global.cajaVM.def=constFunc(def)})(),propertyReports={},rootReports={};function
reportItemProblem(table,severity,status,path){var group;ses.updateMaxSeverity(severity),group=table[status]||(table[status]={'severity':severity,'list':[]}),group.list.push(path)}function
logReports(table){keys(table).sort().forEach(function(status){var group=table[status];ses.logger.reportDiagnosis(group.severity,status,group.list)})}function
reportProperty(severity,status,path){reportItemProblem(propertyReports,severity,status,path)}keys(whitelist).forEach(function(name){var
desc=gopd(global,name),newDesc,permit;if(desc){permit=whitelist[name];if(permit){newDesc={'value':global[name],'writable':false,'configurable':false,'enumerable':desc.enumerable};try{defProp(global,name,newDesc)}catch(err){reportProperty(ses.severities.NEW_SYMPTOM,'Global '+name+' cannot be made readonly: '+err)}defProp(sharedImports,name,newDesc)}}}),TAME_GLOBAL_EVAL&&defProp(sharedImports,'eval',{'value':cajaVM.eval,'writable':false,'enumerable':false,'configurable':false}),whitelistSymbols=[true,'*','maybeAccessor'],whiteTable=new
WeakMap;function register(value,permit){var oldPermit;if(value!==Object(value))return;if(typeof
permit!=='object')return whitelistSymbols.indexOf(permit)<0&&fail('syntax error in whitelist; unexpected value: '+permit),void
0;oldPermit=whiteTable.get(value),oldPermit&&fail('primordial reachable through multiple paths'),whiteTable.set(value,permit),keys(permit).forEach(function(name){var
desc=gopd(value,name);desc&&register(desc.value,permit[name])})}register(sharedImports,whitelist);function
getPermit(base,name){var permit=whiteTable.get(base),result;if(permit){if(hop.call(permit,name))return permit[name]};while(true){base=getProto(base);if(base===null)return false;permit=whiteTable.get(base);if(permit&&hop.call(permit,name))return result=permit[name],result==='*'?result:false}}cleaning=new
WeakMap;function cleanProperty(base,name,path){var deleted,desc2,diagnostic,dummy2,err,exists,value;function
poison(){throw new TypeError(('Cannot access property '+path))}if(typeof base==='function'){if(name==='caller')return diagnostic=ses.makeCallerHarmless(base,path),reportProperty(ses.severities.SAFE,diagnostic,path),true;if(name==='arguments')return diagnostic=ses.makeArgumentsHarmless(base,path),reportProperty(ses.severities.SAFE,diagnostic,path),true}if(name==='__proto__')return reportProperty(ses.severities.SAFE_SPEC_VIOLATION,'Skipped',path),true;deleted=void
0,err=void 0;try{deleted=delete base[name]}catch(er){err=er}exists=hop.call(base,name);if(deleted){if(!exists)return reportProperty(ses.severities.SAFE,'Deleted',path),true;reportProperty(ses.severities.SAFE_SPEC_VIOLATION,'Bounced back',path)}else
if(deleted===false)reportProperty(ses.severities.SAFE_SPEC_VIOLATION,'Strict delete returned false rather than throwing',path);else
if(err instanceof TypeError);else reportProperty(ses.severities.NEW_SYMPTOM,'Delete failed with'+err,path);try{defProp(base,name,{'get':poison,'set':poison,'enumerable':false,'configurable':false})}catch(cantPoisonErr){try{value=gopd(base,name).value,defProp(base,name,{'value':value===Object(value)?void
0:value,'writable':false,'configurable':false})}catch(cantFreezeHarmless){return reportProperty(ses.severities.NOT_ISOLATED,'Cannot be poisoned',path),false}}desc2=gopd(base,name);if(desc2.get===poison&&desc2.set===poison&&!desc2.configurable)try{dummy2=base[name]}catch(expectedErr){if(expectedErr
instanceof TypeError)return reportProperty(ses.severities.SAFE,'Successfully poisoned',path),true}else
if(desc2.value!==Object(desc2.value2)&&!desc2.writable&&!desc2.configurable)return reportProperty(ses.severities.SAFE,'Frozen harmless',path),false;return reportProperty(ses.severities.NEW_SYMPTOM,'Failed to be poisoned',path),false}function
clean(value,prefix){if(value!==Object(value))return;if(cleaning.get(value))return;cleaning.set(value,true),gopn(value).forEach(function(name){var
path=prefix+(prefix?'.':'')+name,p=getPermit(value,name),desc,subValue;p?(desc=gopd(value,name),hop.call(desc,'value')?(subValue=desc.value,clean(subValue,path)):p!=='maybeAccessor'?(reportProperty(ses.severities.SAFE_SPEC_VIOLATION,'Not a data property',path),cleanProperty(value,name,path)):(clean(desc.get,path+'\x3cgetter\x3e'),clean(desc.set,path+'\x3csetter\x3e'))):cleanProperty(value,name,path)})}clean(sharedImports,''),cajaVM.es5ProblemReports=ses.es5ProblemReports,cajaVM.def(sharedImports),ses._primordialsHaveBeenFrozen=true,[['sharedImports',sharedImports],['[[ThrowTypeError]]',getThrowTypeError()],['Array.prototype',Array.prototype],['Boolean.prototype',Boolean.prototype],['Function.prototype',Function.prototype],['Number.prototype',Number.prototype],['Object.prototype',Object.prototype],['RegExp.prototype',RegExp.prototype],['String.prototype',String.prototype]].forEach(function(record){var
name=record[0],root=record[1];cleaning.has(root)||reportItemProblem(rootReports,ses.severities.NOT_ISOLATED,'Not cleaned',name),Object.isFrozen(root)||reportItemProblem(rootReports,ses.severities.NOT_ISOLATED,'Not frozen',name)}),logReports(propertyReports),logReports(rootReports);try{result=ses.kludge_test_FREEZING_BREAKS_PROTOTYPES()}catch(e){result=e}result!==false&&(ses.logger.error('FREEZING_BREAKS_PROTOTYPES repair not actually successful ('+result+')'),ses.updateMaxSeverity(ses.es5ProblemReports.FREEZING_BREAKS_PROTOTYPES.preSeverity)),ses.logger.reportMax(),ses.ok()?(dirty=false,ses.logger.log('initSES succeeded.')):ses.logger.error('initSES failed.')},(function
ejectorsGuardsTrademarksModule(){'use strict';ses.ejectorsGuardsTrademarks=function
ejectorsGuardsTrademarks(){var freeze=Object.freeze,constFunc=cajaVM.constFunc,GuardMark,GuardStamp,GuardT,stampers;function
Token(name){return name=''+name,freeze({'toString':constFunc(function tokenToString(){return name})})}function
callWithEjector(attemptFunc,opt_failFunc){var failFunc=opt_failFunc||function(x){return x},disabled=false,token=new
Token('ejection'),stash=void 0;function ejector(result){throw disabled?new Error('ejector disabled'):(stash=result,token)}constFunc(ejector);try{try{return attemptFunc(ejector)}finally{disabled=true}}catch(e){if(e===token)return failFunc(stash);throw e}}function
eject(opt_ejector,result){throw opt_ejector?(opt_ejector(result),new Error('Ejector did not exit: ',opt_ejector)):new
Error(result)}function makeSealerUnsealerPair(){var boxValues=new WeakMap(true);function
seal(value){var box=freeze({});return boxValues.set(box,value),box}function optUnseal(box){return boxValues.has(box)?[boxValues.get(box)]:null}function
unseal(box){var result=optUnseal(box);if(result===null)throw new Error('That wasn\'t one of my sealed boxes!');return result[0]}return freeze({'seal':constFunc(seal),'unseal':constFunc(unseal),'optUnseal':constFunc(optUnseal)})}stampers=new
WeakMap(true);function makeTrademark(typename,table){var stamp;return typename=''+typename,stamp=freeze({'toString':constFunc(function(){return typename+'Stamp'})}),stampers.set(stamp,function(obj){return table.set(obj,true),obj}),freeze({'toString':constFunc(function(){return typename+'Mark'}),'stamp':stamp,'guard':freeze({'toString':constFunc(function(){return typename+'T'}),'coerce':constFunc(function(specimen,opt_ejector){return table.get(specimen)||eject(opt_ejector,'Specimen does not have the \"'+typename+'\" trademark'),specimen})})})}GuardMark=makeTrademark('Guard',new
WeakMap),GuardT=GuardMark.guard,GuardStamp=GuardMark.stamp,stampers.get(GuardStamp)(GuardT);function
Trademark(typename){var result=makeTrademark(typename,new WeakMap);return stampers.get(GuardStamp)(result.guard),result}function
stamp(stamps,record){var i,numStamps;if(Object.isFrozen(record))throw new TypeError(('Can\'t stamp frozen objects: '+record));stamps=Array.prototype.slice.call(stamps,0),numStamps=stamps.length;for(i=0;i<numStamps;++i)if(!stampers.has(stamps[i]))throw new
TypeError(('Can\'t stamp with a non-stamp: '+stamps[i]));for(i=0;i<numStamps;++i)stampers.get(stamps[i])(record);return freeze(record)}function
guard(g,specimen,opt_ejector){return g=GuardT.coerce(g),g.coerce(specimen,opt_ejector)}function
passesGuard(g,specimen){return g=GuardT.coerce(g),callWithEjector(constFunc(function(opt_ejector){return g.coerce(specimen,opt_ejector),true}),constFunc(function(ignored){return false}))}function
makeTableGuard(table,typename,errorMessage){var g={'toString':constFunc(function(){return typename+'T'}),'coerce':constFunc(function(specimen,opt_ejector){if(Object(specimen)===specimen&&table.get(specimen))return specimen;eject(opt_ejector,errorMessage)})};return stamp([GuardStamp],g),freeze(g)}return freeze({'makeSealerUnsealerPair':constFunc(makeSealerUnsealerPair),'GuardT':GuardT,'makeTableGuard':constFunc(makeTableGuard),'Trademark':constFunc(Trademark),'guard':constFunc(guard),'passesGuard':constFunc(passesGuard),'stamp':constFunc(stamp)})}})(),(function
hookupSESPlusModule(global){'use strict';try{if(!ses.okToLoad())return;ses.startSES(global,ses.whitelist,ses.limitSrcCharset,ses.atLeastFreeVarNames,ses.ejectorsGuardsTrademarks)}catch(err){ses.updateMaxSeverity(ses.severities.NOT_SUPPORTED),ses.logger.error('hookupSESPlus failed with: ',err)}finally{ses.logger.endStartup()}})(this);if(typeof
ses!=='undefined'&&ses.ok&&!ses.ok())throw cajaIframeDone___(),new Error('SES not supported, aborting taming frame initialization.');unicode={},unicode.BASE_CHAR='A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3',unicode.IDEOGRAPHIC='\u4e00-\u9fa5\u3007\u3021-\u3029',unicode.LETTER=unicode.BASE_CHAR+unicode.IDEOGRAPHIC,unicode.COMBINING_CHAR='\u0300-\u0345\u0360-\u0361\u0483-\u0486\u0591-\u05a1\u05a3-\u05b9\u05bb-\u05bd\u05bf\u05c1-\u05c2\u05c4\u064b-\u0652\u0670\u06d6-\u06dc\u06dd-\u06df\u06e0-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0901-\u0903\u093c\u093e-\u094c\u094d\u0951-\u0954\u0962-\u0963\u0981-\u0983\u09bc\u09be\u09bf\u09c0-\u09c4\u09c7-\u09c8\u09cb-\u09cd\u09d7\u09e2-\u09e3\u0a02\u0a3c\u0a3e\u0a3f\u0a40-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a70-\u0a71\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0b01-\u0b03\u0b3c\u0b3e-\u0b43\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b82-\u0b83\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c82-\u0c83\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0d02-\u0d03\u0d3e-\u0d43\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86-\u0f8b\u0f90-\u0f95\u0f97\u0f99-\u0fad\u0fb1-\u0fb7\u0fb9\u20d0-\u20dc\u20e1\u302a-\u302f\u3099\u309a',unicode.DIGIT='0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be7-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29',unicode.EXTENDER='\xb7\u02d0\u02d1\u0387\u0640\u0e46\u0ec6\u3005\u3031-\u3035\u309d-\u309e\u30fc-\u30fe',typeof
window!=='undefined'&&(window['unicode']=unicode),CSS_PROP_BIT_QUANTITY=1,CSS_PROP_BIT_HASH_VALUE=2,CSS_PROP_BIT_NEGATIVE_QUANTITY=4,CSS_PROP_BIT_QSTRING=8,CSS_PROP_BIT_URL=16,CSS_PROP_BIT_UNRESERVED_WORD=64,CSS_PROP_BIT_UNICODE_RANGE=128,CSS_PROP_BIT_GLOBAL_NAME=512,CSS_PROP_BIT_PROPERTY_NAME=1024,cssSchema=(function(){var
L=[['aliceblue','antiquewhite','aqua','aquamarine','azure','beige','bisque','black','blanchedalmond','blue','blueviolet','brown','burlywood','cadetblue','chartreuse','chocolate','coral','cornflowerblue','cornsilk','crimson','cyan','darkblue','darkcyan','darkgoldenrod','darkgray','darkgreen','darkkhaki','darkmagenta','darkolivegreen','darkorange','darkorchid','darkred','darksalmon','darkseagreen','darkslateblue','darkslategray','darkturquoise','darkviolet','deeppink','deepskyblue','dimgray','dodgerblue','firebrick','floralwhite','forestgreen','fuchsia','gainsboro','ghostwhite','gold','goldenrod','gray','green','greenyellow','honeydew','hotpink','indianred','indigo','ivory','khaki','lavender','lavenderblush','lawngreen','lemonchiffon','lightblue','lightcoral','lightcyan','lightgoldenrodyellow','lightgreen','lightgrey','lightpink','lightsalmon','lightseagreen','lightskyblue','lightslategray','lightsteelblue','lightyellow','lime','limegreen','linen','magenta','maroon','mediumaquamarine','mediumblue','mediumorchid','mediumpurple','mediumseagreen','mediumslateblue','mediumspringgreen','mediumturquoise','mediumvioletred','midnightblue','mintcream','mistyrose','moccasin','navajowhite','navy','oldlace','olive','olivedrab','orange','orangered','orchid','palegoldenrod','palegreen','paleturquoise','palevioletred','papayawhip','peachpuff','peru','pink','plum','powderblue','purple','red','rosybrown','royalblue','saddlebrown','salmon','sandybrown','seagreen','seashell','sienna','silver','skyblue','slateblue','slategray','snow','springgreen','steelblue','tan','teal','thistle','tomato','transparent','turquoise','violet','wheat','white','whitesmoke','yellow','yellowgreen'],['all-scroll','col-resize','crosshair','default','e-resize','hand','help','move','n-resize','ne-resize','no-drop','not-allowed','nw-resize','pointer','progress','row-resize','s-resize','se-resize','sw-resize','text','vertical-text','w-resize','wait'],['armenian','decimal','decimal-leading-zero','disc','georgian','lower-alpha','lower-greek','lower-latin','lower-roman','square','upper-alpha','upper-latin','upper-roman'],['100','200','300','400','500','600','700','800','900','bold','bolder','lighter'],['block-level','inline-level','table-caption','table-cell','table-column','table-column-group','table-footer-group','table-header-group','table-row','table-row-group'],['condensed','expanded','extra-condensed','extra-expanded','narrower','semi-condensed','semi-expanded','ultra-condensed','ultra-expanded','wider'],['inherit','inline','inline-block','inline-box','inline-flex','inline-grid','inline-list-item','inline-stack','inline-table','run-in'],['behind','center-left','center-right','far-left','far-right','left-side','leftwards','right-side','rightwards'],['large','larger','small','smaller','x-large','x-small','xx-large','xx-small'],['dashed','dotted','double','groove','outset','ridge','solid'],['ease','ease-in','ease-in-out','ease-out','linear','step-end','step-start'],['at','closest-corner','closest-side','ellipse','farthest-corner','farthest-side'],['baseline','middle','sub','super','text-bottom','text-top'],['caption','icon','menu','message-box','small-caption','status-bar'],['fast','faster','slow','slower','x-fast','x-slow'],['above','below','higher','level','lower'],['cursive','fantasy','monospace','sans-serif','serif'],['loud','silent','soft','x-loud','x-soft'],['no-repeat','repeat-x','repeat-y','round','space'],['blink','line-through','overline','underline'],['block','flex','grid','table'],['high','low','x-high','x-low'],['nowrap','pre','pre-line','pre-wrap'],['absolute','relative','static'],['alternate','alternate-reverse','reverse'],['border-box','content-box','padding-box'],['capitalize','lowercase','uppercase'],['child','female','male'],['=','opacity'],['backwards','forwards'],['bidi-override','embed'],['bottom','top'],['break-all','keep-all'],['clip','ellipsis'],['contain','cover'],['continuous','digits'],['end','start'],['flat','preserve-3d'],['hide','show'],['horizontal','vertical'],['inside','outside'],['italic','oblique'],['left','right'],['ltr','rtl'],['no-content','no-display'],['paused','running'],['suppress','unrestricted'],['thick','thin'],[','],['/'],['all'],['always'],['auto'],['avoid'],['both'],['break-word'],['center'],['circle'],['code'],['collapse'],['contents'],['fixed'],['hidden'],['infinite'],['inset'],['invert'],['justify'],['list-item'],['local'],['medium'],['mix'],['none'],['normal'],['once'],['repeat'],['scroll'],['separate'],['small-caps'],['spell-out'],['to'],['visible']],schema={'animation':{'cssPropBits':517,'cssLitGroup':[L[10],L[24],L[29],L[45],L[48],L[54],L[63],L[71],L[72]],'cssFns':['cubic-bezier()','steps()']},'animation-delay':{'cssPropBits':5,'cssLitGroup':[L[48]],'cssFns':[]},'animation-direction':{'cssPropBits':0,'cssLitGroup':[L[24],L[48],L[72]],'cssFns':[]},'animation-duration':'animation-delay','animation-fill-mode':{'cssPropBits':0,'cssLitGroup':[L[29],L[48],L[54],L[71]],'cssFns':[]},'animation-iteration-count':{'cssPropBits':5,'cssLitGroup':[L[48],L[63]],'cssFns':[]},'animation-name':{'cssPropBits':512,'cssLitGroup':[L[48],L[71]],'cssFns':[]},'animation-play-state':{'cssPropBits':0,'cssLitGroup':[L[45],L[48]],'cssFns':[]},'animation-timing-function':{'cssPropBits':0,'cssLitGroup':[L[10],L[48]],'cssFns':['cubic-bezier()','steps()']},'appearance':{'cssPropBits':0,'cssLitGroup':[L[71]],'cssFns':[]},'azimuth':{'cssPropBits':5,'cssLitGroup':[L[7],L[42],L[56]],'cssFns':[]},'backface-visibility':{'cssPropBits':0,'cssLitGroup':[L[59],L[62],L[80]],'cssFns':[]},'background':{'cssPropBits':23,'cssLitGroup':[L[0],L[18],L[25],L[31],L[34],L[42],L[48],L[49],L[52],L[56],L[61],L[68],L[71],L[74],L[75]],'cssFns':['image()','linear-gradient()','radial-gradient()','repeating-linear-gradient()','repeating-radial-gradient()','rgb()','rgba()']},'background-attachment':{'cssPropBits':0,'cssLitGroup':[L[48],L[61],L[68],L[75]],'cssFns':[]},'background-color':{'cssPropBits':2,'cssLitGroup':[L[0]],'cssFns':['rgb()','rgba()']},'background-image':{'cssPropBits':16,'cssLitGroup':[L[48],L[71]],'cssFns':['image()','linear-gradient()','radial-gradient()','repeating-linear-gradient()','repeating-radial-gradient()']},'background-position':{'cssPropBits':5,'cssLitGroup':[L[31],L[42],L[48],L[56]],'cssFns':[]},'background-repeat':{'cssPropBits':0,'cssLitGroup':[L[18],L[48],L[74]],'cssFns':[]},'background-size':{'cssPropBits':5,'cssLitGroup':[L[34],L[48],L[52]],'cssFns':[]},'border':{'cssPropBits':7,'cssLitGroup':[L[0],L[9],L[47],L[62],L[64],L[69],L[71]],'cssFns':['rgb()','rgba()']},'border-bottom':'border','border-bottom-color':'background-color','border-bottom-left-radius':{'cssPropBits':5,'cssFns':[]},'border-bottom-right-radius':'border-bottom-left-radius','border-bottom-style':{'cssPropBits':0,'cssLitGroup':[L[9],L[62],L[64],L[71]],'cssFns':[]},'border-bottom-width':{'cssPropBits':5,'cssLitGroup':[L[47],L[69]],'cssFns':[]},'border-collapse':{'cssPropBits':0,'cssLitGroup':[L[59],L[76]],'cssFns':[]},'border-color':'background-color','border-left':'border','border-left-color':'background-color','border-left-style':'border-bottom-style','border-left-width':'border-bottom-width','border-radius':{'cssPropBits':5,'cssLitGroup':[L[49]],'cssFns':[]},'border-right':'border','border-right-color':'background-color','border-right-style':'border-bottom-style','border-right-width':'border-bottom-width','border-spacing':'border-bottom-left-radius','border-style':'border-bottom-style','border-top':'border','border-top-color':'background-color','border-top-left-radius':'border-bottom-left-radius','border-top-right-radius':'border-bottom-left-radius','border-top-style':'border-bottom-style','border-top-width':'border-bottom-width','border-width':'border-bottom-width','bottom':{'cssPropBits':5,'cssLitGroup':[L[52]],'cssFns':[]},'box':{'cssPropBits':0,'cssLitGroup':[L[60],L[71],L[72]],'cssFns':[]},'box-shadow':{'cssPropBits':7,'cssLitGroup':[L[0],L[48],L[64],L[71]],'cssFns':['rgb()','rgba()']},'box-sizing':{'cssPropBits':0,'cssLitGroup':[L[25]],'cssFns':[]},'caption-side':{'cssPropBits':0,'cssLitGroup':[L[31]],'cssFns':[]},'clear':{'cssPropBits':0,'cssLitGroup':[L[42],L[54],L[71]],'cssFns':[]},'clip':{'cssPropBits':0,'cssLitGroup':[L[52]],'cssFns':['rect()']},'color':'background-color','content':{'cssPropBits':8,'cssLitGroup':[L[71],L[72]],'cssFns':[]},'cue':{'cssPropBits':16,'cssLitGroup':[L[71]],'cssFns':[]},'cue-after':'cue','cue-before':'cue','cursor':{'cssPropBits':16,'cssLitGroup':[L[1],L[48],L[52]],'cssFns':[]},'direction':{'cssPropBits':0,'cssLitGroup':[L[43]],'cssFns':[]},'display':{'cssPropBits':0,'cssLitGroup':[L[4],L[6],L[20],L[52],L[67],L[71]],'cssFns':[]},'display-extras':{'cssPropBits':0,'cssLitGroup':[L[67],L[71]],'cssFns':[]},'display-inside':{'cssPropBits':0,'cssLitGroup':[L[20],L[52]],'cssFns':[]},'display-outside':{'cssPropBits':0,'cssLitGroup':[L[4],L[71]],'cssFns':[]},'elevation':{'cssPropBits':5,'cssLitGroup':[L[15]],'cssFns':[]},'empty-cells':{'cssPropBits':0,'cssLitGroup':[L[38]],'cssFns':[]},'filter':{'cssPropBits':0,'cssFns':['alpha()']},'float':{'cssPropBits':0,'cssLitGroup':[L[42],L[71]],'cssFns':[]},'font':{'cssPropBits':73,'cssLitGroup':[L[3],L[8],L[13],L[16],L[41],L[48],L[49],L[69],L[72],L[77]],'cssFns':[]},'font-family':{'cssPropBits':72,'cssLitGroup':[L[16],L[48]],'cssFns':[]},'font-size':{'cssPropBits':1,'cssLitGroup':[L[8],L[69]],'cssFns':[]},'font-stretch':{'cssPropBits':0,'cssLitGroup':[L[5],L[72]],'cssFns':[]},'font-style':{'cssPropBits':0,'cssLitGroup':[L[41],L[72]],'cssFns':[]},'font-variant':{'cssPropBits':0,'cssLitGroup':[L[72],L[77]],'cssFns':[]},'font-weight':{'cssPropBits':0,'cssLitGroup':[L[3],L[72]],'cssFns':[]},'height':'bottom','left':'bottom','letter-spacing':{'cssPropBits':5,'cssLitGroup':[L[72]],'cssFns':[]},'line-height':{'cssPropBits':1,'cssLitGroup':[L[72]],'cssFns':[]},'list-style':{'cssPropBits':16,'cssLitGroup':[L[2],L[40],L[57],L[71]],'cssFns':['image()','linear-gradient()','radial-gradient()','repeating-linear-gradient()','repeating-radial-gradient()']},'list-style-image':{'cssPropBits':16,'cssLitGroup':[L[71]],'cssFns':['image()','linear-gradient()','radial-gradient()','repeating-linear-gradient()','repeating-radial-gradient()']},'list-style-position':{'cssPropBits':0,'cssLitGroup':[L[40]],'cssFns':[]},'list-style-type':{'cssPropBits':0,'cssLitGroup':[L[2],L[57],L[71]],'cssFns':[]},'margin':'bottom','margin-bottom':'bottom','margin-left':'bottom','margin-right':'bottom','margin-top':'bottom','max-height':{'cssPropBits':1,'cssLitGroup':[L[52],L[71]],'cssFns':[]},'max-width':'max-height','min-height':{'cssPropBits':1,'cssLitGroup':[L[52]],'cssFns':[]},'min-width':'min-height','opacity':{'cssPropBits':1,'cssFns':[]},'outline':{'cssPropBits':7,'cssLitGroup':[L[0],L[9],L[47],L[62],L[64],L[65],L[69],L[71]],'cssFns':['rgb()','rgba()']},'outline-color':{'cssPropBits':2,'cssLitGroup':[L[0],L[65]],'cssFns':['rgb()','rgba()']},'outline-style':'border-bottom-style','outline-width':'border-bottom-width','overflow':{'cssPropBits':0,'cssLitGroup':[L[52],L[62],L[75],L[80]],'cssFns':[]},'overflow-wrap':{'cssPropBits':0,'cssLitGroup':[L[55],L[72]],'cssFns':[]},'overflow-x':{'cssPropBits':0,'cssLitGroup':[L[44],L[52],L[62],L[75],L[80]],'cssFns':[]},'overflow-y':'overflow-x','padding':'opacity','padding-bottom':'opacity','padding-left':'opacity','padding-right':'opacity','padding-top':'opacity','page-break-after':{'cssPropBits':0,'cssLitGroup':[L[42],L[51],L[52],L[53]],'cssFns':[]},'page-break-before':'page-break-after','page-break-inside':{'cssPropBits':0,'cssLitGroup':[L[52],L[53]],'cssFns':[]},'pause':'border-bottom-left-radius','pause-after':'border-bottom-left-radius','pause-before':'border-bottom-left-radius','perspective':{'cssPropBits':5,'cssLitGroup':[L[71]],'cssFns':[]},'perspective-origin':{'cssPropBits':5,'cssLitGroup':[L[31],L[42],L[56]],'cssFns':[]},'pitch':{'cssPropBits':5,'cssLitGroup':[L[21],L[69]],'cssFns':[]},'pitch-range':'border-bottom-left-radius','play-during':{'cssPropBits':16,'cssLitGroup':[L[52],L[70],L[71],L[74]],'cssFns':[]},'position':{'cssPropBits':0,'cssLitGroup':[L[23]],'cssFns':[]},'quotes':{'cssPropBits':8,'cssLitGroup':[L[71]],'cssFns':[]},'resize':{'cssPropBits':0,'cssLitGroup':[L[39],L[54],L[71]],'cssFns':[]},'richness':'border-bottom-left-radius','right':'bottom','speak':{'cssPropBits':0,'cssLitGroup':[L[71],L[72],L[78]],'cssFns':[]},'speak-header':{'cssPropBits':0,'cssLitGroup':[L[51],L[73]],'cssFns':[]},'speak-numeral':{'cssPropBits':0,'cssLitGroup':[L[35]],'cssFns':[]},'speak-punctuation':{'cssPropBits':0,'cssLitGroup':[L[58],L[71]],'cssFns':[]},'speech-rate':{'cssPropBits':5,'cssLitGroup':[L[14],L[69]],'cssFns':[]},'stress':'border-bottom-left-radius','table-layout':{'cssPropBits':0,'cssLitGroup':[L[52],L[61]],'cssFns':[]},'text-align':{'cssPropBits':0,'cssLitGroup':[L[42],L[56],L[66]],'cssFns':[]},'text-decoration':{'cssPropBits':0,'cssLitGroup':[L[19],L[71]],'cssFns':[]},'text-indent':'border-bottom-left-radius','text-overflow':{'cssPropBits':8,'cssLitGroup':[L[33]],'cssFns':[]},'text-shadow':'box-shadow','text-transform':{'cssPropBits':0,'cssLitGroup':[L[26],L[71]],'cssFns':[]},'text-wrap':{'cssPropBits':0,'cssLitGroup':[L[46],L[71],L[72]],'cssFns':[]},'top':'bottom','transform':{'cssPropBits':0,'cssLitGroup':[L[71]],'cssFns':['matrix()','perspective()','rotate()','rotate3d()','rotatex()','rotatey()','rotatez()','scale()','scale3d()','scalex()','scaley()','scalez()','skew()','skewx()','skewy()','translate()','translate3d()','translatex()','translatey()','translatez()']},'transform-origin':'perspective-origin','transform-style':{'cssPropBits':0,'cssLitGroup':[L[37]],'cssFns':[]},'transition':{'cssPropBits':1029,'cssLitGroup':[L[10],L[48],L[50],L[71]],'cssFns':['cubic-bezier()','steps()']},'transition-delay':'animation-delay','transition-duration':'animation-delay','transition-property':{'cssPropBits':1024,'cssLitGroup':[L[48],L[50]],'cssFns':[]},'transition-timing-function':'animation-timing-function','unicode-bidi':{'cssPropBits':0,'cssLitGroup':[L[30],L[72]],'cssFns':[]},'vertical-align':{'cssPropBits':5,'cssLitGroup':[L[12],L[31]],'cssFns':[]},'visibility':'backface-visibility','voice-family':{'cssPropBits':8,'cssLitGroup':[L[27],L[48]],'cssFns':[]},'volume':{'cssPropBits':1,'cssLitGroup':[L[17],L[69]],'cssFns':[]},'white-space':{'cssPropBits':0,'cssLitGroup':[L[22],L[72]],'cssFns':[]},'width':'min-height','word-break':{'cssPropBits':0,'cssLitGroup':[L[32],L[72]],'cssFns':[]},'word-spacing':'letter-spacing','word-wrap':'overflow-wrap','z-index':'bottom','zoom':'line-height','cubic-bezier()':'animation-delay','steps()':{'cssPropBits':5,'cssLitGroup':[L[36],L[48]],'cssFns':[]},'image()':{'cssPropBits':18,'cssLitGroup':[L[0],L[48]],'cssFns':['rgb()','rgba()']},'linear-gradient()':{'cssPropBits':7,'cssLitGroup':[L[0],L[31],L[42],L[48],L[79]],'cssFns':['rgb()','rgba()']},'radial-gradient()':{'cssPropBits':7,'cssLitGroup':[L[0],L[11],L[31],L[42],L[48],L[56],L[57]],'cssFns':['rgb()','rgba()']},'repeating-linear-gradient()':'linear-gradient()','repeating-radial-gradient()':'radial-gradient()','rgb()':{'cssPropBits':1,'cssLitGroup':[L[48]],'cssFns':[]},'rgba()':'rgb()','rect()':{'cssPropBits':5,'cssLitGroup':[L[48],L[52]],'cssFns':[]},'alpha()':{'cssPropBits':1,'cssLitGroup':[L[28]],'cssFns':[]},'matrix()':'animation-delay','perspective()':'border-bottom-left-radius','rotate()':'border-bottom-left-radius','rotate3d()':'animation-delay','rotatex()':'border-bottom-left-radius','rotatey()':'border-bottom-left-radius','rotatez()':'border-bottom-left-radius','scale()':'animation-delay','scale3d()':'animation-delay','scalex()':'border-bottom-left-radius','scaley()':'border-bottom-left-radius','scalez()':'border-bottom-left-radius','skew()':'animation-delay','skewx()':'border-bottom-left-radius','skewy()':'border-bottom-left-radius','translate()':'animation-delay','translate3d()':'animation-delay','translatex()':'border-bottom-left-radius','translatey()':'border-bottom-left-radius','translatez()':'border-bottom-left-radius'},key;if(true)for(key
in schema)'string'===typeof schema[key]&&Object.hasOwnProperty.call(schema,key)&&(schema[key]=schema[schema[key]]);return schema})(),typeof
window!=='undefined'&&(window['cssSchema']=cssSchema),html4={},html4.atype={'NONE':0,'URI':1,'URI_FRAGMENT':11,'SCRIPT':2,'STYLE':3,'HTML':12,'ID':4,'IDREF':5,'IDREFS':6,'GLOBAL_NAME':7,'LOCAL_NAME':8,'CLASSES':9,'FRAME_TARGET':10,'MEDIA_QUERY':13},html4['atype']=html4.atype,html4.ATTRIBS={'*::class':9,'*::dir':0,'*::draggable':0,'*::hidden':0,'*::id':4,'*::inert':0,'*::itemprop':0,'*::itemref':6,'*::itemscope':0,'*::lang':0,'*::onblur':2,'*::onchange':2,'*::onclick':2,'*::ondblclick':2,'*::onerror':2,'*::onfocus':2,'*::onkeydown':2,'*::onkeypress':2,'*::onkeyup':2,'*::onload':2,'*::onmousedown':2,'*::onmousemove':2,'*::onmouseout':2,'*::onmouseover':2,'*::onmouseup':2,'*::onreset':2,'*::onscroll':2,'*::onselect':2,'*::onsubmit':2,'*::ontouchcancel':2,'*::ontouchend':2,'*::ontouchenter':2,'*::ontouchleave':2,'*::ontouchmove':2,'*::ontouchstart':2,'*::onunload':2,'*::spellcheck':0,'*::style':3,'*::title':0,'*::translate':0,'a::accesskey':0,'a::coords':0,'a::href':1,'a::hreflang':0,'a::name':7,'a::onblur':2,'a::onfocus':2,'a::shape':0,'a::tabindex':0,'a::target':10,'a::type':0,'area::accesskey':0,'area::alt':0,'area::coords':0,'area::href':1,'area::nohref':0,'area::onblur':2,'area::onfocus':2,'area::shape':0,'area::tabindex':0,'area::target':10,'audio::controls':0,'audio::loop':0,'audio::mediagroup':5,'audio::muted':0,'audio::preload':0,'audio::src':1,'bdo::dir':0,'blockquote::cite':1,'br::clear':0,'button::accesskey':0,'button::disabled':0,'button::name':8,'button::onblur':2,'button::onfocus':2,'button::tabindex':0,'button::type':0,'button::value':0,'canvas::height':0,'canvas::width':0,'caption::align':0,'col::align':0,'col::char':0,'col::charoff':0,'col::span':0,'col::valign':0,'col::width':0,'colgroup::align':0,'colgroup::char':0,'colgroup::charoff':0,'colgroup::span':0,'colgroup::valign':0,'colgroup::width':0,'command::checked':0,'command::command':5,'command::disabled':0,'command::icon':1,'command::label':0,'command::radiogroup':0,'command::type':0,'data::value':0,'del::cite':1,'del::datetime':0,'details::open':0,'dir::compact':0,'div::align':0,'dl::compact':0,'fieldset::disabled':0,'font::color':0,'font::face':0,'font::size':0,'form::accept':0,'form::action':1,'form::autocomplete':0,'form::enctype':0,'form::method':0,'form::name':7,'form::novalidate':0,'form::onreset':2,'form::onsubmit':2,'form::target':10,'h1::align':0,'h2::align':0,'h3::align':0,'h4::align':0,'h5::align':0,'h6::align':0,'hr::align':0,'hr::noshade':0,'hr::size':0,'hr::width':0,'iframe::align':0,'iframe::frameborder':0,'iframe::height':0,'iframe::marginheight':0,'iframe::marginwidth':0,'iframe::width':0,'img::align':0,'img::alt':0,'img::border':0,'img::height':0,'img::hspace':0,'img::ismap':0,'img::name':7,'img::src':1,'img::usemap':11,'img::vspace':0,'img::width':0,'input::accept':0,'input::accesskey':0,'input::align':0,'input::alt':0,'input::autocomplete':0,'input::checked':0,'input::disabled':0,'input::inputmode':0,'input::ismap':0,'input::list':5,'input::max':0,'input::maxlength':0,'input::min':0,'input::multiple':0,'input::name':8,'input::onblur':2,'input::onchange':2,'input::onfocus':2,'input::onselect':2,'input::placeholder':0,'input::readonly':0,'input::required':0,'input::size':0,'input::src':1,'input::step':0,'input::tabindex':0,'input::type':0,'input::usemap':11,'input::value':0,'ins::cite':1,'ins::datetime':0,'label::accesskey':0,'label::for':5,'label::onblur':2,'label::onfocus':2,'legend::accesskey':0,'legend::align':0,'li::type':0,'li::value':0,'map::name':7,'menu::compact':0,'menu::label':0,'menu::type':0,'meter::high':0,'meter::low':0,'meter::max':0,'meter::min':0,'meter::value':0,'ol::compact':0,'ol::reversed':0,'ol::start':0,'ol::type':0,'optgroup::disabled':0,'optgroup::label':0,'option::disabled':0,'option::label':0,'option::selected':0,'option::value':0,'output::for':6,'output::name':8,'p::align':0,'pre::width':0,'progress::max':0,'progress::min':0,'progress::value':0,'q::cite':1,'select::autocomplete':0,'select::disabled':0,'select::multiple':0,'select::name':8,'select::onblur':2,'select::onchange':2,'select::onfocus':2,'select::required':0,'select::size':0,'select::tabindex':0,'source::type':0,'table::align':0,'table::bgcolor':0,'table::border':0,'table::cellpadding':0,'table::cellspacing':0,'table::frame':0,'table::rules':0,'table::summary':0,'table::width':0,'tbody::align':0,'tbody::char':0,'tbody::charoff':0,'tbody::valign':0,'td::abbr':0,'td::align':0,'td::axis':0,'td::bgcolor':0,'td::char':0,'td::charoff':0,'td::colspan':0,'td::headers':6,'td::height':0,'td::nowrap':0,'td::rowspan':0,'td::scope':0,'td::valign':0,'td::width':0,'textarea::accesskey':0,'textarea::autocomplete':0,'textarea::cols':0,'textarea::disabled':0,'textarea::inputmode':0,'textarea::name':8,'textarea::onblur':2,'textarea::onchange':2,'textarea::onfocus':2,'textarea::onselect':2,'textarea::placeholder':0,'textarea::readonly':0,'textarea::required':0,'textarea::rows':0,'textarea::tabindex':0,'textarea::wrap':0,'tfoot::align':0,'tfoot::char':0,'tfoot::charoff':0,'tfoot::valign':0,'th::abbr':0,'th::align':0,'th::axis':0,'th::bgcolor':0,'th::char':0,'th::charoff':0,'th::colspan':0,'th::headers':6,'th::height':0,'th::nowrap':0,'th::rowspan':0,'th::scope':0,'th::valign':0,'th::width':0,'thead::align':0,'thead::char':0,'thead::charoff':0,'thead::valign':0,'tr::align':0,'tr::bgcolor':0,'tr::char':0,'tr::charoff':0,'tr::valign':0,'track::default':0,'track::kind':0,'track::label':0,'track::srclang':0,'ul::compact':0,'ul::type':0,'video::controls':0,'video::height':0,'video::loop':0,'video::mediagroup':5,'video::muted':0,'video::poster':1,'video::preload':0,'video::src':1,'video::width':0},html4['ATTRIBS']=html4.ATTRIBS,html4.eflags={'OPTIONAL_ENDTAG':1,'EMPTY':2,'CDATA':4,'RCDATA':8,'UNSAFE':16,'FOLDABLE':32,'SCRIPT':64,'STYLE':128,'VIRTUALIZED':256},html4['eflags']=html4.eflags,html4.ELEMENTS={'a':0,'abbr':0,'acronym':0,'address':0,'applet':272,'area':2,'article':0,'aside':0,'audio':0,'b':0,'base':274,'basefont':274,'bdi':0,'bdo':0,'big':0,'blockquote':0,'body':305,'br':2,'button':0,'canvas':0,'caption':0,'center':0,'cite':0,'code':0,'col':2,'colgroup':1,'command':2,'data':0,'datalist':0,'dd':1,'del':0,'details':0,'dfn':0,'dialog':272,'dir':0,'div':0,'dl':0,'dt':1,'em':0,'fieldset':0,'figcaption':0,'figure':0,'font':0,'footer':0,'form':0,'frame':274,'frameset':272,'h1':0,'h2':0,'h3':0,'h4':0,'h5':0,'h6':0,'head':305,'header':0,'hgroup':0,'hr':2,'html':305,'i':0,'iframe':4,'img':2,'input':2,'ins':0,'isindex':274,'kbd':0,'keygen':274,'label':0,'legend':0,'li':1,'link':274,'map':0,'mark':0,'menu':0,'meta':274,'meter':0,'nav':0,'nobr':0,'noembed':276,'noframes':276,'noscript':276,'object':272,'ol':0,'optgroup':0,'option':1,'output':0,'p':1,'param':274,'pre':0,'progress':0,'q':0,'s':0,'samp':0,'script':84,'section':0,'select':0,'small':0,'source':2,'span':0,'strike':0,'strong':0,'style':148,'sub':0,'summary':0,'sup':0,'table':0,'tbody':1,'td':1,'textarea':8,'tfoot':1,'th':1,'thead':1,'time':0,'title':280,'tr':1,'track':2,'tt':0,'u':0,'ul':0,'var':0,'video':0,'wbr':2},html4['ELEMENTS']=html4.ELEMENTS,html4.ELEMENT_DOM_INTERFACES={'a':'HTMLAnchorElement','abbr':'HTMLElement','acronym':'HTMLElement','address':'HTMLElement','applet':'HTMLAppletElement','area':'HTMLAreaElement','article':'HTMLElement','aside':'HTMLElement','audio':'HTMLAudioElement','b':'HTMLElement','base':'HTMLBaseElement','basefont':'HTMLBaseFontElement','bdi':'HTMLElement','bdo':'HTMLElement','big':'HTMLElement','blockquote':'HTMLQuoteElement','body':'HTMLBodyElement','br':'HTMLBRElement','button':'HTMLButtonElement','canvas':'HTMLCanvasElement','caption':'HTMLTableCaptionElement','center':'HTMLElement','cite':'HTMLElement','code':'HTMLElement','col':'HTMLTableColElement','colgroup':'HTMLTableColElement','command':'HTMLCommandElement','data':'HTMLElement','datalist':'HTMLDataListElement','dd':'HTMLElement','del':'HTMLModElement','details':'HTMLDetailsElement','dfn':'HTMLElement','dialog':'HTMLDialogElement','dir':'HTMLDirectoryElement','div':'HTMLDivElement','dl':'HTMLDListElement','dt':'HTMLElement','em':'HTMLElement','fieldset':'HTMLFieldSetElement','figcaption':'HTMLElement','figure':'HTMLElement','font':'HTMLFontElement','footer':'HTMLElement','form':'HTMLFormElement','frame':'HTMLFrameElement','frameset':'HTMLFrameSetElement','h1':'HTMLHeadingElement','h2':'HTMLHeadingElement','h3':'HTMLHeadingElement','h4':'HTMLHeadingElement','h5':'HTMLHeadingElement','h6':'HTMLHeadingElement','head':'HTMLHeadElement','header':'HTMLElement','hgroup':'HTMLElement','hr':'HTMLHRElement','html':'HTMLHtmlElement','i':'HTMLElement','iframe':'HTMLIFrameElement','img':'HTMLImageElement','input':'HTMLInputElement','ins':'HTMLModElement','isindex':'HTMLUnknownElement','kbd':'HTMLElement','keygen':'HTMLKeygenElement','label':'HTMLLabelElement','legend':'HTMLLegendElement','li':'HTMLLIElement','link':'HTMLLinkElement','map':'HTMLMapElement','mark':'HTMLElement','menu':'HTMLMenuElement','meta':'HTMLMetaElement','meter':'HTMLMeterElement','nav':'HTMLElement','nobr':'HTMLElement','noembed':'HTMLElement','noframes':'HTMLElement','noscript':'HTMLElement','object':'HTMLObjectElement','ol':'HTMLOListElement','optgroup':'HTMLOptGroupElement','option':'HTMLOptionElement','output':'HTMLOutputElement','p':'HTMLParagraphElement','param':'HTMLParamElement','pre':'HTMLPreElement','progress':'HTMLProgressElement','q':'HTMLQuoteElement','s':'HTMLElement','samp':'HTMLElement','script':'HTMLScriptElement','section':'HTMLElement','select':'HTMLSelectElement','small':'HTMLElement','source':'HTMLSourceElement','span':'HTMLSpanElement','strike':'HTMLElement','strong':'HTMLElement','style':'HTMLStyleElement','sub':'HTMLElement','summary':'HTMLElement','sup':'HTMLElement','table':'HTMLTableElement','tbody':'HTMLTableSectionElement','td':'HTMLTableDataCellElement','textarea':'HTMLTextAreaElement','tfoot':'HTMLTableSectionElement','th':'HTMLTableHeaderCellElement','thead':'HTMLTableSectionElement','time':'HTMLTimeElement','title':'HTMLTitleElement','tr':'HTMLTableRowElement','track':'HTMLTrackElement','tt':'HTMLElement','u':'HTMLElement','ul':'HTMLUListElement','var':'HTMLElement','video':'HTMLVideoElement','wbr':'HTMLElement'},html4['ELEMENT_DOM_INTERFACES']=html4.ELEMENT_DOM_INTERFACES,html4.ueffects={'NOT_LOADED':0,'SAME_DOCUMENT':1,'NEW_DOCUMENT':2},html4['ueffects']=html4.ueffects,html4.URIEFFECTS={'a::href':2,'area::href':2,'audio::src':1,'blockquote::cite':0,'command::icon':1,'del::cite':0,'form::action':2,'img::src':1,'input::src':1,'ins::cite':0,'q::cite':0,'video::poster':1,'video::src':1},html4['URIEFFECTS']=html4.URIEFFECTS,html4.ltypes={'UNSANDBOXED':2,'SANDBOXED':1,'DATA':0},html4['ltypes']=html4.ltypes,html4.LOADERTYPES={'a::href':2,'area::href':2,'audio::src':2,'blockquote::cite':2,'command::icon':1,'del::cite':2,'form::action':2,'img::src':1,'input::src':1,'ins::cite':2,'q::cite':2,'video::poster':1,'video::src':2},html4['LOADERTYPES']=html4.LOADERTYPES,typeof
window!=='undefined'&&(window['html4']=html4),HtmlSchema=(function(){'use strict';function
HtmlSchema_(html4){var ELEMENTS=html4.ELEMENTS,ELEMENT_DOM_INTERFACES=html4.ELEMENT_DOM_INTERFACES,ATTRIBS=html4.ATTRIBS,URIEFFECTS=html4.URIEFFECTS,LOADERTYPES=html4.LOADERTYPES,OPTIONAL_ENDTAG=html4.eflags.OPTIONAL_ENDTAG,EMPTY=html4.eflags.EMPTY,CDATA=html4.eflags.CDATA,RCDATA=html4.eflags.RCDATA,UNSAFE=html4.eflags.UNSAFE,VIRTUALIZED=html4.eflags.VIRTUALIZED,unknownElementInterface='HTMLUnknownElement',hop=Object.prototype.hasOwnProperty,elemCache={},attrCache={},unknownElementEntry=cajaVM.def({'allowed':false,'isVirtualizedElementName':false,'shouldVirtualize':true,'empty':false,'optionalEndTag':false,'contentIsCDATA':false,'contentIsRCDATA':false,'domInterface':unknownElementInterface}),unknownAttributeEntry=cajaVM.def({'type':undefined,'loaderType':undefined,'uriEffect':undefined}),VIRTUALIZED_ELEMENT_NAME_RE,VIRTUALIZED_ELEMENT_PREFIX,htmlSchema,scriptInterfacesCache;function
makeAttributeFromSchema(attribKey){return cajaVM.def({'type':ATTRIBS[attribKey],'loaderType':LOADERTYPES[attribKey],'uriEffect':URIEFFECTS[attribKey]})}VIRTUALIZED_ELEMENT_NAME_RE=/^caja-v-(.*)$/i,VIRTUALIZED_ELEMENT_PREFIX='caja-v-';function
isVirtualizedElementName(elementName){return VIRTUALIZED_ELEMENT_NAME_RE.test(elementName)}function
realToVirtualElementName(elementName){var match=VIRTUALIZED_ELEMENT_NAME_RE.exec(elementName);return match?match[1]:elementName}function
virtualToRealElementName(elementName){return htmlSchema.element(elementName).shouldVirtualize?VIRTUALIZED_ELEMENT_PREFIX+elementName:elementName}return htmlSchema=cajaVM.def({'element':function(elementName){var
cacheKey,eflags,entry,unvirtEntry;if(typeof elementName!=='string')throw new Error(('non-string '+elementName+' got to htmlSchema'));return elementName=elementName.toLowerCase(),cacheKey=elementName+'$',cacheKey
in elemCache?elemCache[cacheKey]:(Object.prototype.hasOwnProperty.call(ELEMENTS,elementName)?(eflags=ELEMENTS[elementName],entry=cajaVM.def({'allowed':!(eflags&UNSAFE),'isVirtualizedElementName':false,'shouldVirtualize':!!(eflags&VIRTUALIZED),'empty':!!(eflags&EMPTY),'optionalEndTag':!!(eflags&OPTIONAL_ENDTAG),'contentIsCDATA':!!(eflags&CDATA),'contentIsRCDATA':!!(eflags&RCDATA),'domInterface':ELEMENT_DOM_INTERFACES[elementName]})):isVirtualizedElementName(elementName)?(unvirtEntry=htmlSchema.element(realToVirtualElementName(elementName)),entry=cajaVM.def({'allowed':true,'isVirtualizedElementName':true,'shouldVirtualize':false,'empty':false,'optionalEndTag':false,'contentIsCDATA':false,'contentIsRCDATA':false,'domInterface':unvirtEntry.domInterface})):(entry=unknownElementEntry),elemCache[cacheKey]=entry)},'attribute':function(elementName,attribName){var
attribKey,entry,wildKey;if(typeof elementName!=='string')throw new Error(('Domado internal: non-string '+elementName+' got to HtmlSchema'));if(typeof
attribName!=='string')throw new Error(('Domado internal: non-string '+attribName+' got to HtmlSchema'));return elementName=elementName.toLowerCase(),attribName=attribName.toLowerCase(),attribKey=elementName+'::'+attribName,attribKey
in attrCache?attrCache[attribKey]:(ATTRIBS.hasOwnProperty(attribKey)?(entry=makeAttributeFromSchema(attribKey)):(wildKey='*::'+attribName,ATTRIBS.hasOwnProperty(wildKey)?(entry=makeAttributeFromSchema(wildKey)):(entry=unknownAttributeEntry)),attrCache[attribKey]=entry)},'isVirtualizedElementName':isVirtualizedElementName,'realToVirtualElementName':realToVirtualElementName,'virtualToRealElementName':virtualToRealElementName,'getAllKnownScriptInterfaces':function(){var
el,table;if(!scriptInterfacesCache){table={};for(el in ELEMENT_DOM_INTERFACES)hop.call(ELEMENT_DOM_INTERFACES,el)&&(table[ELEMENT_DOM_INTERFACES[el]]=true);scriptInterfacesCache=cajaVM.def(Object.getOwnPropertyNames(table))}return scriptInterfacesCache}}),htmlSchema}return HtmlSchema_})(),htmlSchema=new
HtmlSchema(html4),typeof window!=='undefined'&&(window['HtmlSchema']=HtmlSchema,window['htmlSchema']=htmlSchema);if('I'.toLowerCase()!=='i')throw'I/i problem';html=(function(html4){var
ALLOWED_URI_SCHEMES,ATTR_RE,EFLAGS_TEXT,ENTITIES,ENTITY_RE_1,ENTITY_RE_2,ampRe,continuationMarker,cssSchema,decimalEscapeRe,endTagRe,entityLookupElement,gtRe,hexEscapeRe,html,looseAmpRe,ltRe,nulRe,parseCssDeclarations,quotRe,safeEntityNameRe,sanitizeCssProperty,splitWillCapture;'undefined'!==typeof
window&&(parseCssDeclarations=window['parseCssDeclarations'],sanitizeCssProperty=window['sanitizeCssProperty'],cssSchema=window['cssSchema']),ENTITIES={'lt':'\x3c','LT':'\x3c','gt':'\x3e','GT':'\x3e','amp':'\x26','AMP':'\x26','quot':'\"','apos':'\'','nbsp':'\xa0'},decimalEscapeRe=/^#(\d+)$/,hexEscapeRe=/^#x([0-9A-Fa-f]+)$/,safeEntityNameRe=/^[A-Za-z][A-za-z0-9]+$/,entityLookupElement='undefined'!==typeof
window&&window['document']?window['document'].createElement('textarea'):null;function
lookupEntity(name){var m,text;return ENTITIES.hasOwnProperty(name)?ENTITIES[name]:(m=name.match(decimalEscapeRe),m?String.fromCharCode(parseInt(m[1],10)):(m=name.match(hexEscapeRe))?String.fromCharCode(parseInt(m[1],16)):entityLookupElement&&safeEntityNameRe.test(name)?(entityLookupElement.innerHTML='\x26'+name+';',text=entityLookupElement.textContent,ENTITIES[name]=text,text):'\x26'+name+';')}function
decodeOneEntity(_,name){return lookupEntity(name)}nulRe=/\0/g;function stripNULs(s){return s.replace(nulRe,'')}ENTITY_RE_1=/\x26(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,ENTITY_RE_2=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/;function
unescapeEntities(s){return s.replace(ENTITY_RE_1,decodeOneEntity)}ampRe=/\x26/g,looseAmpRe=/\x26([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,ltRe=/[\x3c]/g,gtRe=/\x3e/g,quotRe=/\"/g;function
escapeAttrib(s){return(''+s).replace(ampRe,'\x26amp;').replace(ltRe,'\x26lt;').replace(gtRe,'\x26gt;').replace(quotRe,'\x26#34;')}function
normalizeRCData(rcdata){return rcdata.replace(looseAmpRe,'\x26amp;$1').replace(ltRe,'\x26lt;').replace(gtRe,'\x26gt;')}ATTR_RE=new
RegExp('^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(\')[^\']*(\'|$)|(?=[a-z][-\\w]*\\s*=)|[^\"\'\\s]*))?','i'),splitWillCapture='a,b'.split(/(,)/).length===3,EFLAGS_TEXT=html4.eflags['CDATA']|html4.eflags['RCDATA'];function
makeSaxParser(handler){var hcopy={'cdata':handler.cdata||handler['cdata'],'comment':handler.comment||handler['comment'],'endDoc':handler.endDoc||handler['endDoc'],'endTag':handler.endTag||handler['endTag'],'pcdata':handler.pcdata||handler['pcdata'],'rcdata':handler.rcdata||handler['rcdata'],'startDoc':handler.startDoc||handler['startDoc'],'startTag':handler.startTag||handler['startTag']};return function(htmlText,param){return parse(htmlText,hcopy,param)}}continuationMarker={};function
parse(htmlText,handler,param){var parts=htmlSplit(htmlText),state={'noMoreGT':false,'noMoreEndComments':false},m,p,tagName;parseCPS(handler,parts,0,state,param)}function
continuationMaker(h,parts,initial,state,param){return function(){parseCPS(h,parts,initial,state,param)}}function
parseCPS(h,parts,initial,state,param){var comment,current,eflags,end,m,next,p,pos,tag,tagName;try{h.startDoc&&initial==0&&h.startDoc(param);for(pos=initial,end=parts.length;pos<end;){current=parts[pos++],next=parts[pos];switch(current){case'\x26':ENTITY_RE_2.test(next)?(h.pcdata&&h.pcdata('\x26'+next,param,continuationMarker,continuationMaker(h,parts,pos,state,param)),++pos):h.pcdata&&h.pcdata('\x26amp;',param,continuationMarker,continuationMaker(h,parts,pos,state,param));break;case'\x3c/':(m=/^([-\w:]+)[^\'\"]*/.exec(next))?m[0].length===next.length&&parts[pos+1]==='\x3e'?(pos+=2,tagName=m[1].toLowerCase(),h.endTag&&h.endTag(tagName,param,continuationMarker,continuationMaker(h,parts,pos,state,param))):(pos=parseEndTag(parts,pos,h,param,continuationMarker,state)):h.pcdata&&h.pcdata('\x26lt;/',param,continuationMarker,continuationMaker(h,parts,pos,state,param));break;case'\x3c':(m=/^([-\w:]+)\s*\/?/.exec(next))?m[0].length===next.length&&parts[pos+1]==='\x3e'?(pos+=2,tagName=m[1].toLowerCase(),h.startTag&&h.startTag(tagName,[],param,continuationMarker,continuationMaker(h,parts,pos,state,param)),eflags=html4.ELEMENTS[tagName],eflags&EFLAGS_TEXT&&(tag={'name':tagName,'next':pos,'eflags':eflags},pos=parseText(parts,tag,h,param,continuationMarker,state))):(pos=parseStartTag(parts,pos,h,param,continuationMarker,state)):h.pcdata&&h.pcdata('\x26lt;',param,continuationMarker,continuationMaker(h,parts,pos,state,param));break;case'\x3c!--':if(!state.noMoreEndComments){for(p=pos+1;p<end;++p)if(parts[p]==='\x3e'&&/--$/.test(parts[p-1]))break;p<end?(h.comment&&(comment=parts.slice(pos,p).join(''),h.comment(comment.substr(0,comment.length-2),param,continuationMarker,continuationMaker(h,parts,p+1,state,param))),pos=p+1):(state.noMoreEndComments=true)}state.noMoreEndComments&&(h.pcdata&&h.pcdata('\x26lt;!--',param,continuationMarker,continuationMaker(h,parts,pos,state,param)));break;case'\x3c!':if(!/^\w/.test(next))h.pcdata&&h.pcdata('\x26lt;!',param,continuationMarker,continuationMaker(h,parts,pos,state,param));else{if(!state.noMoreGT){for(p=pos+1;p<end;++p)if(parts[p]==='\x3e')break;p<end?(pos=p+1):(state.noMoreGT=true)}state.noMoreGT&&(h.pcdata&&h.pcdata('\x26lt;!',param,continuationMarker,continuationMaker(h,parts,pos,state,param)))}break;case'\x3c?':if(!state.noMoreGT){for(p=pos+1;p<end;++p)if(parts[p]==='\x3e')break;p<end?(pos=p+1):(state.noMoreGT=true)}state.noMoreGT&&(h.pcdata&&h.pcdata('\x26lt;?',param,continuationMarker,continuationMaker(h,parts,pos,state,param)));break;case'\x3e':h.pcdata&&h.pcdata('\x26gt;',param,continuationMarker,continuationMaker(h,parts,pos,state,param));break;case'':break;default:h.pcdata&&h.pcdata(current,param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}h.endDoc&&h.endDoc(param)}catch(e){if(e!==continuationMarker)throw e}}function
htmlSplit(str){var re=/(\x3c\/|\x3c\!--|\x3c[!?]|[\x26\x3c\x3e])/g,lastPos,m,parts;str+='';if(splitWillCapture)return str.split(re);parts=[],lastPos=0;while((m=re.exec(str))!==null)parts.push(str.substring(lastPos,m.index)),parts.push(m[0]),lastPos=m.index+m[0].length;return parts.push(str.substring(lastPos)),parts}function
parseEndTag(parts,pos,h,param,continuationMarker,state){var tag=parseTagAndAttrs(parts,pos);return tag?(h.endTag&&h.endTag(tag.name,param,continuationMarker,continuationMaker(h,parts,pos,state,param)),tag.next):parts.length}function
parseStartTag(parts,pos,h,param,continuationMarker,state){var tag=parseTagAndAttrs(parts,pos);return tag?(h.startTag&&h.startTag(tag.name,tag.attrs,param,continuationMarker,continuationMaker(h,parts,tag.next,state,param)),tag.eflags&EFLAGS_TEXT?parseText(parts,tag,h,param,continuationMarker,state):tag.next):parts.length}endTagRe={};function
parseText(parts,tag,h,param,continuationMarker,state){var end=parts.length,buf,first,p,re;endTagRe.hasOwnProperty(tag.name)||(endTagRe[tag.name]=new
RegExp(('^'+tag.name+'(?:[\\s\\/]|$)'),'i')),re=endTagRe[tag.name],first=tag.next,p=tag.next+1;for(;p<end;++p)if(parts[p-1]==='\x3c/'&&re.test(parts[p]))break;p<end&&(p-=1),buf=parts.slice(first,p).join('');if(tag.eflags&html4.eflags['CDATA'])h.cdata&&h.cdata(buf,param,continuationMarker,continuationMaker(h,parts,p,state,param));else
if(tag.eflags&html4.eflags['RCDATA'])h.rcdata&&h.rcdata(normalizeRCData(buf),param,continuationMarker,continuationMaker(h,parts,p,state,param));else
throw new Error('bug');return p}function parseTagAndAttrs(parts,pos){var m=/^([-\w:]+)/.exec(parts[pos]),tag={},aName,aValue,abuf,attrs,buf,end,p,quote,sawQuote;tag.name=m[1].toLowerCase(),tag.eflags=html4.ELEMENTS[tag.name],buf=parts[pos].substr(m[0].length),p=pos+1,end=parts.length;for(;p<end;++p){if(parts[p]==='\x3e')break;buf+=parts[p]}if(end<=p)return;attrs=[];while(buf!==''){m=ATTR_RE.exec(buf);if(!m)buf=buf.replace(/^[\s\S][^a-z\s]*/,'');else
if(m[4]&&!m[5]||m[6]&&!m[7]){quote=m[4]||m[6],sawQuote=false,abuf=[buf,parts[p++]];for(;p<end;++p){if(sawQuote){if(parts[p]==='\x3e')break}else
if(0<=parts[p].indexOf(quote))sawQuote=true;abuf.push(parts[p])}if(end<=p)break;buf=abuf.join('');continue}else
aName=m[1].toLowerCase(),aValue=m[2]?decodeValue(m[3]):'',attrs.push(aName,aValue),buf=buf.substr(m[0].length)}return tag.attrs=attrs,tag.next=p+1,tag}function
decodeValue(v){var q=v.charCodeAt(0);return(q===34||q===39)&&(v=v.substr(1,v.length-2)),unescapeEntities(stripNULs(v))}function
makeHtmlSanitizer(tagPolicy){var emit=function(text,out){ignoring||out.push(text)},ignoring,stack;return makeSaxParser({'startDoc':function(_){stack=[],ignoring=false},'startTag':function(tagNameOrig,attribs,out){var
attribName,decision,eflagsOrig,eflagsRep,i,n,onStack,tagNameRep,value;if(ignoring)return;if(!html4.ELEMENTS.hasOwnProperty(tagNameOrig))return;eflagsOrig=html4.ELEMENTS[tagNameOrig];if(eflagsOrig&html4.eflags['FOLDABLE'])return;decision=tagPolicy(tagNameOrig,attribs);if(!decision)return ignoring=!(eflagsOrig&html4.eflags['EMPTY']),void
0;else if(typeof decision!=='object')throw new Error('tagPolicy did not return object (old API?)');if('attribs'in
decision)attribs=decision['attribs'];else throw new Error('tagPolicy gave no attribs');'tagName'in
decision?(tagNameRep=decision['tagName'],eflagsRep=html4.ELEMENTS[tagNameRep]):(tagNameRep=tagNameOrig,eflagsRep=eflagsOrig),eflagsOrig&html4.eflags['OPTIONAL_ENDTAG']&&(onStack=stack[stack.length-1],onStack&&onStack.orig===tagNameOrig&&(onStack.rep!==tagNameRep||tagNameOrig!==tagNameRep)&&out.push('\x3c/',onStack.rep,'\x3e')),eflagsOrig&html4.eflags['EMPTY']||stack.push({'orig':tagNameOrig,'rep':tagNameRep}),out.push('\x3c',tagNameRep);for(i=0,n=attribs.length;i<n;i+=2)attribName=attribs[i],value=attribs[i+1],value!==null&&value!==void
0&&out.push(' ',attribName,'=\"',escapeAttrib(value),'\"');out.push('\x3e'),eflagsOrig&html4.eflags['EMPTY']&&!(eflagsRep&html4.eflags['EMPTY'])&&out.push('\x3c/',tagNameRep,'\x3e')},'endTag':function(tagName,out){var
eflags,i,index,stackElOrigTag,stackElRepTag;if(ignoring)return ignoring=false,void
0;if(!html4.ELEMENTS.hasOwnProperty(tagName))return;eflags=html4.ELEMENTS[tagName];if(!(eflags&(html4.eflags['EMPTY']|html4.eflags['FOLDABLE']))){if(eflags&html4.eflags['OPTIONAL_ENDTAG'])for(index=stack.length;--index>=0;){stackElOrigTag=stack[index].orig;if(stackElOrigTag===tagName)break;if(!(html4.ELEMENTS[stackElOrigTag]&html4.eflags['OPTIONAL_ENDTAG']))return}else
for(index=stack.length;--index>=0;)if(stack[index].orig===tagName)break;if(index<0)return;for(i=stack.length;--i>index;)stackElRepTag=stack[i].rep,html4.ELEMENTS[stackElRepTag]&html4.eflags['OPTIONAL_ENDTAG']||out.push('\x3c/',stackElRepTag,'\x3e');index<stack.length&&(tagName=stack[index].rep),stack.length=index,out.push('\x3c/',tagName,'\x3e')}},'pcdata':emit,'rcdata':emit,'cdata':emit,'endDoc':function(out){for(;stack.length;--stack.length)out.push('\x3c/',stack[stack.length-1].rep,'\x3e')}})}ALLOWED_URI_SCHEMES=/^(?:https?|mailto)$/i;function
safeUri(uri,effect,ltype,hints,naiveUriRewriter){var parsed,safe;if(!naiveUriRewriter)return null;try{parsed=URI.parse(''+uri);if(parsed){if(!parsed.hasScheme()||ALLOWED_URI_SCHEMES.test(parsed.getScheme()))return safe=naiveUriRewriter(parsed,effect,ltype,hints),safe?safe.toString():null}}catch(e){return null}return null}function
log(logger,tagName,attribName,oldValue,newValue){var changed;attribName||logger(tagName+' removed',{'change':'removed','tagName':tagName}),oldValue!==newValue&&(changed='changed',oldValue&&!newValue?(changed='removed'):!oldValue&&newValue&&(changed='added'),logger(tagName+'.'+attribName+' '+changed,{'change':changed,'tagName':tagName,'attribName':attribName,'oldValue':oldValue,'newValue':newValue}))}function
lookupAttribute(map,tagName,attribName){var attribKey=tagName+'::'+attribName;return map.hasOwnProperty(attribKey)?map[attribKey]:(attribKey='*::'+attribName,map.hasOwnProperty(attribKey)?map[attribKey]:void
0)}function getAttributeType(tagName,attribName){return lookupAttribute(html4.ATTRIBS,tagName,attribName)}function
getLoaderType(tagName,attribName){return lookupAttribute(html4.LOADERTYPES,tagName,attribName)}function
getUriEffect(tagName,attribName){return lookupAttribute(html4.URIEFFECTS,tagName,attribName)}function
sanitizeAttribs(tagName,attribs,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){var
attribKey,attribName,atype,i,oldValue,sanitizedDeclarations,value;for(i=0;i<attribs.length;i+=2){attribName=attribs[i],value=attribs[i+1],oldValue=value,atype=null,((attribKey=tagName+'::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey)))&&(atype=html4.ATTRIBS[attribKey]);if(atype!==null)switch(atype){case
html4.atype['NONE']:break;case html4.atype['SCRIPT']:value=null,opt_logger&&log(opt_logger,tagName,attribName,oldValue,value);break;case
html4.atype['STYLE']:if('undefined'===typeof parseCssDeclarations){value=null,opt_logger&&log(opt_logger,tagName,attribName,oldValue,value);break}sanitizedDeclarations=[],parseCssDeclarations(value,{'declaration':function(property,tokens){var
normProp=property.toLowerCase();sanitizeCssProperty(normProp,tokens,opt_naiveUriRewriter?function(url){return safeUri(url,html4.ueffects.SAME_DOCUMENT,html4.ltypes.SANDBOXED,{'TYPE':'CSS','CSS_PROP':normProp},opt_naiveUriRewriter)}:null),tokens.length&&sanitizedDeclarations.push(normProp+': '+tokens.join(' '))}}),value=sanitizedDeclarations.length>0?sanitizedDeclarations.join(' ; '):null,opt_logger&&log(opt_logger,tagName,attribName,oldValue,value);break;case
html4.atype['ID']:case html4.atype['IDREF']:case html4.atype['IDREFS']:case html4.atype['GLOBAL_NAME']:case
html4.atype['LOCAL_NAME']:case html4.atype['CLASSES']:value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value,opt_logger&&log(opt_logger,tagName,attribName,oldValue,value);break;case
html4.atype['URI']:value=safeUri(value,getUriEffect(tagName,attribName),getLoaderType(tagName,attribName),{'TYPE':'MARKUP','XML_ATTR':attribName,'XML_TAG':tagName},opt_naiveUriRewriter),opt_logger&&log(opt_logger,tagName,attribName,oldValue,value);break;case
html4.atype['URI_FRAGMENT']:value&&'#'===value.charAt(0)?(value=value.substring(1),value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value,value!==null&&value!==void
0&&(value='#'+value)):(value=null),opt_logger&&log(opt_logger,tagName,attribName,oldValue,value);break;default:value=null,opt_logger&&log(opt_logger,tagName,attribName,oldValue,value)}else
value=null,opt_logger&&log(opt_logger,tagName,attribName,oldValue,value);attribs[i+1]=value}return attribs}function
makeTagPolicy(opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){return function(tagName,attribs){if(!(html4.ELEMENTS[tagName]&html4.eflags['UNSAFE']))return{'attribs':sanitizeAttribs(tagName,attribs,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger)};opt_logger&&log(opt_logger,tagName,undefined,undefined,undefined)}}function
sanitizeWithPolicy(inputHtml,tagPolicy){var outputArray=[];return makeHtmlSanitizer(tagPolicy)(inputHtml,outputArray),outputArray.join('')}function
sanitize(inputHtml,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){var tagPolicy=makeTagPolicy(opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger);return sanitizeWithPolicy(inputHtml,tagPolicy)}return html={},html.escapeAttrib=html['escapeAttrib']=escapeAttrib,html.makeHtmlSanitizer=html['makeHtmlSanitizer']=makeHtmlSanitizer,html.makeSaxParser=html['makeSaxParser']=makeSaxParser,html.makeTagPolicy=html['makeTagPolicy']=makeTagPolicy,html.normalizeRCData=html['normalizeRCData']=normalizeRCData,html.sanitize=html['sanitize']=sanitize,html.sanitizeAttribs=html['sanitizeAttribs']=sanitizeAttribs,html.sanitizeWithPolicy=html['sanitizeWithPolicy']=sanitizeWithPolicy,html.unescapeEntities=html['unescapeEntities']=unescapeEntities,html})(html4),html_sanitize=html['sanitize'],typeof
window!=='undefined'&&(window['html']=html,window['html_sanitize']=html_sanitize);if('I'.toLowerCase()!=='i')throw'I/i problem';function
HtmlEmitter(base,opt_mitigatingUrlRewriter,opt_domicile,opt_guestGlobal){var HTML5_WHITESPACE_RE,UNSATISFIED,arraySplice,bridal,delayedScripts,detached,idMap,insertionPoint,notifyEOF,targetDocument,updateInsertionMode;if(!base)throw new
Error('Host page error: Virtual document element was not provided');targetDocument=base.nodeType===9?base:base.ownerDocument,insertionPoint=base,bridal=bridalMaker(targetDocument),detached=null,idMap=null,arraySplice=Array.prototype.splice,HTML5_WHITESPACE_RE=/^[\u0009\u000a\u000c\u000d\u0020]*$/;function
buildIdMap(){var desc,descs,i,id;idMap={},descs=base.getElementsByTagName('*');for(i=0;desc=descs[i];++i)id=desc.getAttributeNode('id'),id&&id.value&&(idMap[id.value+' map entry']=desc)}function
byId(id){var node;idMap||buildIdMap(),node=idMap[id+' map entry'];if(node)return node;for(;node=targetDocument.getElementById(id);){if(base.contains?base.contains(node):base.compareDocumentPosition(node)&16)return idMap[id+' map entry']=node,node;node.id=''}return null}function
emitStatic(htmlString){var dummy;if(!insertionPoint)throw new Error('Host page error: HtmlEmitter.emitStatic called after document finish()ed');if(base.nodeType===1)base.innerHTML+=htmlString;else{dummy=targetDocument.createElement('div'),dummy.innerHTML=htmlString;while(dummy.firstChild)base.appendChild(dummy.firstChild)}updateInsertionMode()}function
detachOnto(limit,out){var anc,child,greatAnc,next,sibling;for(child=limit.firstChild;child;child=next)next=child.nextSibling,out.push(child,limit),limit.removeChild(child);for(anc=limit;anc&&anc!==base;anc=greatAnc){greatAnc=anc.parentNode;for(sibling=anc.nextSibling;sibling;sibling=next)next=sibling.nextSibling,out.push(sibling,greatAnc),greatAnc.removeChild(sibling)}}function
attach(id){var limit=byId(id),isLimitClosed,limitAnc,nConsumed,newDetached,parent,reattAnc,reattach;if(detached){newDetached=[0,0],detachOnto(limit,newDetached),limitAnc=limit;for(;parent=limitAnc.parentNode;)limitAnc=parent;nConsumed=0;while(nConsumed<detached.length){reattach=detached[nConsumed],reattAnc=reattach;for(;reattAnc.parentNode;reattAnc=reattAnc.parentNode);detached[nConsumed+1].appendChild(reattach),nConsumed+=2;if(reattAnc===limitAnc)break}newDetached[1]=nConsumed,arraySplice.apply(detached,newDetached)}else
detached=[],detachOnto(limit,detached);return isLimitClosed=detached[1]!==limit,insertionPoint=isLimitClosed?limit.parentNode:limit,updateInsertionMode(),limit}function
discard(placeholder){placeholder.parentNode.removeChild(placeholder)}function finish(){var
i,n;if(detached)for(i=0,n=detached.length;i<n;i+=2)detached[i+1].appendChild(detached[i]);return idMap=detached=null,insertionPoint=hasChild(base,'html')||base,updateInsertionMode(),notifyEOF(),insertionPoint=null,this}function
virtTagName(el){return el?htmlSchema.realToVirtualElementName(el.tagName).toLowerCase():''}function
hasChild(el,name){var child;if(!el)return false;for(child=el.firstChild;child;child=child.nextSibling)if(child.nodeType===1&&virtTagName(child)===name)return child;return false}function
signalLoaded(){var domicile=opt_domicile;return domicile&&delayScript(function(){domicile.signalLoaded()}),execDelayedScripts(),this}delayedScripts=[],UNSATISFIED={};function
delayScript(fn){delayedScripts?delayedScripts.push(fn):fn()}function execDelayedScripts(){var
delayedScript,i;if(delayedScripts){for(i=0;i<delayedScripts.length;++i){delayedScript=delayedScripts[i];if(!delayedScript)continue;if(delayedScript===UNSATISFIED)return;delayedScripts[i]=null;try{delayedScript()}catch(_){}}delayedScripts=null}}function
handleEmbed(params){if(!opt_guestGlobal)return;if(!opt_guestGlobal.cajaHandleEmbed)return;opt_guestGlobal.cajaHandleEmbed(params)}this.byId=byId,this.attach=attach,this.discard=discard,this.emitStatic=emitStatic,this.finish=finish,this.signalLoaded=signalLoaded,this.setAttr=bridal.setAttribute,this.rmAttr=function(el,attr){return el.removeAttribute(attr)},this.handleEmbed=handleEmbed,(function(domicile){var
cdataContent,depth,documentLoaded,documentWriter,htmlParser,insertionMode,insertionModes,originalInsertionMode,pendingDelayed,pendingExternal,pendingMedia,tameDocWrite;if(!domicile||domicile.writeHook)return updateInsertionMode=notifyEOF=function(){},void
0;function concat(items){return Array.prototype.join.call(items,'')}function evaluateUntrustedScript(scriptBaseUri,scriptInnerText,scriptNode,opt_delayed,opt_mitigate){var
cajaVM,compileModule,compiledModule,errorMessage;if(!opt_guestGlobal)return;if(opt_delayed)return delayScript(function(){evaluateUntrustedScript(scriptBaseUri,scriptInnerText,scriptNode,false,opt_mitigate)}),void
0;errorMessage='SCRIPT element evaluation failed',cajaVM=opt_guestGlobal.cajaVM;if(cajaVM){compileModule=cajaVM.compileModule;if(compileModule)try{compiledModule=compileModule(scriptInnerText,opt_mitigate);try{return compiledModule(opt_domicile.window),domicile.fireVirtualEvent(scriptNode,'Event','load'),void
0}catch(runningEx){errorMessage=String(runningEx)}}catch(compileEx){errorMessage=String(compileEx&&(compileEx.message||compileEx.description))||errorMessage}}domicile.fireVirtualEvent(scriptNode,'Event','error');try{opt_domicile.window.onerror(errorMessage,scriptBaseUri,1)}catch(_){}return errorMessage}function
makeCssUriHandler(baseUri,method,mime){return function(uri,prop){return domicile&&domicile[method]?domicile[method](URI.utils.resolve(baseUri,uri),mime,prop):void
0}}function makeCssUriSanitizer(baseUri){return makeCssUriHandler(baseUri,'cssUri','image/*')}function
makeCssUriFetcher(baseUri){return makeCssUriHandler(baseUri,'fetchUri','text/css')}function
defineUntrustedStylesheet(styleBaseUri,cssText,styleElement,outerMediaQuery){var
safeCss,sanitized;function emitCss(text){outerMediaQuery&&(text='@media '+outerMediaQuery+' {\n'+text+'\n}'),styleElement.appendChild(styleElement.ownerDocument.createTextNode(text+'\n'))}function
continuation(sanitizeStyle,moreToCome){!moreToCome&&safeCss&&emitCss(safeCss.toString())}domicile&&domicile.emitCss&&(sanitized=sanitizeStylesheetWithExternals(styleBaseUri,cssText,domicile.virtualization,makeCssUriSanitizer(styleBaseUri),makeCssUriFetcher(styleBaseUri),continuation),safeCss=sanitized.result,continuation(sanitized.result,sanitized.moreToCome))}function
resolveUntrustedExternal(url,mime,marker,continuation){if(domicile&&domicile.fetchUri){domicile.fetchUri(url,mime,function(result){result&&result.html?continuation(url,result.html):continuation(url,null)});if(marker)throw marker}}function
defineUntrustedExternalStylesheet(url,styleElement,marker,media,continuation){resolveUntrustedExternal(url,'text/css',marker,function(url,result){result!==null&&defineUntrustedStylesheet(url,result,styleElement,media),continuation()})}function
getMitigatedUrl(url){var p;return opt_mitigatingUrlRewriter?'function'===typeof opt_mitigatingUrlRewriter?(p=opt_mitigatingUrlRewriter(URI.parse(url)),p?String(p):null):null:null}function
evaluateUntrustedExternalScript(url,scriptNode,marker,opt_continuation,delayed){var
proxiedUrl=getMitigatedUrl(url),handler,idx,mitigateOpts;proxiedUrl?(mitigateOpts={'parseProgram':true,'rewriteTopLevelVars':false,'rewriteTopLevelFuncs':false,'rewriteTypeOf':false},url=proxiedUrl):(mitigateOpts=undefined),delayed&&delayedScripts?(idx=delayedScripts.length,delayedScripts[idx]=UNSATISFIED,handler=function(url,src){delayedScripts[idx]=function(){evaluateUntrustedScript(url,src,scriptNode,true,mitigateOpts)},execDelayedScripts()}):(handler=function(uri,src,opt_delayed){evaluateUntrustedScript(uri,src,scriptNode,opt_delayed,mitigateOpts)});function
outerHandler(uri,src,opt_delayed){handler(uri,src===null?'throw new Error(\"not loaded\")':src,opt_delayed),opt_continuation&&opt_continuation()}resolveUntrustedExternal(url,'text/javascript',marker,outerHandler)}function
finishCdata(){var result={'text':cdataContent.join(''),'external':pendingExternal,'delayed':pendingDelayed};return cdataContent.length=0,pendingExternal=undefined,pendingDelayed=false,result}function
lookupAttr(attribs,attr){var srcIndex=0;do srcIndex=attribs.indexOf(attr,srcIndex)+1;while(srcIndex&&!(srcIndex&1));return srcIndex?attribs[srcIndex]:undefined}function
resolveUriRelativeToDocument(href){return domicile&&domicile.pseudoLocation&&domicile.pseudoLocation.href?URI.utils.resolve(domicile.pseudoLocation.href,href):href}cdataContent=[],pendingExternal=undefined,pendingDelayed=false,pendingMedia='',documentLoaded=undefined,depth=0;function
normalInsert(virtualTagName,attribs){var realTagName=htmlSchema.virtualToRealElementName(virtualTagName),slowPathAttribs=[],el,i,rSchemaEl,vSchemaEl;if(opt_domicile&&virtualTagName==='body')for(i=attribs.length-2;i>=0;i-=2)(/^on/i.test(attribs[i])&&slowPathAttribs.push.apply(slowPathAttribs,attribs.splice(i,2)));vSchemaEl=htmlSchema.element(virtualTagName),rSchemaEl=htmlSchema.element(realTagName),domicile.sanitizeAttrs(realTagName,attribs);if(!rSchemaEl.allowed&&realTagName!=='script'&&realTagName!=='style')throw new
Error(('HtmlEmitter internal: unsafe element '+realTagName+' slipped through virtualization!'));el=bridal.createElement(realTagName,attribs),vSchemaEl.optionalEndTag&&el.tagName===insertionPoint.tagName&&documentWriter.endTag(el.tagName.toLowerCase(),true),insertionPoint.appendChild(el),vSchemaEl.empty||(insertionPoint=el);for(i=slowPathAttribs.length-2;i>=0;i-=2)opt_domicile.tameNode(el).setAttribute(slowPathAttribs[i],slowPathAttribs[i+1])}function
normalEndTag(tagName){var anc,p;tagName=htmlSchema.virtualToRealElementName(tagName).toUpperCase(),anc=insertionPoint;while(anc!==base&&!/\bvdoc-container___\b/.test(anc.className)){p=anc.parentNode;if(anc.tagName===tagName)return insertionPoint=p,void
0;anc=p}}function normalText(text){var realTagName=insertionPoint.tagName;if(!htmlSchema.element(realTagName).allowed)throw new
Error(('HtmlEmitter internal: attempted to add text to unsafe element '+realTagName+'!'));insertionPoint.appendChild(targetDocument.createTextNode(html.unescapeEntities(text)))}function
stopParsing(){insertionPoint=null}function isHtml5NonWhitespace(text){return!HTML5_WHITESPACE_RE.test(text)}insertionModes={'initial':{'toString':function(){return'initial'},'startTag':function(tagName,attribs){insertionMode=insertionModes.beforeHtml,insertionMode.startTag.apply(undefined,arguments)},'endTag':function(tagName){insertionMode=insertionModes.beforeHtml,insertionMode.endTag.apply(undefined,arguments)},'text':function(text){isHtml5NonWhitespace(text)&&(insertionMode=insertionModes.beforeHtml,insertionMode.text.apply(undefined,arguments))},'endOfFile':function(){insertionMode=insertionModes.beforeHtml,insertionMode.endOfFile()}},'beforeHtml':{'toString':function(){return'before html'},'startTag':function(tagName,attribs){tagName==='html'?(normalInsert(tagName,attribs),insertionMode=insertionModes.beforeHead):(normalInsert('html',[]),insertionMode=insertionModes.beforeHead,insertionMode.startTag.apply(undefined,arguments))},'endTag':function(tagName){if(tagName==='head'||tagName==='body'||tagName==='html'||tagName==='br')normalInsert('html',[]),insertionMode=insertionModes.beforeHead,insertionMode.endTag.apply(undefined,arguments)},'text':function(text){isHtml5NonWhitespace(text)&&(normalInsert('html',[]),insertionMode=insertionModes.beforeHead,insertionMode.text.apply(undefined,arguments))},'endOfFile':function(){normalInsert('html',[]),insertionMode=insertionModes.beforeHead,insertionMode.endOfFile()}},'beforeHead':{'toString':function(){return'before head'},'startTag':function(tagName,attribs){tagName==='html'?insertionModes.inBody.startTag.apply(undefined,arguments):tagName==='head'?(normalInsert(tagName,attribs),insertionMode=insertionModes.inHead):(insertionMode.startTag('head',[]),insertionMode.startTag.apply(undefined,arguments))},'endTag':function(tagName){if(tagName==='head'||tagName==='body'||tagName==='html'||tagName==='br')insertionMode.startTag('head',[]),insertionMode.endTag.apply(undefined,arguments)},'text':function(text){isHtml5NonWhitespace(text)&&(insertionMode.startTag('head',[]),insertionMode.text.apply(undefined,arguments))},'endOfFile':function(){insertionMode.startTag('head',[]),insertionMode.endOfFile()}},'inHead':{'toString':function(){return'in head'},'startTag':function(tagName,attribs,marker,continuation){var
href,media,rel,rels,res,scriptSrc,styleElement;if(tagName==='html')insertionModes.inBody.startTag.apply(undefined,arguments);else
if(tagName==='base'||tagName==='basefont'||tagName==='bgsound'||tagName==='link')tagName==='link'&&(rel=lookupAttr(attribs,'rel'),href=lookupAttr(attribs,'href'),rels=rel?String(rel).toLowerCase().split(' '):[],href&&rels.indexOf('stylesheet')>=0&&(res=resolveUriRelativeToDocument(href),media=lookupAttr(attribs,'media'),media=media?sanitizeMediaQuery(lexCss(media)):'',styleElement=insertionPoint.ownerDocument.createElement('style'),insertionPoint.appendChild(styleElement),defineUntrustedExternalStylesheet(res,styleElement,marker,media,continuation))),normalInsert(tagName,attribs);else
if(tagName==='command'||tagName==='meta'||tagName==='noscript'||tagName==='noframes')normalInsert(tagName,attribs);else
if(tagName==='title')normalInsert(tagName,attribs),originalInsertionMode=insertionMode,insertionMode=insertionModes.text;else
if(tagName==='style')normalInsert(tagName,attribs),originalInsertionMode=insertionMode,pendingExternal=undefined,pendingDelayed=false,insertionMode=insertionModes.text,pendingMedia=lookupAttr(attribs,'media'),pendingMedia=pendingMedia?sanitizeMediaQuery(lexCss(pendingMedia)):'';else
if(tagName==='script')normalInsert(tagName,attribs.slice()),originalInsertionMode=insertionMode,scriptSrc=lookupAttr(attribs,'src'),pendingExternal=scriptSrc||undefined,pendingDelayed=lookupAttr(attribs,'defer')!==undefined||lookupAttr(attribs,'async')!==undefined,insertionMode=insertionModes.text;else
if(tagName==='head');else insertionMode.endTag('head'),insertionMode.startTag.apply(undefined,arguments)},'endTag':function(tagName){if(tagName==='head')insertionPoint=insertionPoint.parentElement,insertionMode=insertionModes.afterHead;else
if(tagName==='body'||tagName==='html'||tagName==='br')insertionMode.endTag('head'),insertionMode.endTag.apply(undefined,arguments)},'text':function(text){isHtml5NonWhitespace(text)&&(insertionMode.endTag('head'),insertionMode.text.apply(undefined,arguments))},'endOfFile':function(){insertionMode.endTag('head'),insertionMode.endOfFile()}},'afterHead':{'toString':function(){return'after head'},'startTag':function(tagName,attribs){if(tagName==='html')insertionModes.inBody.startTag.apply(undefined,arguments);else
if(tagName==='body')normalInsert(tagName,attribs),insertionMode=insertionModes.inBody;else
if(tagName==='head');else insertionMode.startTag('body',[]),insertionMode.startTag.apply(undefined,arguments)},'endTag':function(tagName){if(tagName==='body'||tagName==='html'||tagName==='br')insertionMode.startTag('body',[]),insertionMode.endTag.apply(undefined,arguments)},'text':function(text){isHtml5NonWhitespace(text)?(insertionMode.startTag('body',[]),insertionMode.text.apply(undefined,arguments)):normalText(text)},'endOfFile':function(){insertionMode.startTag('body',[]),insertionMode.endOfFile()}},'inBody':{'toString':function(){return'in body'},'startTag':function(tagName,attribs){if(tagName==='html');else
if(tagName==='base'||tagName==='basefont'||tagName==='bgsound'||tagName==='command'||tagName==='link'||tagName==='meta'||tagName==='noframes'||tagName==='script'||tagName==='style'||tagName==='title')insertionModes.inHead.startTag.apply(undefined,arguments);else
if(tagName==='body');else normalInsert(tagName,attribs)},'endTag':function(tagName){tagName==='body'?(insertionMode=insertionModes.afterBody):tagName==='html'?(insertionMode.endTag('body'),insertionMode.endTag.apply(undefined,arguments)):normalEndTag(tagName)},'text':function(text){normalText(text)},'endOfFile':function(){stopParsing()}},'text':{'toString':function(){return'text'},'startTag':function(tagName,attribs){throw new
Error(('shouldn\'t happen: start tag \x3c'+tagName+'...\x3e while in text insertion mode for '+insertionPoint.tagName))},'endTag':function(tagName,marker,continuation){var
node=insertionPoint,info,media,res;if(tagName==='script'){if(node.tagName!=='SCRIPT')throw new
Error(('shouldn\'t happen: end tag \x3c/'+tagName+'\x3e while in text insertion mode for '+node.tagName));normalEndTag(tagName),insertionMode=originalInsertionMode,info=finishCdata(),info.external?(res=resolveUriRelativeToDocument(info.external),evaluateUntrustedExternalScript(res,node,marker,continuation,info.delayed)):evaluateUntrustedScript(domicile.pseudoLocation.href,info.text,node,info.delayed)}else
tagName==='style'&&(info=finishCdata(),media=pendingMedia,pendingMedia='',defineUntrustedStylesheet(domicile.pseudoLocation.href,info.text,node,media)),normalEndTag(tagName),insertionMode=originalInsertionMode},'text':function(text){var
inSpecial=insertionPoint.tagName==='STYLE'||insertionPoint.tagName==='SCRIPT';inSpecial?cdataContent.push(text):normalText(text)},'endOfFile':function(){normalEndTag(insertionPoint.tagName),insertionMode=originalInsertionMode,insertionMode.endOfFile()}},'afterBody':{'toString':function(){return'after body'},'startTag':function(tagName,attribs){tagName==='html'?insertionModes.inBody.startTag.apply(undefined,arguments):(insertionMode=insertionModes.inBody,insertionMode.startTag.apply(undefined,arguments))},'endTag':function(tagName){tagName==='html'?(insertionMode=insertionModes.afterAfterBody):(insertionMode=insertionModes.inBody,insertionMode.endTag.apply(undefined,arguments))},'text':function(text){isHtml5NonWhitespace(text)&&(insertionMode=insertionModes.inBody),insertionModes.inBody.text.apply(undefined,arguments)},'endOfFile':function(){stopParsing()}},'afterAfterBody':{'toString':function(){return'after after body'},'startTag':function(tagName,attribs){tagName==='html'?insertionModes.inBody.startTag.apply(undefined,arguments):(insertionMode=insertionModes.inBody,insertionMode.startTag.apply(undefined,arguments))},'endTag':function(tagName){insertionMode=insertionModes.inBody,insertionMode.endTag.apply(undefined,arguments)},'text':function(text){isHtml5NonWhitespace(text)?(insertionMode=insertionModes.inBody,insertionMode.text.apply(undefined,arguments)):insertionModes.inBody.text.apply(undefined,arguments)},'endOfFile':function(){stopParsing()}}},insertionMode=insertionModes.initial,originalInsertionMode=null;function
docSection(el){var tn;for(;;){if(!el||el===base)return['doc',el];tn=virtTagName(el);if(tn==='html'||tn==='head'||tn==='body')return[tn,el];el=el.parentNode}}updateInsertionMode=function
updateInsertionMode_(){var sect=docSection(insertionPoint);switch(sect[0]){case'doc':hasChild(sect[1],'html')?(insertionMode=insertionModes.afterAfterBody):(insertionMode=insertionModes.beforeHtml);break;case'head':insertionMode=insertionModes.inHead;break;case'body':insertionMode=insertionModes.inBody;break;case'html':hasChild(sect[1],'body')?(insertionMode=insertionModes.afterBody):hasChild(sect[1],'head')?(insertionMode=insertionModes.afterHead):(insertionMode=insertionModes.beforeHead);break;default:throw new
Error('bug')}},notifyEOF=function notifyEOF_(){insertionPoint&&insertionMode.endOfFile()};function
reopen(){while(base.firstChild)base.removeChild(base.firstChild);insertionPoint=base,insertionMode=insertionModes.initial,originalInsertionMode=null}documentWriter={'startDoc':function(){depth==0&&(documentLoaded=Q.defer()),++depth},'endDoc':function(){--depth,depth==0&&documentLoaded.resolve(true)},'startTag':function(tagName,attribs,params,marker,continuation){var
schemaElem=htmlSchema.element(tagName),baseHref;if(!schemaElem.allowed)if(tagName==='script'||tagName==='style');else
if(tagName==='base')return baseHref=lookupAttr(attribs,'href'),baseHref&&domicile&&domicile.setBaseUri(resolveUriRelativeToDocument(baseHref)),void
0;else if(schemaElem.shouldVirtualize);else return;insertionMode.startTag(tagName,attribs,marker,continuation)},'endTag':function(tagName,optional,marker,continuation){insertionMode.endTag(tagName,marker,continuation)},'pcdata':function(text){insertionMode.text(text)},'cdata':function(text){insertionMode.text(text)}},documentWriter.rcdata=documentWriter.pcdata,htmlParser=html.makeSaxParser(documentWriter),tameDocWrite=function
write(htmlPieces){var htmlText=concat(arguments);return insertionPoint||reopen(),insertionPoint.tagName==='SCRIPT'?(htmlText='\x3cscript\x3e'+htmlText):insertionPoint.tagName==='STYLE'&&(htmlText='\x3cstyle\x3e'+htmlText),htmlParser(htmlText),documentLoaded.promise},domicile.writeHook=cajaVM.def({'open':reopen,'close':finish,'write':tameDocWrite}),domicile.evaluateUntrustedExternalScript=cajaVM.def(evaluateUntrustedExternalScript)})(opt_domicile)}typeof
window!=='undefined'&&(window['HtmlEmitter']=HtmlEmitter),(function(){var ATKEYWORD,BOM,CDC,CDO,CHAR,CMP_OPS,COMMENT,CSS_DECODER,CSS_TOKEN,DASHMATCH,DIMENSION,ESCAPE,ESCAPE_TAIL,FUNCTION,HASH,IDENT,INCLUDES,NAME,NL,NMCHAR,NMSTART,NONASCII,NUM,NUMBER,NUMERIC_VALUE,PERCENTAGE,PREFIXMATCH,S,STRING,STRINGCHAR,SUBSTRINGMATCH,SUFFIXMATCH,SURROGATE_PAIR,UNICODE,UNICODE_RANGE,UNICODE_TAIL,URI,URLCHAR,URL_RE,W,WC,WORD_TERM,cssStrChars,cssUrlChars;function
decodeCssEscape(s){var i=parseInt(s.substring(1),16);return i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(i&1023))):i==i?String.fromCharCode(i):s[1]<' '?'':s[1]}function
escapeCssString(s,replacer){return'\"'+s.replace(/[\u0000-\u001f\\\"\x3c\x3e]/g,replacer)+'\"'}function
escapeCssStrChar(ch){return cssStrChars[ch]||(cssStrChars[ch]='\\'+ch.charCodeAt(0).toString(16)+' ')}function
escapeCssUrlChar(ch){return cssUrlChars[ch]||(cssUrlChars[ch]=(ch<'\x10'?'%0':'%')+ch.charCodeAt(0).toString(16))}cssStrChars={'\\':'\\\\'},cssUrlChars={'\\':'%5c'},WC='[\\t\\n\\f ]',W=WC+'*',NL='[\\n\\f]',SURROGATE_PAIR='[\\ud800-\\udbff][\\udc00-\\udfff]',NONASCII='[\\u0080-\\ud7ff\\ue000-\\ufffd]|'+SURROGATE_PAIR,UNICODE_TAIL='[0-9a-fA-F]{1,6}'+WC+'?',UNICODE='\\\\'+UNICODE_TAIL,ESCAPE_TAIL='(?:'+UNICODE_TAIL+'|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|'+SURROGATE_PAIR+')',ESCAPE='\\\\'+ESCAPE_TAIL,URLCHAR='(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|'+NONASCII+'|'+ESCAPE+')',STRINGCHAR='[^\'\"\\n\\f\\\\]|\\\\[\\s\\S]',STRING='\"(?:\'|'+STRINGCHAR+')*\"'+'|\'(?:\"|'+STRINGCHAR+')*\'',NUM='[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)',NMSTART='(?:[a-zA-Z_]|'+NONASCII+'|'+ESCAPE+')',NMCHAR='(?:[a-zA-Z0-9_-]|'+NONASCII+'|'+ESCAPE+')',NAME=NMCHAR+'+',IDENT='-?'+NMSTART+NMCHAR+'*',ATKEYWORD='@'+IDENT,HASH='#'+NAME,NUMBER=NUM,WORD_TERM='(?:@?-?'+NMSTART+'|#)'+NMCHAR+'*',PERCENTAGE=NUM+'%',DIMENSION=NUM+IDENT,NUMERIC_VALUE=NUM+'(?:%|'+IDENT+')?',URI='url[(]'+W+'(?:'+STRING+'|'+URLCHAR+'*)'+W+'[)]',UNICODE_RANGE='U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?',CDO='\x3c!--',CDC='--\x3e',S=WC+'+',COMMENT='/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)',FUNCTION='(?!url[(])'+IDENT+'[(]',INCLUDES='~=',DASHMATCH='[|]=',PREFIXMATCH='[^]=',SUFFIXMATCH='[$]=',SUBSTRINGMATCH='[*]=',CMP_OPS='[~|^$*]=',CHAR='[^\"\'\\\\/]|/(?![/*])',BOM='\\uFEFF',CSS_TOKEN=new
RegExp(([BOM,UNICODE_RANGE,URI,FUNCTION,WORD_TERM,STRING,NUMERIC_VALUE,CDO,CDC,S,COMMENT,CMP_OPS,CHAR].join('|')),'gi'),CSS_DECODER=new
RegExp(('\\\\(?:'+ESCAPE_TAIL+'|'+NL+')'),'g'),URL_RE=new RegExp(('^url\\('+W+'[\"\']?|[\"\']?'+W+'\\)$'),'gi'),decodeCss=function(css){return css.replace(CSS_DECODER,decodeCssEscape)},lexCss=function(cssText){var
cc,i,j,last,len,n,tok,tokens;cssText=''+cssText,tokens=cssText.replace(/\r\n?/g,'\n').match(CSS_TOKEN)||[],j=0,last=' ';for(i=0,n=tokens.length;i<n;++i)tok=decodeCss(tokens[i]),len=tok.length,cc=tok.charCodeAt(0),tok=cc=='\"'.charCodeAt(0)||cc=='\''.charCodeAt(0)?escapeCssString(tok.substring(1,len-1),escapeCssStrChar):cc=='/'.charCodeAt(0)&&len>1||tok=='\\'||tok==CDC||tok==CDO||tok=='\ufeff'||cc<=' '.charCodeAt(0)?' ':/url\(/i.test(tok)?'url('+escapeCssString(tok.replace(URL_RE,''),escapeCssUrlChar)+')':tok,(last!=tok||tok!=' ')&&(tokens[j++]=last=tok);return tokens.length=j,tokens}})(),typeof
window!=='undefined'&&(window['lexCss']=lexCss,window['decodeCss']=decodeCss),URI=(function(){var
EXTRA_PARENT_PATHS_RE,PARENT_DIRECTORY_HANDLER,PARENT_DIRECTORY_HANDLER_RE,URI_DISALLOWED_IN_PATH_,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_,URI_RE_;function
parse(uriStr){var m=(''+uriStr).match(URI_RE_);return m?new URI((nullIfAbsent(m[1])),(nullIfAbsent(m[2])),(nullIfAbsent(m[3])),(nullIfAbsent(m[4])),(nullIfAbsent(m[5])),(nullIfAbsent(m[6])),(nullIfAbsent(m[7]))):null}function
create(scheme,credentials,domain,port,path,query,fragment){var uri=new URI((encodeIfExists2(scheme,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_)),(encodeIfExists2(credentials,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_)),(encodeIfExists(domain)),(port>0?port.toString():null),(encodeIfExists2(path,URI_DISALLOWED_IN_PATH_)),null,(encodeIfExists(fragment)));return query&&('string'===typeof
query?uri.setRawQuery(query.replace(/[^?\x26=0-9A-Za-z_\-~.%]/g,encodeOne)):uri.setAllParameters(query)),uri}function
encodeIfExists(unescapedPart){return'string'==typeof unescapedPart?encodeURIComponent(unescapedPart):null}function
encodeIfExists2(unescapedPart,extra){return'string'==typeof unescapedPart?encodeURI(unescapedPart).replace(extra,encodeOne):null}function
encodeOne(ch){var n=ch.charCodeAt(0);return'%'+'0123456789ABCDEF'.charAt(n>>4&15)+'0123456789ABCDEF'.charAt(n&15)}function
normPath(path){return path.replace(/(^|\/)\.(?:\/|$)/g,'$1').replace(/\/{2,}/g,'/')}PARENT_DIRECTORY_HANDLER=new
RegExp('(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)'),PARENT_DIRECTORY_HANDLER_RE=new
RegExp(PARENT_DIRECTORY_HANDLER),EXTRA_PARENT_PATHS_RE=/^(?:\.\.\/)*(?:\.\.$)?/;function
collapse_dots(path){var p,q,r;if(path===null)return null;p=normPath(path),r=PARENT_DIRECTORY_HANDLER_RE;for(;(q=p.replace(r,'$1'))!=p;p=q);return p}function
resolve(baseUri,relativeUri){var absoluteUri=baseUri.clone(),overridden=relativeUri.hasScheme(),absRawPath,rawPath,simplifiedPath,slash;return overridden?absoluteUri.setRawScheme(relativeUri.getRawScheme()):(overridden=relativeUri.hasCredentials()),overridden?absoluteUri.setRawCredentials(relativeUri.getRawCredentials()):(overridden=relativeUri.hasDomain()),overridden?absoluteUri.setRawDomain(relativeUri.getRawDomain()):(overridden=relativeUri.hasPort()),rawPath=relativeUri.getRawPath(),simplifiedPath=collapse_dots(rawPath),overridden?(absoluteUri.setPort(relativeUri.getPort()),simplifiedPath=simplifiedPath&&simplifiedPath.replace(EXTRA_PARENT_PATHS_RE,'')):(overridden=!!rawPath,overridden?simplifiedPath.charCodeAt(0)!==47&&(absRawPath=collapse_dots(absoluteUri.getRawPath()||'').replace(EXTRA_PARENT_PATHS_RE,''),slash=absRawPath.lastIndexOf('/')+1,simplifiedPath=collapse_dots((slash?absRawPath.substring(0,slash):'')+collapse_dots(rawPath)).replace(EXTRA_PARENT_PATHS_RE,'')):(simplifiedPath=simplifiedPath&&simplifiedPath.replace(EXTRA_PARENT_PATHS_RE,''),simplifiedPath!==rawPath&&absoluteUri.setRawPath(simplifiedPath))),overridden?absoluteUri.setRawPath(simplifiedPath):(overridden=relativeUri.hasQuery()),overridden?absoluteUri.setRawQuery(relativeUri.getRawQuery()):(overridden=relativeUri.hasFragment()),overridden&&absoluteUri.setRawFragment(relativeUri.getRawFragment()),absoluteUri}function
URI(rawScheme,rawCredentials,rawDomain,port,rawPath,rawQuery,rawFragment){this.scheme_=rawScheme,this.credentials_=rawCredentials,this.domain_=rawDomain,this.port_=port,this.path_=rawPath,this.query_=rawQuery,this.fragment_=rawFragment,this.paramCache_=null}URI.prototype.toString=function(){var
out=[];return null!==this.scheme_&&out.push(this.scheme_,':'),null!==this.domain_&&(out.push('//'),null!==this.credentials_&&out.push(this.credentials_,'@'),out.push(this.domain_),null!==this.port_&&out.push(':',this.port_.toString())),null!==this.path_&&out.push(this.path_),null!==this.query_&&out.push('?',this.query_),null!==this.fragment_&&out.push('#',this.fragment_),out.join('')},URI.prototype.clone=function(){return new
URI(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},URI.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},URI.prototype.getRawScheme=function(){return this.scheme_},URI.prototype.setScheme=function(newScheme){return this.scheme_=encodeIfExists2(newScheme,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),this},URI.prototype.setRawScheme=function(newScheme){return this.scheme_=newScheme?newScheme:null,this},URI.prototype.hasScheme=function(){return null!==this.scheme_},URI.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},URI.prototype.getRawCredentials=function(){return this.credentials_},URI.prototype.setCredentials=function(newCredentials){return this.credentials_=encodeIfExists2(newCredentials,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),this},URI.prototype.setRawCredentials=function(newCredentials){return this.credentials_=newCredentials?newCredentials:null,this},URI.prototype.hasCredentials=function(){return null!==this.credentials_},URI.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},URI.prototype.getRawDomain=function(){return this.domain_},URI.prototype.setDomain=function(newDomain){return this.setRawDomain(newDomain&&encodeURIComponent(newDomain))},URI.prototype.setRawDomain=function(newDomain){return this.domain_=newDomain?newDomain:null,this.setRawPath(this.path_)},URI.prototype.hasDomain=function(){return null!==this.domain_},URI.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},URI.prototype.setPort=function(newPort){if(newPort){newPort=Number(newPort);if(newPort!==(newPort&65535))throw new
Error(('Bad port number '+newPort));this.port_=''+newPort}else this.port_=null;return this},URI.prototype.hasPort=function(){return null!==this.port_},URI.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},URI.prototype.getRawPath=function(){return this.path_},URI.prototype.setPath=function(newPath){return this.setRawPath(encodeIfExists2(newPath,URI_DISALLOWED_IN_PATH_))},URI.prototype.setRawPath=function(newPath){return newPath?(newPath=String(newPath),this.path_=!this.domain_||/^\//.test(newPath)?newPath:'/'+newPath):(this.path_=null),this},URI.prototype.hasPath=function(){return null!==this.path_},URI.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g,' ')},URI.prototype.getRawQuery=function(){return this.query_},URI.prototype.setQuery=function(newQuery){return this.paramCache_=null,this.query_=encodeIfExists(newQuery),this},URI.prototype.setRawQuery=function(newQuery){return this.paramCache_=null,this.query_=newQuery?newQuery:null,this},URI.prototype.hasQuery=function(){return null!==this.query_},URI.prototype.setAllParameters=function(params){var
i,j,k,newParams,queryBuf,separator,v;if(typeof params==='object'){if(!(params instanceof
Array)&&(params instanceof Object||Object.prototype.toString.call(params)!=='[object Array]')){newParams=[],i=-1;for(k
in params)v=params[k],'string'===typeof v&&(newParams[++i]=k,newParams[++i]=v);params=newParams}}this.paramCache_=null,queryBuf=[],separator='';for(j=0;j<params.length;)k=params[j++],v=params[j++],queryBuf.push(separator,encodeURIComponent(k.toString())),separator='\x26',v&&queryBuf.push('=',encodeURIComponent(v.toString()));return this.query_=queryBuf.join(''),this},URI.prototype.checkParameterCache_=function(){var
cgiParams,i,k,m,out,q;if(!this.paramCache_){q=this.query_;if(!q)this.paramCache_=[];else{cgiParams=q.split(/[\x26\?]/),out=[],k=-1;for(i=0;i<cgiParams.length;++i)m=cgiParams[i].match(/^([^=]*)(?:=(.*))?$/),out[++k]=decodeURIComponent(m[1]).replace(/\+/g,' '),out[++k]=decodeURIComponent(m[2]||'').replace(/\+/g,' ');this.paramCache_=out}}},URI.prototype.setParameterValues=function(key,values){var
i,k,newValueIndex,params,pc;typeof values==='string'&&(values=[values]),this.checkParameterCache_(),newValueIndex=0,pc=this.paramCache_,params=[];for(i=0,k=0;i<pc.length;i+=2)key===pc[i]?newValueIndex<values.length&&params.push(key,values[newValueIndex++]):params.push(pc[i],pc[i+1]);while(newValueIndex<values.length)params.push(key,values[newValueIndex++]);return this.setAllParameters(params),this},URI.prototype.removeParameter=function(key){return this.setParameterValues(key,[])},URI.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},URI.prototype.getParameterValues=function(paramNameUnescaped){var
i,values;this.checkParameterCache_(),values=[];for(i=0;i<this.paramCache_.length;i+=2)paramNameUnescaped===this.paramCache_[i]&&values.push(this.paramCache_[i+1]);return values},URI.prototype.getParameterMap=function(paramNameUnescaped){var
i,key,paramMap,value;this.checkParameterCache_(),paramMap={};for(i=0;i<this.paramCache_.length;i+=2)key=this.paramCache_[i++],value=this.paramCache_[i++],key
in paramMap?paramMap[key].push(value):(paramMap[key]=[value]);return paramMap},URI.prototype.getParameterValue=function(paramNameUnescaped){var
i;this.checkParameterCache_();for(i=0;i<this.paramCache_.length;i+=2)if(paramNameUnescaped===this.paramCache_[i])return this.paramCache_[i+1];return null},URI.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},URI.prototype.getRawFragment=function(){return this.fragment_},URI.prototype.setFragment=function(newFragment){return this.fragment_=newFragment?encodeURIComponent(newFragment):null,this},URI.prototype.setRawFragment=function(newFragment){return this.fragment_=newFragment?newFragment:null,this},URI.prototype.hasFragment=function(){return null!==this.fragment_};function
nullIfAbsent(matchPart){return'string'==typeof matchPart&&matchPart.length>0?matchPart:null}return URI_RE_=new
RegExp('^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$'),URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_=/[#\/\?@]/g,URI_DISALLOWED_IN_PATH_=/[\#\?]/g,URI.parse=parse,URI.create=create,URI.resolve=resolve,URI.collapse_dots=collapse_dots,URI.utils={'mimeTypeOf':function(uri){var
uriObj=parse(uri);return/\.html$/.test(uriObj.getPath())?'text/html':'application/javascript'},'resolve':function(base,uri){return base?resolve(parse(base),parse(uri)).toString():''+uri}},URI})(),typeof
window!=='undefined'&&(window['URI']=URI),sanitizeCssProperty=undefined,sanitizeCssSelectorList=undefined,sanitizeStylesheet=undefined,sanitizeStylesheetWithExternals=undefined,sanitizeMediaQuery=undefined,(function(){var
NOEFFECT_URL='url(\"about:blank\")',NORM_URL_REGEXP=/[\n\f\r\"\'()*\x3c\x3e]/g,NORM_URL_REPLACEMENTS={'\n':'%0a','\f':'%0c','\r':'%0d','\"':'%22','\'':'%27','(':'%28',')':'%29','*':'%2a','\x3c':'%3c','\x3e':'%3e'},ALLOWED_URI_SCHEMES,COMBINATOR,PSEUDO_SELECTOR_WHITELIST,URI_SCHEME_RE;function
normalizeUrl(s){return'string'===typeof s?'url(\"'+s.replace(NORM_URL_REGEXP,normalizeUrlChar)+'\")':NOEFFECT_URL}function
normalizeUrlChar(ch){return NORM_URL_REPLACEMENTS[ch]}URI_SCHEME_RE=new RegExp('^(?:([^:/?# ]+):)?'),ALLOWED_URI_SCHEMES=/^(?:https?|mailto)$/i;function
resolveUri(baseUri,uri){return baseUri?URI.utils.resolve(baseUri,uri):uri}function
safeUri(uri,prop,naiveUriRewriter){var parsed;return naiveUriRewriter?(parsed=(''+uri).match(URI_SCHEME_RE),parsed&&(!parsed[1]||ALLOWED_URI_SCHEMES.test(parsed[1]))?naiveUriRewriter(uri,prop):null):null}function
withoutVendorPrefix(ident){return ident.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/,'')}sanitizeCssProperty=(function(){var
ALLOWED_LITERAL;function unionArrays(arrs){var map={},arr,i,j;for(i=arrs.length;--i>=0;){arr=arrs[i];for(j=arr.length;--j>=0;)map[arr[j]]=ALLOWED_LITERAL}return map}return ALLOWED_LITERAL={},function
sanitize(property,tokens,opt_naiveUriRewriter,opt_baseUri,opt_idSuffix){var propertyKey=withoutVendorPrefix(property),propertySchema=cssSchema[propertyKey],cc,cc1,cc2,end,i,identDisposition,isnum1,isnum2,k,lastQuoted,litGroup,litMap,propBits,stringDisposition,token;if(!propertySchema||'object'!==typeof
propertySchema)return tokens.length=0,void 0;propBits=propertySchema['cssPropBits'];function
sanitizeFunctionCall(tokens,start){var parenDepth=1,end=start+1,n=tokens.length,bareFnToken,fnToken,fnTokens,fns,i,nFns,token;while(end<n&&parenDepth)token=tokens[end++],parenDepth+=token===')'?-1:/^[^"']*\($/.test(token);if(!parenDepth){fnToken=tokens[start].toLowerCase(),bareFnToken=withoutVendorPrefix(fnToken),fnTokens=tokens.splice(start,end-start,''),fns=propertySchema['cssFns'];for(i=0,nFns=fns.length;i<nFns;++i)if(fns[i].substring(0,bareFnToken.length)==bareFnToken)return fnTokens[0]=fnTokens[fnTokens.length-1]='',sanitize(fns[i],fnTokens,opt_naiveUriRewriter,opt_baseUri),fnToken+fnTokens.join(' ')+')'}return''}stringDisposition=propBits&(CSS_PROP_BIT_URL|CSS_PROP_BIT_UNRESERVED_WORD),identDisposition=propBits&(CSS_PROP_BIT_GLOBAL_NAME|CSS_PROP_BIT_PROPERTY_NAME),lastQuoted=NaN,i=0,k=0;for(;i<tokens.length;++i)token=tokens[i].toLowerCase(),cc=token.charCodeAt(0),token=cc===' '.charCodeAt(0)?'':cc==='\"'.charCodeAt(0)?stringDisposition===CSS_PROP_BIT_URL?opt_naiveUriRewriter?normalizeUrl(safeUri(resolveUri(opt_baseUri,decodeCss(tokens[i].substring(1,token.length-1))),propertyKey,opt_naiveUriRewriter)):'':propBits&CSS_PROP_BIT_QSTRING&&!(stringDisposition&stringDisposition-1)?token:'':token==='inherit'?token:(litGroup=propertySchema['cssLitGroup'],litMap=litGroup?propertySchema['cssLitMap']||(propertySchema['cssLitMap']=unionArrays(litGroup)):ALLOWED_LITERAL,litMap[withoutVendorPrefix(token)]===ALLOWED_LITERAL)?token:cc==='#'.charCodeAt(0)&&/^#(?:[0-9a-f]{3}){1,2}$/.test(token)?propBits&CSS_PROP_BIT_HASH_VALUE?token:'':'0'.charCodeAt(0)<=cc&&cc<='9'.charCodeAt(0)?propBits&CSS_PROP_BIT_QUANTITY?token:'':(cc1=token.charCodeAt(1),cc2=token.charCodeAt(2),isnum1='0'.charCodeAt(0)<=cc1&&cc1<='9'.charCodeAt(0),isnum2='0'.charCodeAt(0)<=cc2&&cc2<='9'.charCodeAt(0),cc==='+'.charCodeAt(0)&&(isnum1||cc1==='.'.charCodeAt(0)&&isnum2))?propBits&CSS_PROP_BIT_QUANTITY?(isnum1?'':'0')+token.substring(1):'':cc==='-'.charCodeAt(0)&&(isnum1||cc1==='.'.charCodeAt(0)&&isnum2)?propBits&CSS_PROP_BIT_NEGATIVE_QUANTITY?(isnum1?'-':'-0')+token.substring(1):propBits&CSS_PROP_BIT_QUANTITY?'0':'':cc==='.'.charCodeAt(0)&&isnum1?propBits&CSS_PROP_BIT_QUANTITY?'0'+token:'':'url(\"'===token.substring(0,5)?opt_naiveUriRewriter&&propBits&CSS_PROP_BIT_URL?normalizeUrl(safeUri(resolveUri(opt_baseUri,tokens[i].substring(5,token.length-2)),propertyKey,opt_naiveUriRewriter)):'':token.charAt(token.length-1)==='('?sanitizeFunctionCall(tokens,i):identDisposition&&/^-?[a-z_][\w\-]*$/.test(token)&&!/__$/.test(token)?opt_idSuffix&&identDisposition===CSS_PROP_BIT_GLOBAL_NAME?tokens[i]+opt_idSuffix:identDisposition===CSS_PROP_BIT_PROPERTY_NAME&&cssSchema[token]&&'number'===typeof
cssSchema[token].cssPropBits?token:'':/^\w+$/.test(token)&&stringDisposition===CSS_PROP_BIT_UNRESERVED_WORD&&propBits&CSS_PROP_BIT_QSTRING?lastQuoted+1===k?(tokens[lastQuoted]=tokens[lastQuoted].substring(0,tokens[lastQuoted].length-1)+' '+token+'\"',token=''):(lastQuoted=k,'\"'+token+'\"'):'',token&&(tokens[k++]=token);k===1&&tokens[0]===NOEFFECT_URL&&(k=0),tokens.length=k}})(),PSEUDO_SELECTOR_WHITELIST=new
RegExp('^(active|after|before|blank|checked|default|disabled|drop|empty|enabled|first|first-child|first-letter|first-line|first-of-type|fullscreen|focus|hover|in-range|indeterminate|invalid|last-child|last-of-type|left|link|only-child|only-of-type|optional|out-of-range|placeholder-shown|read-only|read-write|required|right|root|scope|user-error|valid|visited)$'),COMBINATOR={},COMBINATOR['\x3e']=COMBINATOR['+']=COMBINATOR['~']=COMBINATOR,sanitizeCssSelectorList=function(selectors,virtualization,opt_onUntranslatableSelector){var
containerClass=virtualization.containerClass,idSuffix=virtualization.idSuffix,tagPolicy=virtualization.tagPolicy,sanitized=[],k=0,inBrackets=0,i,n,start,tok;for(i=0;i<selectors.length;++i)tok=selectors[i],(tok=='('||tok=='['?(++inBrackets,true):tok==')'||tok==']'?(inBrackets&&--inBrackets,true):!(selectors[i]==' '&&(inBrackets||COMBINATOR[selectors[i-1]]===COMBINATOR||COMBINATOR[selectors[i+1]]===COMBINATOR)))&&(selectors[k++]=selectors[i]);selectors.length=k,n=selectors.length,start=0;for(i=0;i<n;++i)if(selectors[i]===','){if(!processComplexSelector(start,i))return null;start=i+1}if(!processComplexSelector(start,n))return null;function
processComplexSelector(start,end){var i,lastOperator,out,safeSelector,tok,valid;selectors[start]===' '&&++start,end-1!==start&&selectors[end]===' '&&--end,out=[],lastOperator=start,valid=true;for(i=start;valid&&i<end;++i)tok=selectors[i],(COMBINATOR[tok]===COMBINATOR||tok===' ')&&(processCompoundSelector(lastOperator,i,tok)?(lastOperator=i+1):(valid=false));processCompoundSelector(lastOperator,end,'')||(valid=false);function
processCompoundSelector(start,end,combinator){var valid=true,element='',attrs,atype,classId,decision,ignoreCase,op,pseudoSelector,rAttr,selector,tok,vAttr,value;start<end&&(tok=selectors[start],tok==='*'?(++start,element=tok):/^[a-zA-Z]/.test(tok)&&(decision=tagPolicy(tok.toLowerCase(),[]),decision&&('tagName'in
decision&&(tok=decision['tagName']),++start,element=tok))),classId='',attrs='',pseudoSelector='';for(;valid&&start<end;++start){tok=selectors[start];if(tok.charAt(0)==='#')(/^#_|__$|[^\w#:\-]/.test(tok)?(valid=false):(classId+=tok+idSuffix));else
if(tok==='.')++start<end&&/^[0-9A-Za-z:_\-]+$/.test(tok=selectors[start])&&!/^_|__$/.test(tok)?(classId+='.'+tok):(valid=false);else
if(start+1<end&&selectors[start]==='['){++start,vAttr=selectors[start++].toLowerCase(),atype=html4.ATTRIBS[element+'::'+vAttr],atype!==+atype&&(atype=html4.ATTRIBS['*::'+vAttr]),virtualization.virtualizeAttrName?(rAttr=virtualization.virtualizeAttrName(element,vAttr),typeof
rAttr!=='string'&&(valid=false,rAttr=vAttr),valid&&atype!==+atype&&(atype=html4.atype['NONE'])):(rAttr=vAttr,atype!==+atype&&(valid=false)),op='',value='',ignoreCase=false,/^[~^$*|]?=$/.test(selectors[start])&&(op=selectors[start++],value=selectors[start++],/^[0-9A-Za-z:_\-]+$/.test(value)?(value='\"'+value+'\"'):value===']'&&(value='\"\"',--start),/^"([^\"\\]|\\.)*"$/.test(value)||(valid=false),ignoreCase=selectors[start]==='i',ignoreCase&&++start),selectors[start]!==']'&&(++start,valid=false);switch(atype){case
html4.atype['CLASSES']:case html4.atype['LOCAL_NAME']:case html4.atype['NONE']:break;case
html4.atype['GLOBAL_NAME']:case html4.atype['ID']:case html4.atype['IDREF']:if((op==='='||op==='~='||op==='$=')&&value!='\"\"'&&!ignoreCase)value='\"'+value.substring(1,value.length-1)+idSuffix+'\"';else
if(op==='|='||op==='');else valid=false;break;case html4.atype['URI']:case html4.atype['URI_FRAGMENT']:op!==''&&(valid=false);break;default:valid=false}valid&&(attrs+='['+rAttr.replace(/[^\w-]/g,'\\$\x26')+op+value+(ignoreCase?' i]':']'))}else
if(start<end&&selectors[start]===':'){tok=selectors[++start];if(PSEUDO_SELECTOR_WHITELIST.test(tok))pseudoSelector+=':'+tok;else
break}else break}return start!==end&&(valid=false),valid&&(selector=(element+classId).replace(/[^ .*#\w-]/g,'\\$\x26')+attrs+pseudoSelector+combinator,selector&&out.push(selector)),valid}return valid?(out.length&&(safeSelector=out.join(''),containerClass!==null&&(safeSelector='.'+containerClass+' '+safeSelector),sanitized.push(safeSelector)),true):!opt_onUntranslatableSelector||opt_onUntranslatableSelector(selectors.slice(start,end))}return sanitized},(function(){var
MEDIA_TYPE='(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)',MEDIA_FEATURE='(?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script)',LENGTH_UNIT='(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)',CSS_VALUE='-?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?'+LENGTH_UNIT+'?)'+')',MEDIA_EXPR='\\( '+MEDIA_FEATURE+' (?:'+': '+CSS_VALUE+' )?\\)',MEDIA_QUERY='(?:(?:(?:(?:only|not) )?'+MEDIA_TYPE+'|'+MEDIA_EXPR+')'+'(?: and ?'+MEDIA_EXPR+')*'+')',STARTS_WITH_KEYWORD_REGEXP=/^\w/,MEDIA_QUERY_LIST_REGEXP=new
RegExp(('^'+MEDIA_QUERY+'(?: , '+MEDIA_QUERY+')*'+'$'),'i');sanitizeMediaQuery=function(cssTokens){var
css,i,k,nTokens,tok;cssTokens=cssTokens.slice(),nTokens=cssTokens.length,k=0;for(i=0;i<nTokens;++i)tok=cssTokens[i],tok!=' '&&(cssTokens[k++]=tok);return cssTokens.length=k,css=cssTokens.join(' '),css=!css.length?'':!MEDIA_QUERY_LIST_REGEXP.test(css)?'not all':STARTS_WITH_KEYWORD_REGEXP.test(css)?css:'not all , '+css,css}})(),(function(){function
cssParseUri(candidate){var string1=/^\s*["]([^"]*)["]\s*$/,string2=/^\s*[']([^']*)[']\s*$/,url1=/^\s*url\s*[(]["]([^"]*)["][)]\s*$/,url2=/^\s*url\s*[(][']([^']*)['][)]\s*$/,url3=/^\s*url\s*[(]([^)]*)[)]\s*$/,match;return(match=string1.exec(candidate))?match[1]:(match=string2.exec(candidate))?match[1]:(match=url1.exec(candidate))?match[1]:(match=url2.exec(candidate))?match[1]:(match=url3.exec(candidate))?match[1]:null}function
sanitizeStylesheetInternal(baseUri,cssText,virtualization,naiveUriRewriter,naiveUriFetcher,continuation,opt_importCount){var
safeCss=void 0,importCount=opt_importCount||[0],blockStack=[],elide=false;parseCssStylesheet(cssText,{'startStylesheet':function(){safeCss=[]},'endStylesheet':function(){},'startAtrule':function(atIdent,headerArray){var
animationId,cssUrl,mediaQuery,placeholder;elide?(atIdent=null):atIdent==='@media'?safeCss.push('@media',' ',sanitizeMediaQuery(headerArray)):atIdent==='@keyframes'||atIdent==='@-webkit-keyframes'?(animationId=headerArray[0],headerArray.length===1&&!/__$|[^\w\-]/.test(animationId)?(safeCss.push(atIdent,' ',animationId+virtualization.idSuffix),atIdent='@keyframes'):(atIdent=null)):atIdent==='@import'&&headerArray.length>0&&(atIdent=null,'function'===typeof
continuation?(mediaQuery=sanitizeMediaQuery(headerArray.slice(1)),mediaQuery!=='not all'&&(++importCount[0],placeholder=[],safeCss.push(placeholder),cssUrl=safeUri(resolveUri(baseUri,cssParseUri(headerArray[0])),function(result){var
sanitized=sanitizeStylesheetInternal(cssUrl,result.html,virtualization,naiveUriRewriter,naiveUriFetcher,continuation,importCount),safeImportedCss;--importCount[0],safeImportedCss=mediaQuery?{'toString':function(){return'@media '+mediaQuery+' {'+sanitized.result+'}'}}:sanitized.result,placeholder[0]=safeImportedCss,continuation(safeImportedCss,!!importCount[0])},naiveUriFetcher))):window.console&&window.console.log('@import '+headerArray.join(' ')+' elided')),elide=!atIdent,blockStack.push(atIdent)},'endAtrule':function(){blockStack.pop(),elide||safeCss.push(';'),checkElide()},'startBlock':function(){elide||safeCss.push('{')},'endBlock':function(){elide||(safeCss.push('}'),elide=true)},'startRuleset':function(selectorArray){var
selector,selectors;elide||(selector=void 0,blockStack[blockStack.length-1]==='@keyframes'?(selector=selectorArray.join(' ').match(/^ *(?:from|to|\d+(?:\.\d+)?%) *(?:, *(?:from|to|\d+(?:\.\d+)?%) *)*$/i),elide=!selector,selector&&(selector=selector[0].replace(/ +/g,''))):(selectors=sanitizeCssSelectorList(selectorArray,virtualization),!selectors||!selectors.length?(elide=true):(selector=selectors.join(', '))),elide||safeCss.push(selector,'{')),blockStack.push(null)},'endRuleset':function(){blockStack.pop(),elide||safeCss.push('}'),checkElide()},'declaration':function(property,valueArray){var
isImportant,nValues;elide||(isImportant=false,nValues=valueArray.length,nValues>=2&&valueArray[nValues-2]==='!'&&valueArray[nValues-1].toLowerCase()==='important'&&(isImportant=true,valueArray.length-=2),sanitizeCssProperty(property,valueArray,naiveUriRewriter,baseUri,virtualization.idSuffix),valueArray.length&&safeCss.push(property,':',valueArray.join(' '),isImportant?' !important;':';'))}});function
checkElide(){elide=blockStack.length&&blockStack[blockStack.length-1]===null}return{'result':{'toString':function(){return safeCss.join('')}},'moreToCome':!!importCount[0]}}sanitizeStylesheet=function(baseUri,cssText,virtualization,naiveUriRewriter){return sanitizeStylesheetInternal(baseUri,cssText,virtualization,naiveUriRewriter,undefined,undefined).result.toString()},sanitizeStylesheetWithExternals=function(baseUri,cssText,virtualization,naiveUriRewriter,naiveUriFetcher,continuation){return sanitizeStylesheetInternal(baseUri,cssText,virtualization,naiveUriRewriter,naiveUriFetcher,continuation)}})()})(),typeof
window!=='undefined'&&(window['sanitizeCssProperty']=sanitizeCssProperty,window['sanitizeCssSelectorList']=sanitizeCssSelectorList,window['sanitizeStylesheet']=sanitizeStylesheet,window['sanitizeMediaQuery']=sanitizeMediaQuery);if('I'.toLowerCase()!=='i')throw'I/i problem';(function(){var
ident;parseCssStylesheet=function(cssText,handler){var toks=lexCss(cssText),i,n;handler['startStylesheet']&&handler['startStylesheet']();for(i=0,n=toks.length;i<n;)i=toks[i]===' '?i+1:statement(toks,i,n,handler);handler['endStylesheet']&&handler['endStylesheet']()};function
statement(toks,i,n,handler){var tok;return i<n?(tok=toks[i],tok.charAt(0)==='@'?atrule(toks,i,n,handler,true):ruleset(toks,i,n,handler)):i}function
atrule(toks,i,n,handler,blockok){var start=i++,e,s;while(i<n&&toks[i]!=='{'&&toks[i]!==';')++i;return i<n&&(blockok||toks[i]===';')&&(s=start+1,e=i,s<n&&toks[s]===' '&&++s,e>s&&toks[e-1]===' '&&--e,handler['startAtrule']&&handler['startAtrule'](toks[start].toLowerCase(),toks.slice(s,e)),i=toks[i]==='{'?block(toks,i,n,handler):i+1,handler['endAtrule']&&handler['endAtrule']()),i}function
block(toks,i,n,handler){var ch;++i,handler['startBlock']&&handler['startBlock']();while(i<n){ch=toks[i].charAt(0);if(ch=='}'){++i;break}ch===' '||ch===';'?(i=i+1):ch==='@'?(i=atrule(toks,i,n,handler,false)):ch==='{'?(i=block(toks,i,n,handler)):(i=ruleset(toks,i,n,handler))}return handler['endBlock']&&handler['endBlock'](),i}function
ruleset(toks,i,n,handler){var s=i,e=selector(toks,i,n,true),tok;if(e<0)return e=~e,e===s?e+1:e;tok=toks[e];if(tok!=='{')return e===s?e+1:e;i=e+1,e>s&&toks[e-1]===' '&&--e,handler['startRuleset']&&handler['startRuleset'](toks.slice(s,e));while(i<n){tok=toks[i];if(tok==='}'){++i;break}tok===' '?(i=i+1):(i=declaration(toks,i,n,handler))}return handler['endRuleset']&&handler['endRuleset'](),i}function
selector(toks,i,n,allowSemi){var s=i,brackets=[],stackLast=-1,tok;for(;i<n;++i){tok=toks[i].charAt(0);if(tok==='['||tok==='(')brackets[++stackLast]=tok;else
if(tok===']'&&brackets[stackLast]==='['||tok===')'&&brackets[stackLast]==='(')--stackLast;else
if(tok==='{'||tok==='}'||tok===';'||tok==='@'||tok===':'&&!allowSemi)break}return stackLast>=0&&(i=~(i+1)),i}ident=/^-?[a-z]/i;function
skipDeclaration(toks,i,n){while(i<n&&toks[i]!==';'&&toks[i]!=='}')++i;return i<n&&toks[i]===';'?i+1:i}function
declaration(toks,i,n,handler){var property=toks[i++],e,j,s,tok,value,valuelen;if(!ident.test(property))return skipDeclaration(toks,i,n);i<n&&toks[i]===' '&&++i;if(i==n||toks[i]!==':')return skipDeclaration(toks,i,n);++i,i<n&&toks[i]===' '&&++i,s=i,e=selector(toks,i,n,false);if(e<0)e=~e;else{value=[],valuelen=0;for(j=s;j<e;++j)tok=toks[j],tok!==' '&&(value[valuelen++]=tok);if(e<n){do{tok=toks[e];if(tok===';'||tok==='}')break;valuelen=0}while(++e<n);tok===';'&&++e}valuelen&&handler['declaration']&&handler['declaration'](property.toLowerCase(),value)}return e}parseCssDeclarations=function(cssText,handler){var
toks=lexCss(cssText),i,n;for(i=0,n=toks.length;i<n;)i=toks[i]!==' '?declaration(toks,i,n,handler):i+1}})(),typeof
window!=='undefined'&&(window['parseCssStylesheet']=parseCssStylesheet,window['parseCssDeclarations']=parseCssDeclarations);if('I'.toLowerCase()!=='i')throw'I/i problem';bridalMaker=function(targetDocNode){var
document=targetDocNode.nodeType===9?targetDocNode:targetDocNode.ownerDocument,window=bridalMaker.getWindow(document),navigator=window.navigator,XMLHttpRequest=window.XMLHttpRequest,ActiveXObject=window.ActiveXObject,isOpera=navigator.userAgent.indexOf('Opera')===0,isIE=!isOpera&&navigator.userAgent.indexOf('MSIE')!==-1,isWebkit=!isOpera&&navigator.userAgent.indexOf('WebKit')!==-1,featureAttachEvent=!!(window.attachEvent&&!window.addEventListener),featureExtendedCreateElement=(function(){try{return document.createElement('\x3cinput type=\"radio\"\x3e').type==='radio'}catch(e){return false}})(),CUSTOM_EVENT_TYPE_SUFFIX,endsWithUnderbars,escapeAttrib,hiddenEventTypes,hiddenStoredTarget;function
html5shim(){var html5_elements=['abbr','article','aside','audio','canvas','details','figcaption','figure','footer','header','hgroup','mark','meter','nav','output','progress','section','summary','time','video'],documentFragment=document.createDocumentFragment(),i;for(i=0;i<html5_elements.length;++i)try{document.createElement(html5_elements[i]),documentFragment.createElement(html5_elements[i])}catch(e){}}isIE&&html5shim(),CUSTOM_EVENT_TYPE_SUFFIX='_custom___';function
tameEventType(type,opt_isCustom,opt_tagName){var tagAttr;type=String(type);if(endsWithUnderbars.test(type))throw new
Error(('Invalid event type '+type));return tagAttr=false,opt_tagName&&(tagAttr=String(opt_tagName).toLowerCase()+'::on'+type),!opt_isCustom&&(tagAttr&&html4.atype.SCRIPT===html4.ATTRIBS[tagAttr]||html4.atype.SCRIPT===html4.ATTRIBS['*::on'+type])?type:type+CUSTOM_EVENT_TYPE_SUFFIX}function
eventHandlerTypeFilter(handler,tameType){return function(event){if(hiddenEventTypes&&tameType===hiddenEventTypes.get(event))return handler.call(this,event)}}endsWithUnderbars=/__$/,escapeAttrib=html.escapeAttrib;function
constructClone(node,deep){var attr,attrs,child,clone,cloneChild,i,tagDesc;if(node.nodeType===1&&featureExtendedCreateElement){tagDesc=node.tagName;switch(node.tagName){case'INPUT':tagDesc='\x3cinput name=\"'+escapeAttrib(node.name)+'\" type=\"'+escapeAttrib(node.type)+'\" value=\"'+escapeAttrib(node.defaultValue)+'\"'+(node.defaultChecked?' checked=\"checked\"\x3e':'\x3e');break;case'BUTTON':tagDesc='\x3cbutton name=\"'+escapeAttrib(node.name)+'\" type=\"'+escapeAttrib(node.type)+'\" value=\"'+escapeAttrib(node.value)+'\"\x3e';break;case'OPTION':tagDesc='\x3coption '+(node.defaultSelected?' selected=\"selected\"\x3e':'\x3e');break;case'TEXTAREA':tagDesc='\x3ctextarea value=\"'+escapeAttrib(node.defaultValue)+'\"\x3e'}clone=document.createElement(tagDesc),attrs=node.attributes;for(i=0;attr=attrs[i];++i)attr.specified&&!endsWithUnderbars.test(attr.name)&&setAttribute(clone,attr.nodeName,attr.nodeValue)}else
clone=node.cloneNode(false);if(deep)for(child=node.firstChild;child;child=child.nextSibling)cloneChild=constructClone(child,deep),clone.appendChild(cloneChild);return clone}function
fixupClone(node,clone){var child,cloneChild;for(child=node.firstChild,cloneChild=clone.firstChild;cloneChild;child=child.nextSibling,cloneChild=cloneChild.nextSibling)fixupClone(child,cloneChild);if(node.nodeType===1)switch(node.tagName){case'INPUT':clone.value=node.value,clone.checked=node.checked;break;case'OPTION':clone.selected=node.selected,clone.value=node.value;break;case'TEXTAREA':clone.value=node.value}}function
untameEventType(type){var suffix=CUSTOM_EVENT_TYPE_SUFFIX,tlen=type.length,slen=suffix.length,end;return end=tlen-slen,end>=0&&suffix===type.substring(end)&&(type=type.substring(0,end)),type}function
initEvent(event,methodName,type,bubbles,cancelable,args,notCustom){var method;methodName=String(methodName),type=tameEventType(type,!notCustom),bubbles=Boolean(bubbles),cancelable=Boolean(cancelable);if(methodName
in event){method=event[methodName];if(typeof method!=='function')throw new Error(('Domado internal error: event.'+methodName+' exists but is a '+typeof
method+', not a function'));method.apply(event,[type,bubbles,cancelable].concat(args))}else
if(event.initEvent)event.initEvent(type,bubbles,cancelable);else if(bubbles&&cancelable)hiddenEventTypes||(hiddenEventTypes=new
WeakMap),hiddenEventTypes.set(event,type);else throw new Error('Browser does not support non-bubbling/uncanceleable events')}function
dispatchEvent(element,event){return element.dispatchEvent?Boolean(element.dispatchEvent(event)):(element.fireEvent('ondataavailable',event),Boolean(event.returnValue))}function
addEventListener(element,type,handler,useCapture){var isNowCustom,r1,r2,tameType;return type=String(type),tameType=tameEventType(type,false,element.tagName),isNowCustom=type!==tameType,r1=subAddEventListener(element,isNowCustom,tameType,handler,useCapture),r2=null,isNowCustom||(r2=subAddEventListener(element,true,tameEventType(type,true,element.tagName),handler,useCapture)),r2?function
removeBoth(){r1(),r2()}:r1}function subAddEventListener(element,isCustom,tameType,handler,useCapture){var
wrapper;return featureAttachEvent?isCustom?(wrapper=eventHandlerTypeFilter(handler,tameType),element.attachEvent('ondataavailable',wrapper),function(){element.detachEvent('ondataavailable',wrapper)}):(element.attachEvent('on'+tameType,handler),function(){element.detachEvent('on'+tameType,handler)}):(element.addEventListener(tameType,handler,useCapture),function(){element.removeEventListener(tameType,handler,useCapture)})}function
cloneNode(node,deep){var clone;return document.all?(clone=constructClone(node,deep)):(clone=node.cloneNode(deep)),fixupClone(node,clone),clone}function
initCanvasElements(doc){var els=doc.getElementsByTagName('canvas'),i;for(i=0;i<els.length;++i)initCanvasElement(els[i])}function
initCanvasElement(el){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(el)}function
createElement(tagName,attribs){var el,i,n,tag;if(featureExtendedCreateElement){tag=['\x3c',tagName];for(i=0,n=attribs.length;i<n;i+=2)tag.push(' ',attribs[i],'=\"',escapeAttrib(attribs[i+1]),'\"');return tag.push('\x3e'),document.createElement(tag.join(''))}el=document.createElement(tagName);for(i=0,n=attribs.length;i<n;i+=2)setAttribute(el,attribs[i],attribs[i+1]);return el}function
createStylesheet(document,cssText){var styleSheet=document.createElement('style'),ssss;return styleSheet.setAttribute('type','text/css'),ssss=styleSheet.styleSheet,ssss?(ssss.cssText=cssText):styleSheet.appendChild(document.createTextNode(cssText)),styleSheet}function
setAttribute(element,name,value){var attr;switch(name){case'style':return element.style.cssText=value,value;case'href':(/^javascript:/i.test(value)?(hiddenStoredTarget||(hiddenStoredTarget=new
WeakMap),hiddenStoredTarget.set(element,element.target),element.target=''):hiddenStoredTarget&&hiddenStoredTarget.has(element)&&(element.target=hiddenStoredTarget.get(element),hiddenStoredTarget['delete'](element)));break;case'target':if(element.href&&/^javascript:/i.test(element.href))return hiddenStoredTarget||(hiddenStoredTarget=new
WeakMap),hiddenStoredTarget.set(element,value),value}if(featureExtendedCreateElement)try{attr=element.ownerDocument.createAttribute(name),attr.value=value,element.setAttributeNode(attr)}catch(e){return element.setAttribute(name,value,0)}else
return element.setAttribute(name,value,0);return value}function getBoundingClientRect(el){var
cRect,doc,elBoxObject,fixupLeft,fixupTop,left,op,opPosition,pageX,pageY,scrollEl,top,viewPortBoxObject,viewport;el.nodeType===9&&(el=el.documentElement),doc=el.ownerDocument;if(el.getBoundingClientRect)return cRect=el.getBoundingClientRect(),isIE&&(fixupLeft=doc.documentElement.clientLeft+doc.body.clientLeft,cRect.left-=fixupLeft,cRect.right-=fixupLeft,fixupTop=doc.documentElement.clientTop+doc.body.clientTop,cRect.top-=fixupTop,cRect.bottom-=fixupTop),{'top':+cRect.top,'left':+cRect.left,'right':+cRect.right,'bottom':+cRect.bottom};viewport=isIE&&doc.compatMode==='CSS1Compat'?doc.body:doc.documentElement,pageX=0,pageY=0;if(el===viewport);else
if(doc.getBoxObjectFor)elBoxObject=doc.getBoxObjectFor(el),viewPortBoxObject=doc.getBoxObjectFor(viewport),pageX=elBoxObject.screenX-viewPortBoxObject.screenX,pageY=elBoxObject.screenY-viewPortBoxObject.screenY;else{for(op=el;op&&op!==el;op=op.offsetParent){pageX+=op.offsetLeft,pageY+=op.offsetTop,op!==el&&(pageX+=op.clientLeft||0,pageY+=op.clientTop||0);if(isWebkit){opPosition=doc.defaultView.getComputedStyle(op,'position'),opPosition==='fixed'&&(pageX+=doc.body.scrollLeft,pageY+=doc.body.scrollTop);break}}(isWebkit&&doc.defaultView.getComputedStyle(el,'position')==='absolute'||isOpera)&&(pageY-=doc.body.offsetTop);for(op=el;(op=op.offsetParent)&&op!==doc.body;)pageX-=op.scrollLeft,(!isOpera||op.tagName!=='TR')&&(pageY-=op.scrollTop)}return scrollEl=!isWebkit&&doc.compatMode==='CSS1Compat'?doc.documentElement:doc.body,left=pageX-scrollEl.scrollLeft,top=pageY-scrollEl.scrollTop,{'top':top,'left':left,'right':left+el.clientWidth,'bottom':top+el.clientHeight}}function
getAttribute(element,name){var attr,style;if(name==='style'){style=element.style;if(typeof
style.cssText==='string')return style.cssText}return attr=element.getAttributeNode(name),attr&&attr.specified?attr.value:null}function
hasAttribute(element,name){var attr;return element.hasAttribute?element.hasAttribute(name):(attr=element.getAttributeNode(name),attr!==null&&attr.specified)}function
getComputedStyle(element,pseudoElement){if(element.currentStyle&&pseudoElement===void
0)return element.currentStyle;else if(window.getComputedStyle)return window.getComputedStyle(element,pseudoElement);throw new
Error(('Computed style not available for pseudo element '+pseudoElement))}function
makeXhr(){var activeXClassIds,candidate,i,n;if(typeof XMLHttpRequest==='undefined'){activeXClassIds=['MSXML2.XMLHTTP.5.0','MSXML2.XMLHTTP.4.0','MSXML2.XMLHTTP.3.0','MSXML2.XMLHTTP','MICROSOFT.XMLHTTP.1.0','MICROSOFT.XMLHTTP.1','MICROSOFT.XMLHTTP'];for(i=0,n=activeXClassIds.length;i<n;++i){candidate=activeXClassIds[i];try{return new
ActiveXObject(candidate)}catch(e){}}}return new XMLHttpRequest}return{'addEventListener':addEventListener,'initEvent':initEvent,'dispatchEvent':dispatchEvent,'cloneNode':cloneNode,'createElement':createElement,'createStylesheet':createStylesheet,'setAttribute':setAttribute,'getAttribute':getAttribute,'hasAttribute':hasAttribute,'getBoundingClientRect':getBoundingClientRect,'untameEventType':untameEventType,'extendedCreateElementFeature':featureExtendedCreateElement,'getComputedStyle':getComputedStyle,'makeXhr':makeXhr,'initCanvasElement':initCanvasElement,'initCanvasElements':initCanvasElements}},bridalMaker.getWindow=function(node){var
doc=node.nodeType===9?node:node.ownerDocument,body,s;return doc.parentWindow?doc.parentWindow:doc.defaultView?doc.defaultView:(s=doc.createElement('script'),s.innerHTML='document.parentWindow = window;',body=doc.body,body.appendChild(s),body.removeChild(s),doc.parentWindow)},typeof
window!=='undefined'&&(window['bridalMaker']=bridalMaker);if('I'.toLowerCase()!=='i')throw'I/i problem';Domado=(function(){'use strict';var
ALLOWED_URI_SCHEMES,CollectionProxyHandler,Confidence,INDEX_SIZE_ERROR,NOT_EDITABLE,PROPERTY_DESCRIPTOR_KEYS,Props,UNKNOWN_TAGNAME,UNSAFE_TAGNAME,URI_SCHEME_RE,cajaPrefRe,cajaPrefix,canHaveEnumerableAccessors,isVirtualizedElementName,proxiesAvailable,proxiesInterceptNumeric,realToVirtualElementName,virtualToRealElementName;isVirtualizedElementName=htmlSchema.isVirtualizedElementName,realToVirtualElementName=htmlSchema.realToVirtualElementName,virtualToRealElementName=htmlSchema.virtualToRealElementName,cajaPrefix='data-caja-',cajaPrefRe=new
RegExp(('^'+cajaPrefix)),URI_SCHEME_RE=new RegExp('^(?:([^:/?# ]+):)?'),ALLOWED_URI_SCHEMES=/^(?:https?|mailto)$/i;function
allowedUriScheme(uri){return uri.hasScheme()&&ALLOWED_URI_SCHEMES.test(uri.getScheme())}function
uriFetch(naiveUriPolicy,uri,mime,callback){var parsed;uri=''+uri,parsed=URI.parse(uri);try{!naiveUriPolicy||'function'!==typeof
naiveUriPolicy.fetch?window.setTimeout(function(){callback({})},0):allowedUriScheme(parsed)?naiveUriPolicy.fetch(parsed,mime,callback):naiveUriPolicy.fetch(undefined,mime,callback)}catch(e){console.log('Rejecting url '+uri+' because '+e),window.setTimeout(function(){callback({})},0)}}function
uriRewrite(naiveUriPolicy,uri,effects,ltype,hints){var parsed,safeUri;if(!naiveUriPolicy||'function'!==typeof
naiveUriPolicy.rewrite)return null;uri=''+uri,parsed=URI.parse(uri);try{return allowedUriScheme(parsed)?(safeUri=naiveUriPolicy.rewrite(parsed,effects,ltype,hints),safeUri?safeUri.toString():null):null}catch(e){return console.log('Rejecting url '+uri+' because '+e),null}}proxiesAvailable=typeof
Proxy!=='undefined',proxiesInterceptNumeric=proxiesAvailable&&(function(){var handler={'toString':function(){return'proxiesInterceptNumeric test handler'},'getOwnPropertyDescriptor':function(name){return{'value':name==='1'?'ok':'other'}}},proxy;return handler.getPropertyDescriptor=handler.getOwnPropertyDescriptor,proxy=Proxy.create(handler),proxy[1]==='ok'})(),canHaveEnumerableAccessors=(function(){try{return Object.defineProperty({},'foo',{'enumerable':true,'configurable':false,'get':function(){}}),true}catch(e){return false}})();function
getPropertyDescriptor(o,n){return o===null||o===undefined?undefined:Object.getOwnPropertyDescriptor(o,n)||getPropertyDescriptor(Object.getPrototypeOf(o),n)}function
ProxyHandler(target){this.target=target}ProxyHandler.prototype={'constructor':ProxyHandler,'getOwnPropertyDescriptor':function(name){var
desc=Object.getOwnPropertyDescriptor(this.target,name);return desc!==undefined&&(desc.configurable=true),desc},'getPropertyDescriptor':function(name){var
desc=Object.getPropertyDescriptor(this.target,name);return desc!==undefined&&(desc.configurable=true),desc},'getOwnPropertyNames':function(){return Object.getOwnPropertyNames(this.target)},'getPropertyNames':function(){return Object.getPropertyNames(this.target)},'defineProperty':function(name,desc){return Object.defineProperty(this.target,name,desc),true},'delete':function(name){return delete
this.target[name]},'fix':function(){var name,props;if(!Object.isFrozen(this.target))return undefined;props={};for(name
in this.target)props[name]=Object.getOwnPropertyDescriptor(this.target,name);return props},'has':function(name){return name
in this.target},'hasOwn':function(name){return({}).hasOwnProperty.call(this.target,name)},'get':function(proxy,name){return this.target[name]},'set':function(proxy,name,value){return this.target[name]=value,true},'enumerate':function(){var
result=[],name;for(name in this.target)result.push(name);return result},'keys':function(){return Object.keys(this.target)}},cajaVM.def(ProxyHandler);function
makeOverrideSetter(object,prop){return innocuous(function overrideSetter(newValue){if(object===this)throw new
TypeError(('Cannot set virtually frozen property: '+prop));!Object.getOwnPropertyDescriptor(this,prop)||(this[prop]=newValue),Object.defineProperty(this,prop,{'value':newValue,'writable':true,'enumerable':true,'configurable':true})})}function
allowNonWritableOverride(object,prop,desc){var value;return'value'in desc&&!desc.writable?(value=desc.value,{'configurable':desc.configurable,'enumerable':desc.enumerable,'get':innocuous(function
overrideGetter(){return value}),'set':makeOverrideSetter(object,prop)}):desc}function
setToString(obj,fn){Object.defineProperty(obj,'toString',allowNonWritableOverride(obj,'toString',{'value':fn}))}function
setFinal(object,prop,value){Object.defineProperty(object,prop,{'enumerable':true,'value':value})}function
isNumericName(n){return''+ +n===n}function inherit(subCtor,superCtor,opt_writableProto){var
inheritingProto=Object.create(superCtor.prototype);opt_writableProto?(subCtor.prototype=inheritingProto):Object.defineProperty(subCtor,'prototype',{'enumerable':false,'value':inheritingProto}),Object.defineProperty(subCtor.prototype,'constructor',{'value':subCtor,'writable':true,'enumerable':false,'configurable':true})}function
ensureValidCallback(aCallback){if('function'!==typeof aCallback)throw new Error(('Expected function not '+typeof
aCallback))}Confidence=(function(){function _SubConfidence(typename,superTable,superTypename){var
table=new WeakMap,guard;this.confide=cajaVM.constFunc(function(object,taming,opt_sameAs){var
privates;if(table.get(object)!==undefined)throw table.get(object)._obj!==object?new
Error(('WeakMap broke! '+object+' vs. '+table.get(object)._obj)):new Error((typename+' has already confided in '+object));if(superTable!==undefined){privates=superTable.get(object);if(!privates)throw new
Error((typename+': object must already be a '+superTypename))}else if(opt_sameAs!==undefined){privates=table.get(opt_sameAs);if(!privates)throw new
Error((typename+': opt_sameAs not confided'))}else privates={'_obj':object,'_taming':taming};table.set(object,privates)}),guard=this.guard=cajaVM.makeTableGuard(table,typename,'This operation requires a '+typename),this.amplifying=function(method){if(typeof
method!=='function')throw new Error((typename+': amplifying(non-function): '+method));function
amplifierMethod(var_args){var privates=table.get(this),ampargs;if(privates){ampargs=[privates],ampargs.push.apply(ampargs,arguments);try{return method.apply(this,ampargs)}catch(e){throw privates._taming.tameException(e)}}else
throw guard.coerce(this),'can\'t happen'}return amplifierMethod.toString=innocuous(function(){return'['+typename+']'+method.toString()}),cajaVM.constFunc(amplifierMethod)},this.amplify=function(object,method){var
privates=table.get(object),ampargs;if(privates){ampargs=[privates],ampargs.push.apply(ampargs,arguments);try{return method.apply(object,ampargs)}catch(e){throw privates._taming.tameException(e)}}else
throw guard.coerce(object),'can\'t happen'},this.subtype=(function(subtypeName){return new
_SubConfidence(subtypeName,table,typename)}).bind(this),this.typename=typename}function
Confidence(typename){return new _SubConfidence(typename,undefined,undefined)}return Confidence.prototype.toString=cajaVM.constFunc(function(){return this.typename+'Confidence'}),_SubConfidence.prototype=Confidence.prototype,cajaVM.def(Confidence)})();function
innocuous(f){return cajaVM.constFunc(f)}PROPERTY_DESCRIPTOR_KEYS={'configurable':0,'enumerable':0,'writable':0,'value':0,'get':0,'set':0},Props=(function(){var
NO_PROPERTY=null;function makeEnvOuter(object,opt_confidence){var typename=opt_confidence?opt_confidence.typename:String(object),amplifying=opt_confidence?opt_confidence.amplifying.bind(opt_confidence):function(fn){throw new
Error('Props.define: no confidence, no amplifying')};return function(prop){var msgPrefix='Props.define: '+typename+'.'+prop;return{'object':object,'prop':prop,'msgPrefix':msgPrefix,'amplifying':amplifying}}}function
specToDesc(env,propSpec){var desc;if(propSpec===NO_PROPERTY)return propSpec;switch(typeof
propSpec){case'function':if(!propSpec.isPropMaker)throw new TypeError((env.msgPrefix+' defined with a function not a prop maker'));return specToDesc(env,propSpec(env));case'object':return desc=copyAndValidateDesc(env,propSpec),('get'in
desc||'set'in desc)&&(desc.enumerable=desc.enumerable&&canHaveEnumerableAccessors),desc.get&&!Object.isFrozen(desc.get)&&(typeof
console!=='undefined'&&console.warn(env.msgPrefix+' getter is not frozen; fixing.'),cajaVM.constFunc(desc.get)),desc.set&&!Object.isFrozen(desc.set)&&(typeof
console!=='undefined'&&console.warn(env.msgPrefix+' setter is not frozen; fixing.'),cajaVM.constFunc(desc.set)),desc;default:throw new
TypeError((env.msgPrefix+' spec not a function or descriptor ('+propSpec+')'))}}function
copyAndValidateDesc(env,inDesc){var desc={},k;for(k in inDesc)if(PROPERTY_DESCRIPTOR_KEYS.hasOwnProperty(k))desc[k]=inDesc[k];else
throw new TypeError((env.msgPrefix+': Unexpected key in property descriptor: '+k));return desc}function
define(object,opt_confidence,propSpecs){var makeEnv=makeEnvOuter(object,opt_confidence),desc,prop;for(prop
in propSpecs)desc=specToDesc(makeEnv(prop),propSpecs[prop]),desc!==NO_PROPERTY&&Object.defineProperty(object,prop,desc)}function
actAs(mapName,propSpec){return markPropMaker(function(env){return specToDesc(Object.create(env,{'prop':{'value':mapName}}),propSpec)})}function
aliasRO(enumerable,otherProp){return{'enumerable':enumerable,'get':innocuous(function
aliasGetter(){return this[otherProp]})}}function overridable(enumerable,value){return markPropMaker(function
overridablePropMaker(env){return allowNonWritableOverride(env.object,env.prop,{'enumerable':enumerable,'value':value})})}function
addOverride(spec){return markPropMaker(function overridablePropMaker(env){var desc=specToDesc(env,spec);if('set'in
desc||'value'in desc)throw new Error('bad addOverride');return desc.set=makeOverrideSetter(env.object,env.prop),desc})}function
plainMethod(fn){return overridable(true,innocuous(fn))}function ampMethod(fn){return markPropMaker(function(env){return overridable(true,env.amplifying(fn))})}function
ampGetter(fn){return markPropMaker(function(env){return{'enumerable':true,'get':env.amplifying(fn)}})}function
ampAccessor(getter,setter){return markPropMaker(function(env){return{'enumerable':true,'get':env.amplifying(getter),'set':env.amplifying(setter)}})}function
markPropMaker(fn){return fn.isPropMaker=true,fn.get='\x3cPropMaker used as propdesc canary\x3e',fn}function
cond(condition,specThen){return condition?specThen:NO_PROPERTY}return{'define':define,'actAs':actAs,'aliasRO':aliasRO,'overridable':overridable,'addOverride':addOverride,'plainMethod':plainMethod,'ampMethod':ampMethod,'ampGetter':ampGetter,'ampAccessor':ampAccessor,'cond':cond,'NO_PROPERTY':NO_PROPERTY,'markPropMaker':markPropMaker}})(),CollectionProxyHandler=(function(){function
CollectionProxyHandler(target){ProxyHandler.call(this,target)}return inherit(CollectionProxyHandler,ProxyHandler),CollectionProxyHandler.prototype.toString=function(){return'[CollectionProxyHandler]'},CollectionProxyHandler.prototype.getOwnPropertyDescriptor=function(name){var
lookup;return(lookup=this.col_lookup(name))?{'configurable':true,'enumerable':true,'writable':false,'value':this.col_evaluate(lookup)}:ProxyHandler.prototype.getOwnPropertyDescriptor.call(this,name)},CollectionProxyHandler.prototype.get=function(receiver,name){var
lookup;return(lookup=this.col_lookup(name))?this.col_evaluate(lookup):ProxyHandler.prototype.get.call(this,receiver,name)},CollectionProxyHandler.prototype.getOwnPropertyNames=function(){var
names=ProxyHandler.prototype.getOwnPropertyNames.call(this);return names.push.apply(names,this.col_names()),names},CollectionProxyHandler.prototype['delete']=function(name){var
lookup;return(lookup=this.col_lookup(name))?false:ProxyHandler.prototype['delete'].call(this,name)},cajaVM.def(CollectionProxyHandler)})();function
XMLHttpRequestCtor(XMLHttpRequest,ActiveXObject,XDomainRequest){var activeXClassId;if(XMLHttpRequest&&(new
XMLHttpRequest).withCredentials!==undefined)return XMLHttpRequest;else if(XDomainRequest)return function
XDomainRequestObjectForIE(){var xdr=new XDomainRequest,errorHandler;return xdr.onload=function(){'function'===typeof
xdr.onreadystatechange&&(xdr.status=200,xdr.readyState=4,xdr.onreadystatechange.call(xdr,null,false))},errorHandler=function(){'function'===typeof
xdr.onreadystatechange&&(xdr.status=500,xdr.readyState=4,xdr.onreadystatechange.call(xdr,null,false))},xdr.onerror=errorHandler,xdr.ontimeout=errorHandler,xdr};else
if(ActiveXObject)return function ActiveXObjectForIE(){var activeXClassIds,candidate,i,n;if(activeXClassId===void
0){activeXClassId=null,activeXClassIds=['MSXML2.XMLHTTP.5.0','MSXML2.XMLHTTP.4.0','MSXML2.XMLHTTP.3.0','MSXML2.XMLHTTP','MICROSOFT.XMLHTTP.1.0','MICROSOFT.XMLHTTP.1','MICROSOFT.XMLHTTP'];for(i=0,n=activeXClassIds.length;i<n;++i){candidate=activeXClassIds[+i];try{new
ActiveXObject(candidate),activeXClassId=candidate;break}catch(e){}}activeXClassIds=null}return new
ActiveXObject(activeXClassId)};throw new Error('ActiveXObject not available')}function
TameXMLHttpRequest(taming,xmlHttpRequestMaker,naiveUriPolicy,getBaseURL){var TameXHRConf=new
Confidence('TameXMLHttpRequest'),amplifying=TameXHRConf.amplifying,amplify=TameXHRConf.amplify;function
TameXMLHttpRequest(){TameXHRConf.confide(this,taming),amplify(this,function(privates){var
xhr=privates.feral=new xmlHttpRequestMaker;taming.tamesTo(xhr,this),privates.async=undefined,privates.handler=undefined,Object.preventExtensions(privates)})}return Props.define(TameXMLHttpRequest.prototype,TameXHRConf,{'onreadystatechange':{'enumerable':true,'set':amplifying(function(privates,handler){var
self=this;privates.feral.onreadystatechange=function(event){var evt={'target':self};return handler.call(void
0,evt)},privates.handler=handler})},'readyState':Props.ampGetter(function(privates){return Number(privates.feral.readyState)}),'responseText':Props.ampGetter(function(privates){var
result=privates.feral.responseText;return result===undefined||result===null?result:String(result)}),'responseXML':Props.ampGetter(function(privates){var
feralXml=privates.feral.responseXML,node;return feralXml===null||feralXml===undefined?null:(node={'nodeName':'#document'},node.cloneNode=function(){return node},node.toString=function(){return'Caja does not support XML.'},{'documentElement':node})}),'status':Props.ampGetter(function(privates){var
result=privates.feral.status;return result===undefined||result===null?result:Number(result)}),'statusText':Props.ampGetter(function(privates){var
result=privates.feral.statusText;return result===undefined||result===null?result:String(result)}),'open':Props.ampMethod(function(privates,method,URL,opt_async,opt_userName,opt_password){var
safeUri;method=String(method),URL=URI.utils.resolve(getBaseURL(),String(URL)),safeUri=uriRewrite(naiveUriPolicy,URL,html4.ueffects.SAME_DOCUMENT,html4.ltypes.DATA,{'TYPE':'XHR','XHR_METHOD':method,'XHR':true});if('string'!==typeof
safeUri)throw'URI violates security policy';switch(arguments.length){case 2:privates.async=true,privates.feral.open(method,safeUri);break;case
3:privates.async=opt_async,privates.feral.open(method,safeUri,Boolean(opt_async));break;case
4:privates.async=opt_async,privates.feral.open(method,safeUri,Boolean(opt_async),String(opt_userName));break;case
5:privates.async=opt_async,privates.feral.open(method,safeUri,Boolean(opt_async),String(opt_userName),String(opt_password));break;default:throw'XMLHttpRequest cannot accept '+arguments.length+' arguments'}}),'setRequestHeader':Props.ampMethod(function(privates,label,value){privates.feral.setRequestHeader(String(label),String(value))}),'send':Props.ampMethod(function(privates,opt_data){var
evt;arguments.length===0?privates.feral.send(''):typeof opt_data==='string'?privates.feral.send(opt_data):privates.feral.send(''),privates.feral.overrideMimeType&&(!privates.async&&privates.handler&&(evt={'target':this},privates.handler.call(void
0,evt)))}),'abort':Props.ampMethod(function(privates){privates.feral.abort()}),'getAllResponseHeaders':Props.ampMethod(function(privates){var
result=privates.feral.getAllResponseHeaders();return result===undefined||result===null?result:String(result)}),'getResponseHeader':Props.ampMethod(function(privates,headerName){var
result=privates.feral.getResponseHeader(String(headerName));return result===undefined||result===null?result:String(result)}),'toString':Props.overridable(false,innocuous(function(){return'Not a real XMLHttpRequest'}))}),cajaVM.def(TameXMLHttpRequest)}function
CssPropertiesCollection(){var cssToDom={},domToCss={},cssName,domName;for(cssName
in cssSchema){if(cssName.indexOf('(')>=0)continue;domName=cssName==='float'?'cssFloat':cssName.replace(/-([a-z])/g,function(_,c){return c.toUpperCase()}),cssToDom[cssName]=domName,domToCss[domName]=cssName}return{'isDomName':function(p){return domToCss.hasOwnProperty(p)},'isCssName':function(p){return cssToDom.hasOwnProperty(p)},'domToCss':function(p){return domToCss[p]},'cssToDom':function(p){return cssToDom[p]},'forEachDomName':function(f){var
p;for(p in domToCss)domToCss.hasOwnProperty(p)&&f(p)}}}function TamingClassTable(){var
self=this,hop=Object.prototype.hasOwnProperty,thunks={},prototypeNames=new WeakMap;this.registerLazy=function
registerLazy(name,builder){var result;if(Object.prototype.hasOwnProperty.call(thunks,name))throw new
Error(('TamingClassTable: duplicate registration of '+name));result=undefined,thunks[name]=function
tamingClassMemoThunk(){var inert,tamingCtor;return result||(tamingCtor=builder(),inert=tamingCtor.prototype.constructor,result={'tamingCtor':tamingCtor,'guestCtor':cajaVM.def(inert)},prototypeNames.has(inert.prototype)||prototypeNames.set(inert.prototype,name)),result}},this.inertCtor=function
inertCtor(tamingCtor,someSuper,opt_name,opt_writableProto){var inert,string;return inherit(tamingCtor,someSuper,opt_writableProto),inert=function
domadoInertConstructor(){throw new TypeError('This constructor cannot be called directly.')},string=opt_name?'[domado inert constructor '+opt_name+']':'[domado inert constructor]',inert.toString=cajaVM.constFunc(function
inertCtorToString(){return string}),inert.prototype=tamingCtor.prototype,Object.freeze(inert),Object.defineProperty(tamingCtor.prototype,'constructor',{'value':inert}),opt_name!==undefined&&self.registerLazy(opt_name,function(){return tamingCtor}),inert},this.registerSafeCtor=function
registerSafeCtor(name,safeCtor){self.registerLazy(name,function(){function stubTamingCtor(){throw new
Error('Should not have been called')}return stubTamingCtor.prototype={'constructor':safeCtor},stubTamingCtor})},this.finish=function
finish(){Object.freeze(thunks)},this.exportTo=function exportTo(imports){if(Object.isExtensible(thunks))throw new
Error('TamingClassTable: exportTo called before defAllAndFinish');Object.getOwnPropertyNames(thunks).forEach(function(name){var
thunk=thunks[name];Object.defineProperty(imports,name,{'enumerable':true,'configurable':true,'get':cajaVM.constFunc(function
tamingClassGetter(){return thunk().guestCtor}),'set':cajaVM.constFunc(function tamingClassSetter(newValue){Object.defineProperty(this,name,{'value':newValue,'writable':true,'enumerable':true,'configurable':true})})})})},this.getTamingCtor=function(name){return hop.call(thunks,name)?thunks[name]().tamingCtor:undefined},this.getNameOfPrototype=function(prototype){return prototypeNames.get(prototype)}}return NOT_EDITABLE='Node not editable.',UNSAFE_TAGNAME='Unsafe tag name.',UNKNOWN_TAGNAME='Unknown tag name.',INDEX_SIZE_ERROR='Index size error.',cajaVM.constFunc(function
Domado_(){var importsToId=new WeakMap(true),idToImports=[],nextPluginId=0,FORBIDDEN_ID_LIST_PATTERN,FORBIDDEN_ID_PATTERN,JS_IDENT,JS_SPACE,TameEventConf,TameEventT,TameGradientConf,TameGradientT,TameImageDataConf,TameImageDataT,VALID_ID_CHAR,VALID_ID_LIST_PATTERN,VALID_ID_PATTERN,XML_SPACE,eventAmplify,nodePolicyEditable,nodePolicyForeign,nodePolicyOpaque,nodePolicyReadOnly,nodePolicyReadOnlyChildren,protoNodePolicy,windowToDomicile;function
getId(imports){var id;return importsToId.has(imports)?importsToId.get(imports):(id=nextPluginId++,importsToId.set(imports,id),idToImports[id]=imports,id)}function
getImports(id){var imports=idToImports[id];if(imports===undefined)throw new Error('Internal: imports#',id,' unregistered');return imports}function
noop(){return undefined}function identity(x){return x}function defaultToEmptyStr(x){return x||''}function
arrayRemove(array,from,to){var rest=array.slice((to||from)+1||array.length);return array.length=from<0?array.length+from:from,array.push.apply(array,rest)}windowToDomicile=new
WeakMap,TameEventConf=new Confidence('TameEvent'),TameEventT=TameEventConf.guard,eventAmplify=TameEventConf.amplify,TameImageDataConf=new
Confidence('TameImageData'),TameImageDataT=TameImageDataConf.guard,TameGradientConf=new
Confidence('TameGradient'),TameGradientT=TameGradientConf.guard,XML_SPACE='\t\n\r ',JS_SPACE='\t\n\r ',JS_IDENT='(?:[a-zA-Z_][a-zA-Z0-9$_]*[a-zA-Z0-9$]|[a-zA-Z])_?',VALID_ID_CHAR=unicode.LETTER+unicode.DIGIT+'_'+'$\\-.:;=()\\[\\]'+unicode.COMBINING_CHAR+unicode.EXTENDER,VALID_ID_PATTERN=new
RegExp(('^['+VALID_ID_CHAR+']+$')),VALID_ID_LIST_PATTERN=new RegExp(('^['+XML_SPACE+VALID_ID_CHAR+']*$')),FORBIDDEN_ID_PATTERN=new
RegExp('__\\s*$'),FORBIDDEN_ID_LIST_PATTERN=new RegExp('__(?:\\s|$)');function isValidId(s){return!FORBIDDEN_ID_PATTERN.test(s)&&VALID_ID_PATTERN.test(s)}function
isValidFragment(s){var idValue=s.substring(1);return s.charAt(0)==='#'&&(''===idValue||isValidId(idValue))}function
isValidIdList(s){return!FORBIDDEN_ID_LIST_PATTERN.test(s)&&VALID_ID_LIST_PATTERN.test(s)}function
trimHTML5Spaces(input){return input.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,'')}function
mimeTypeForAttr(tagName,attribName){if(attribName==='src'){if(tagName==='img')return'image/*';if(tagName==='script')return'text/javascript'}return'*/*'}function
assert(cond){if(!cond)throw typeof console!=='undefined'&&(console.error('Domado: assertion failed'),console.trace()),new
Error('Domado: assertion failed')}function tameSetAndClear(target,set,clear,setName,clearName,passArg,evalStrings,environment){var
ids=new WeakMap;function tameSet(action,delayMillis){var actionWrapper,code,id,tamed;if(action){if(typeof
action==='function');else if(evalStrings)code=''+action,action=function callbackStringWrapper(){cajaVM.compileModule(code)(environment)};else
throw new TypeError((setName+' called with a '+typeof action+'.'+'  Please pass a function instead of a string of JavaScript'));actionWrapper=passArg?function(time){action(+time)}:function(){action()},id=set(actionWrapper,delayMillis|0)}else
id=undefined;return tamed={},ids.set(tamed,id),Object.freeze(tamed)}function tameClear(id){var
feral;if(typeof id!=='object'||id==null)return;feral=ids.get(id),feral!==undefined&&clear(feral)}return target[setName]=cajaVM.def(tameSet),target[clearName]=cajaVM.def(tameClear),target}function
makeScrollable(bridal,element){var overflow=bridal.getComputedStyle(element,void
0).overflow;switch(overflow&&overflow.toLowerCase()){case'visible':case'hidden':element.style.overflow='auto'}}function
tameScrollTo(element,x,y){if(x!==+x||y!==+y||x<0||y<0)throw new Error(('Cannot scroll to '+x+':'+typeof
x+','+y+' : '+typeof y));element.scrollLeft=x,element.scrollTop=y}function tameScrollBy(element,dx,dy){if(dx!==+dx||dy!==+dy)throw new
Error(('Cannot scroll by '+dx+':'+typeof dx+', '+dy+':'+typeof dy));element.scrollLeft+=dx,element.scrollTop+=dy}function
guessPixelsFromCss(cssStr){var m;return cssStr?(m=cssStr.match(/^([0-9]+)/),m?+m[1]:0):0}function
tameResizeTo(element,w,h){if(w!==+w||h!==+h)throw new Error(('Cannot resize to '+w+':'+typeof
w+', '+h+':'+typeof h));element.style.width=w+'px',element.style.height=h+'px'}function
tameResizeBy(element,dw,dh){var extraHeight,extraWidth,goalHeight,goalWidth,h,hError,style,w,wError;if(dw!==+dw||dh!==+dh)throw new
Error(('Cannot resize by '+dw+':'+typeof dw+', '+dh+':'+typeof dh));if(!dw&&!dh)return;style=element.currentStyle,style||(style=bridalMaker.getWindow(element).getComputedStyle(element,void
0)),extraHeight=guessPixelsFromCss(style.paddingBottom)+guessPixelsFromCss(style.paddingTop),extraWidth=guessPixelsFromCss(style.paddingLeft)+guessPixelsFromCss(style.paddingRight),goalHeight=element.clientHeight+dh,goalWidth=element.clientWidth+dw,h=goalHeight-extraHeight,w=goalWidth-extraWidth,dh&&(element.style.height=Math.max(0,h)+'px'),dw&&(element.style.width=Math.max(0,w)+'px'),dh&&element.clientHeight!==goalHeight&&(hError=element.clientHeight-goalHeight,element.style.height=Math.max(0,h-hError)+'px'),dw&&element.clientWidth!==goalWidth&&(wError=element.clientWidth-goalWidth,element.style.width=Math.max(0,w-wError)+'px')}protoNodePolicy={'requireEditable':function(){if(!this.editable)throw new
Error(NOT_EDITABLE)},'requireChildrenEditable':function(){if(!this.childrenEditable)throw new
Error(NOT_EDITABLE)},'requireUnrestricted':function(){if(!this.unrestricted)throw new
Error('Node is restricted')},'assertRestrictedBy':function(policy){if(!this.childrenVisible&&policy.childrenVisible||!this.attributesVisible&&policy.attributesVisible||!this.editable&&policy.editable||!this.childrenEditable&&policy.childrenEditable||!this.upwardNavigation&&policy.upwardNavigation||!this.unrestricted&&policy.unrestricted)throw new
Error('Domado internal error: non-monotonic node policy')}},nodePolicyEditable=Object.create(protoNodePolicy),nodePolicyEditable.toString=function(){return'nodePolicyEditable'},nodePolicyEditable.childrenVisible=true,nodePolicyEditable.attributesVisible=true,nodePolicyEditable.editable=true,nodePolicyEditable.childrenEditable=true,nodePolicyEditable.upwardNavigation=true,nodePolicyEditable.unrestricted=true,nodePolicyEditable.childPolicy=nodePolicyEditable,nodePolicyReadOnly=Object.create(protoNodePolicy),nodePolicyReadOnly.toString=function(){return'nodePolicyReadOnly'},nodePolicyReadOnly.childrenVisible=true,nodePolicyReadOnly.attributesVisible=true,nodePolicyReadOnly.editable=false,nodePolicyReadOnly.childrenEditable=false,nodePolicyReadOnly.upwardNavigation=true,nodePolicyReadOnly.unrestricted=true,nodePolicyReadOnly.childPolicy=nodePolicyReadOnly,nodePolicyReadOnlyChildren=Object.create(protoNodePolicy),nodePolicyReadOnlyChildren.toString=function(){return'nodePolicyReadOnlyChildren'},nodePolicyReadOnlyChildren.childrenVisible=true,nodePolicyReadOnlyChildren.attributesVisible=true,nodePolicyReadOnlyChildren.editable=true,nodePolicyReadOnlyChildren.childrenEditable=false,nodePolicyReadOnlyChildren.upwardNavigation=true,nodePolicyReadOnlyChildren.unrestricted=true,nodePolicyReadOnlyChildren.childPolicy=nodePolicyReadOnly,nodePolicyOpaque=Object.create(protoNodePolicy),nodePolicyOpaque.toString=function(){return'nodePolicyOpaque'},nodePolicyOpaque.childrenVisible=true,nodePolicyOpaque.attributesVisible=false,nodePolicyOpaque.editable=false,nodePolicyOpaque.childrenEditable=false,nodePolicyOpaque.upwardNavigation=true,nodePolicyOpaque.unrestricted=false,nodePolicyOpaque.childPolicy=nodePolicyReadOnly,nodePolicyForeign=Object.create(protoNodePolicy),nodePolicyForeign.toString=function(){return'nodePolicyForeign'},nodePolicyForeign.childrenVisible=false,nodePolicyForeign.attributesVisible=false,nodePolicyForeign.editable=false,nodePolicyForeign.childrenEditable=false,nodePolicyForeign.upwardNavigation=false,nodePolicyForeign.unrestricted=false,Object.defineProperty(nodePolicyForeign,'childPolicy',{'get':function(){throw new
Error('Foreign node childPolicy should never be consulted')}}),cajaVM.def([nodePolicyEditable,nodePolicyReadOnly,nodePolicyReadOnlyChildren,nodePolicyOpaque,nodePolicyForeign]);function
attachDocument(idSuffix,naiveUriPolicy,outerContainerNode,optTargetAttributePresets,taming,addImports){var
ID_LIST_PARTS_PATTERN,NP_noArgEditMethodReturningNode,NP_noArgEditVoidMethod,NP_reflectBoolean,NP_tameDescendant,NP_writePolicyOnly,NamedNodeMapProxyHandler,PSEUDO_ELEMENT_WHITELIST,PT,P_UNIMPLEMENTED,TameBackedNodeConf,TameElementConf,TameHTMLDocumentConf,TameNamedNodeMap,TameNodeConf,TameNodeT,TameWindowConf,TokenListConf,allDomNodeClasses,arrayLikeCtorUpdaters,bridal,className,compareDocumentPositionAvailable,containsAvailable,cssIdClassPrefixRE,defaultNodeClassCtor,document,domicile,elementCtorConfidences,elementForFeatureTests,elementPolicies,elementTamerCache,eventTypeWhitelist,featureTestImage,feralPseudoDocument,feralPseudoWindow,forwardContainerMethod,forwardContainerProp,geometryDelegateProperty,geometryDelegatePropertySettable,htmlSanitizer,i,idClass,idClassPattern,inertCtor,installLocation,namedConstructors,namedNodeMapsAreLive,navigator,nodeClassNoImplWarnings,nodeListsAreLive,noopWindowFunctionProp,outerIsolator,pluginId,postInitCreatedElement,qsaVirtualization,stubBarPropProp,tagNameAttr,tameAddEventListenerProp,tameDispatchEventProp,tameDocument,tameException,tameNavigator,tameRemoveEventListenerProp,tameWindow,tamingClassTable,textContentProp,uriRewriterForCss,vdocContainsForeignNodes,window;if(arguments.length<3)throw new
Error(('attachDocument arity mismatch: '+arguments.length));optTargetAttributePresets||(optTargetAttributePresets={'default':'_blank','whitelist':['_blank','_self']}),taming.untame(naiveUriPolicy);if(!/^-/.test(idSuffix))throw new
Error(('id suffix \"'+idSuffix+'\" must start with \"-\"'));if(!/___$/.test(idSuffix))throw new
Error(('id suffix \"'+idSuffix+'\" must end with \"___\"'));idClass=idSuffix.substring(1),domicile={'handlingUserAction':false},vdocContainsForeignNodes=false,document=outerContainerNode.nodeType===9?outerContainerNode:outerContainerNode.ownerDocument,bridal=bridalMaker(document),elementForFeatureTests=document.createElement('div'),window=bridalMaker.getWindow(outerContainerNode);if(outerContainerNode.nodeType===9)feralPseudoWindow=window,feralPseudoDocument=outerContainerNode;else{outerIsolator=document.createElement('div'),feralPseudoDocument=document.createElement('div'),feralPseudoWindow=document.createElement('div'),outerIsolator.appendChild(feralPseudoWindow),feralPseudoWindow.appendChild(feralPseudoDocument),outerIsolator.className='caja-vdoc-wrapper caja-vdoc-outer',feralPseudoWindow.className='caja-vdoc-wrapper',feralPseudoDocument.className='caja-vdoc-wrapper caja-vdoc-inner vdoc-container___ '+idClass,[outerIsolator,feralPseudoWindow,feralPseudoDocument].forEach(function(el){el.style.display='block',el.style.margin='0',el.style.border='none',el.style.padding='0'}),outerIsolator.style.position='relative',feralPseudoWindow.style.position='relative',outerIsolator.style.overflow='hidden';while(outerContainerNode.firstChild)feralPseudoDocument.appendChild(outerContainerNode.firstChild);outerContainerNode.appendChild(outerIsolator)}elementPolicies={},elementPolicies.form=function(attribs){var
sawHandler=false,i,n;for(i=0,n=attribs.length;i<n;i+=2)attribs[+i]==='onsubmit'&&(sawHandler=true);return sawHandler||attribs.push('onsubmit','return false'),forceAutocompleteOff(attribs)},elementPolicies.input=function(attribs){return forceAutocompleteOff(attribs)};function
forceAutocompleteOff(attribs){var a=[],i,n;for(i=0,n=attribs.length;i<n;i+=2)attribs[+i]!=='autocomplete'&&a.push(attribs[+i],attribs[+i+1]);return a.push('autocomplete','off'),a}bridal.initCanvasElements(outerContainerNode),tamingClassTable=new
TamingClassTable,inertCtor=tamingClassTable.inertCtor.bind(tamingClassTable),namedConstructors={},TameNodeConf=new
Confidence('TameNode'),TameNodeT=TameNodeConf.guard,tameException=taming.tameException;function
finishNode(node){return TameNodeConf.amplify(node,function(privates){var proxiedNode;proxiesAvailable&&privates.proxyHandler&&(proxiedNode=Proxy.create(privates.proxyHandler,Object.getPrototypeOf(node)),privates.proxyInit(proxiedNode,privates.proxyHandler),delete
privates.proxyHandler,delete privates.proxyInit,node=proxiedNode),Object.preventExtensions(privates)}),node}uriRewriterForCss=!naiveUriPolicy?null:function
uriRewriterForCss_(url,prop){return uriRewrite(naiveUriPolicy,url,html4.ueffects.SAME_DOCUMENT,html4.ltypes.SANDBOXED,{'TYPE':'CSS','CSS_PROP':prop})};function
sanitizeStyleProperty(cssPropertyName,tokens){return sanitizeCssProperty(cssPropertyName,tokens,uriRewriterForCss,domicile.pseudoLocation.href,idSuffix),tokens.length!==0}function
sanitizeStyleAttrValue(styleAttrValue){var sanitizedDeclarations=[];return parseCssDeclarations(String(styleAttrValue),{'declaration':function(property,value){property=property.toLowerCase(),sanitizeStyleProperty(property,value),sanitizedDeclarations.push(property+': '+value.join(' '))}}),sanitizedDeclarations.join(' ; ')}function
sanitizeHtml(htmlText){var out=[];return htmlSanitizer(htmlText,out),out.join('')}function
sanitizeAttrs(tagName,attribs){var n=attribs.length,needsTargetAttrib=html4.ATTRIBS.hasOwnProperty(tagName+'::target'),attribKey,attribName,atype,i,policy,value;for(i=0;i<n;i+=2)attribName=attribs[+i],'target'===attribName&&(needsTargetAttrib=false),value=attribs[+i+1],atype=null,(attribKey=tagName+'::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))?(atype=html4.ATTRIBS[attribKey],value=rewriteAttribute(tagName,attribName,atype,value),atype===html4.atype.URI&&!!value&&value.charAt(0)==='#'&&(needsTargetAttrib=false)):/__$/.test(attribKey)?(value=null):(attribName=attribs[+i]=cajaPrefix+attribs[+i]),value!==null&&value!==void
0?(attribs[+i+1]=value):(attribs[+i+1]=attribs[--n],attribs[+i]=attribs[--n],i-=2);return attribs.length=n,needsTargetAttrib&&attribs.push('target',optTargetAttributePresets['default']),policy=elementPolicies[tagName],policy&&elementPolicies.hasOwnProperty(tagName)?policy(attribs):attribs}function
sanitizeOneAttr(tagName,attribName){var attribKey,atype,dummyValue;return(attribKey=tagName+'::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))?(atype=html4.ATTRIBS[attribKey],dummyValue=rewriteAttribute(tagName,attribName,atype,''),dummyValue===null?null:attribName):/__$/.test(attribName)?null:cajaPrefix+attribName}function
tagPolicy(tagName,attrs){var schemaElem=htmlSchema.element(tagName);return schemaElem.allowed?{'attribs':sanitizeAttrs(tagName,attrs)}:schemaElem.shouldVirtualize?{'tagName':htmlSchema.virtualToRealElementName(tagName),'attribs':sanitizeAttrs(tagName,attrs)}:null}htmlSanitizer=html.makeHtmlSanitizer(tagPolicy),domicile.virtualization=cajaVM.def({'containerClass':outerContainerNode===document?null:idClass,'idSuffix':idSuffix,'tagPolicy':tagPolicy,'virtualizeAttrName':sanitizeOneAttr}),qsaVirtualization=cajaVM.def({'containerClass':null,'idSuffix':idSuffix,'tagPolicy':tagPolicy});function
unsuffix(str,suffix,fail){var n;return typeof str!=='string'?fail:(n=str.length-suffix.length,0<n&&str.substring(n)===suffix?str.substring(0,n):fail)}function
splitURIFragment(uriString){var parsed=URI.parse(uriString),frag=parsed.getRawFragment();return parsed.setRawFragment(''),{'frag':frag,'uri':parsed.toString()}}ID_LIST_PARTS_PATTERN=new
RegExp(('([^'+XML_SPACE+']+)(['+XML_SPACE+']+|$)'),'g');function virtualizeAttributeValue(attrType,realValue){var
baseSplit,valueSplit;realValue=String(realValue);switch(attrType){case html4.atype.GLOBAL_NAME:case
html4.atype.ID:case html4.atype.IDREF:return unsuffix(realValue,idSuffix,null);case
html4.atype.IDREFS:return realValue.replace(ID_LIST_PARTS_PATTERN,function(_,id,spaces){return unsuffix(id,idSuffix,'')+(spaces?' ':'')});case
html4.atype.URI:return realValue&&'#'===realValue.charAt(0)?unsuffix(realValue,idSuffix,realValue):(valueSplit=splitURIFragment(realValue),baseSplit=splitURIFragment(document.baseURI||document.location.href),valueSplit.uri===baseSplit.uri&&(valueSplit.uri=domicile.pseudoLocation.href),valueSplit.uri+(valueSplit.frag===null?'':'#'+unsuffix(valueSplit.frag,idSuffix,valueSplit.frag)));case
html4.atype.URI_FRAGMENT:return realValue&&'#'===realValue.charAt(0)?unsuffix(realValue,idSuffix,null):null;default:return realValue}}function
getSafeTargetAttribute(tagName,attribName,value){var i;if(value!==null){value=String(value);for(i=0;i<optTargetAttributePresets.whitelist.length;++i)if(optTargetAttributePresets.whitelist[i]===value)return value}return optTargetAttributePresets['default']}function
rewriteAttribute(tagName,attribName,type,value){var fnNameExpr,handlerFn,schemaAttr,trustedHandler;switch(type){case
html4.atype.NONE:return attribName==='autocomplete'&&(tagName==='input'||tagName==='form')?'off':String(value);case
html4.atype.CLASSES:return value=String(value),FORBIDDEN_ID_LIST_PATTERN.test(value)?null:value;case
html4.atype.GLOBAL_NAME:case html4.atype.ID:case html4.atype.IDREF:return value=String(value),value&&isValidId(value)?value+idSuffix:null;case
html4.atype.IDREFS:return value=String(value),value&&isValidIdList(value)?value.replace(ID_LIST_PARTS_PATTERN,function(_,id,spaces){return id+idSuffix+(spaces?' ':'')}):null;case
html4.atype.LOCAL_NAME:return value=String(value),value&&isValidId(value)?value:null;case
html4.atype.SCRIPT:return value=String(value),handlerFn=cajaVM.compileExpr('(function(event) { '+value+' })')(tameWindow),fnNameExpr=domicile.handlers.push(handlerFn)-1,trustedHandler='___.plugin_dispatchEvent___(this, event, '+pluginId+', '+fnNameExpr+');',attribName==='onsubmit'?(trustedHandler='try { '+trustedHandler+' } finally { return false; }'):(trustedHandler='return '+trustedHandler),trustedHandler;case
html4.atype.URI:return value=String(value),isValidFragment(value)?value+idSuffix:(value=URI.utils.resolve(domicile.pseudoLocation.href,value),naiveUriPolicy?(schemaAttr=htmlSchema.attribute(tagName,attribName),uriRewrite(naiveUriPolicy,value,schemaAttr.uriEffect,schemaAttr.loaderType,{'TYPE':'MARKUP','XML_ATTR':attribName,'XML_TAG':tagName})||null):null);case
html4.atype.URI_FRAGMENT:return value=String(value),isValidFragment(value)?value+idSuffix:null;case
html4.atype.STYLE:return sanitizeStyleAttrValue(String(value));case html4.atype.FRAME_TARGET:return getSafeTargetAttribute(tagName,attribName,value);default:return null}}function
rewriteAttributeName(feralElement,attribName){var atype,tagName;attribName=attribName.toLowerCase();if(/__$/.test(attribName))throw new
TypeError('Attributes may not end with __');return tagName=feralElement.tagName.toLowerCase(),atype=htmlSchema.attribute(tagName,attribName).type,atype===void
0?cajaPrefix+attribName:attribName}function htmlFragmentSerialization(tameRoot){var
sl;tameRoot=TameNodeT.coerce(tameRoot),sl=[];function recur(tameParent){var nodes=tameParent.childNodes,nNodes=nodes.length,aName,aValue,attr,attrs,i,j,nAttrs,tagName,tameCurrent;for(i=0;i<nNodes;++i){tameCurrent=nodes.item(i);switch(tameCurrent.nodeType){case
1:tagName=tameCurrent.tagName;if(tagName===undefined)continue;tagName=tagName.toLowerCase(),sl.push('\x3c',tagName),attrs=tameCurrent.attributes,nAttrs=attrs.length;for(j=0;j<nAttrs;++j){attr=attrs.item(j),aName=attr.name;if(aName==='target')continue;aValue=attr.value;if(aValue===null)continue;sl.push(' ',attr.name,'=\"',html.escapeAttrib(aValue),'\"')}sl.push('\x3e');switch(tagName){case'area':case'base':case'basefont':case'bgsound':case'br':case'col':case'command':case'embed':case'frame':case'hr':case'img':case'input':case'keygen':case'link':case'meta':case'param':case'source':case'track':case'wbr':break;case'pre':case'textarea':case'listing':tameCurrent.firstChild&&tameCurrent.firstChild.nodeType===3&&tameCurrent.firstChild.data[0]==='\n'&&sl.push('\n');default:recur(tameCurrent),sl.push('\x3c/',tagName,'\x3e')}break;case
3:switch(tameCurrent.parentNode.tagName.toLowerCase()){case'style':case'script':case'xmp':case'iframe':case'noembed':case'noframes':case'plaintext':case'noscript':sl.push(tameCurrent.data);break;default:sl.push(html.escapeAttrib(tameCurrent.data))}break;case
8:sl.push('\x3c','!--',tameCurrent.data,'--\x3e');break;case 7:sl.push('\x3c?',tameCurrent.target,' ',tameCurrent.data,'\x3e');break;case
10:sl.push('\x3c','!DOCTYPE ',tameCurrent.name,'\x3e');break;default:typeof console!=='undefined'&&console.error('Domado internal: HTML fragment serialization algorithm met unexpected node type '+tameCurrent.nodeType)}}}return recur(tameRoot),sl.join('')}P_UNIMPLEMENTED={'enumerable':true,'get':cajaVM.constFunc(function(){throw new
Error('Not implemented')})};function P_constant(value){return{'enumerable':true,'value':value}}PT=cajaVM.def({'TameMemoIf':function(memo,tamer){return assert(typeof
memo==='boolean'),Props.markPropMaker(function(env){var prop=env.prop;return{'enumerable':true,'get':memo?env.amplifying(function(privates){var
feral=privates.feral[prop];return feral!==Object(feral)?tamer.call(this,privates,feral):(taming.hasTameTwin(feral)||taming.tamesTo(feral,tamer.call(this,privates,feral)),taming.tame(feral))}):env.amplifying(function(privates){return tamer.call(this,privates,privates.feral[prop])})}})},'ro':Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){return taming.tame(privates.feral[prop])})}}),'ROView':function(transform){return Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){return transform(privates.feral[prop])})}})},'rw':Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){return taming.tame(privates.feral[prop])}),'set':env.amplifying(function(privates,value){privates.policy.requireEditable(),privates.feral[prop]=taming.untame(value)})}}),'RWCond':function(predicate){return Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){return taming.tame(privates.feral[prop])}),'set':env.amplifying(function(privates,value){privates.policy.requireEditable(),predicate(value)&&(privates.feral[prop]=taming.untame(value))})}})},'related':Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){return privates.policy.upwardNavigation?tameRelatedNode(privates.feral[prop]):null})}}),'filter':function(useAttrGetter,toValue,useAttrSetter,fromValue){return Props.markPropMaker(function(env){var
prop=env.prop,desc={'enumerable':true,'get':useAttrGetter?innocuous(function(){return toValue.call(this,this.getAttribute(prop))}):env.amplifying(function(privates){return toValue.call(this,taming.tame(privates.feral[prop]))})};return fromValue&&(desc.set=useAttrSetter?innocuous(function(value){this.setAttribute(prop,fromValue.call(this,value))}):env.amplifying(function(privates,value){privates.policy.requireEditable(),privates.feral[prop]=taming.untame(fromValue.call(this,value))})),desc})},'filterAttr':function(toValue,fromValue){return PT.filter(true,toValue,true,fromValue)},'filterProp':function(toValue,fromValue){return PT.filter(false,toValue,false,fromValue)}}),NP_tameDescendant=Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){return privates.policy.childrenVisible?defaultTameNode(privates.feral[prop]):null})}});function
NP_NoArgEditMethod(transform){return Props.markPropMaker(function(env){var prop=env.prop;return Props.ampMethod(function
noArgEditMethodWrapper(privates){return privates.policy.requireEditable(),transform(privates.feral[prop]())})})}NP_noArgEditVoidMethod=NP_NoArgEditMethod(noop),NP_noArgEditMethodReturningNode=NP_NoArgEditMethod(defaultTameNode),NP_reflectBoolean=Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){return privates.policy.attributesVisible&&Boolean(privates.feral[prop])}),'set':innocuous(function(value){value?this.setAttribute(prop,prop):this.removeAttribute(prop)})}}),NP_writePolicyOnly=PT.filter(false,identity,true,identity);function
NP_UriValuedProperty(schemaEl,schemaAttr){return Props.markPropMaker(function(env){var
prop=env.prop;return{'get':env.amplifying(function(privates){return virtualizeAttributeValue(html4.atype.URI,privates.feral[prop])}),'set':env.amplifying(function(privates,value){privates.feral.href=rewriteAttribute(schemaEl,schemaAttr,html4.atype.URI,value)})}})}nodeClassNoImplWarnings={},elementTamerCache={};function
makeTameNodeByType(node){var domInterfaceName,rawTagName,schemaElem,tagName,tamer;switch(node.nodeType){case
1:return rawTagName=node.tagName,Object.prototype.hasOwnProperty.call(elementTamerCache,rawTagName)?new
elementTamerCache[rawTagName](node):(tagName=rawTagName.toLowerCase(),schemaElem=htmlSchema.element(tagName),schemaElem.allowed||tagName==='script'||tagName==='style'?(domInterfaceName=schemaElem.domInterface,tamer=tamingClassTable.getTamingCtor(domInterfaceName),tamer||(nodeClassNoImplWarnings[domInterfaceName]||(nodeClassNoImplWarnings[domInterfaceName]=true,typeof
console!=='undefined'&&console.warn('Domado: '+domInterfaceName+' is not '+'tamed; its specific properties/methods will not be '+'available on \x3c'+htmlSchema.realToVirtualElementName(tagName)+'\x3e.')),tamer=TameElement)):(tamer=TameOpaqueNode),elementTamerCache[rawTagName]=tamer,new
tamer(node));case 2:throw'Internal: Attr nodes cannot be generically wrapped';case
3:case 4:return new(tamingClassTable.getTamingCtor('Text'))(node);case 8:return new(tamingClassTable.getTamingCtor('Comment'))(node);case
9:case 11:return new TameBackedNode(node);default:return new TameOpaqueNode(node)}}function
defaultTameNode(node,foreign){var tamed;return node===null||node===void 0?null:taming.hasTameTwin(node)?taming.tame(node):(foreign&&(vdocContainsForeignNodes=true),tamed=foreign?new
TameForeignNode(node):makeTameNodeByType(node),tamed=finishNode(tamed),taming.tamesTo(node,tamed),tamed)}function
tameRelatedNode(node){var ancestor,doc;if(node===null||node===void 0)return null;if(node===feralPseudoDocument)return tameDocument;try{doc=node.ownerDocument;for(ancestor=node;ancestor;ancestor=ancestor.parentNode)if(isContainerNode(ancestor))return defaultTameNode(node);else
if(ancestor===doc)return null;return defaultTameNode(node)}catch(e){}return null}function
tameEventTarget(nodeOrWindow){return nodeOrWindow===feralPseudoWindow||nodeOrWindow===window?tameWindow:nodeOrWindow&&nodeOrWindow.nodeType===1?tameRelatedNode(nodeOrWindow):null}function
isNodeToBeHidden(feralNode){var ancestor;if(!feralNode)return false;for(ancestor=feralNode.parentNode;ancestor!==null;ancestor=ancestor.parentNode)if(taming.hasTameTwin(ancestor))return taming.tame(ancestor)instanceof
TameForeignNode;return false}domicile.tameNodeAsForeign=function(node){return defaultTameNode(node,true)};function
getNodeListLength(nodeList){var limit=nodeList.length;return limit!==+limit&&(limit=(1/0)),limit}function
nodeListEqualsArray(nodeList,array){var nll=getNodeListLength(nodeList),i;if(nll!==array.length)return false;for(i=0;i<nll;++i)if(nodeList[i]!==array[i])return false;return true}function
NodeListFilter(feralNodeList){var expectation=[],filteredCache=[];function calcUpTo(index){var
feralLength=getNodeListLength(feralNodeList),feralIndex=0,node;if(feralLength<expectation.length)expectation=[],filteredCache=[],feralIndex=0;else
for(;feralIndex<expectation.length&&feralIndex<feralLength;++feralIndex)if(feralNodeList[feralIndex]!==expectation[feralIndex]){expectation=[],filteredCache=[],feralIndex=0;break}for(;feralIndex<feralLength&&filteredCache.length<=index;++feralIndex)node=feralNodeList[feralIndex],expectation.push(node),isNodeToBeHidden(node)||filteredCache.push(node)}return{'getLength':function(){try{return vdocContainsForeignNodes?(calcUpTo(Infinity),filteredCache.length):getNodeListLength(feralNodeList)}catch(e){throw tameException(e)}},'item':function(i){try{return vdocContainsForeignNodes?(calcUpTo(i),filteredCache[i]):feralNodeList[i]}catch(e){throw tameException(e)}}}}function
mixinNodeList(tamed,nodeList,opt_tameNodeCtor){var visibleList=new NodeListFilter(nodeList),limit=visibleList.getLength(),i,j;if(limit>0&&!opt_tameNodeCtor)throw'Internal: Nonempty mixinNodeList() without a tameNodeCtor';for(i=tamed.length,j=0;j<limit&&visibleList.item(j);++i,++j)tamed[+i]=opt_tameNodeCtor(visibleList.item(+j));return nodeList=visibleList=null,tamed.item=cajaVM.constFunc(function(k){k&=2147483647;if(k!==k)throw new
Error;return tamed[+k]||null}),tamed}nodeListsAreLive=cajaVM.makeArrayLike.canBeFullyLive,arrayLikeCtorUpdaters=[];function
registerArrayLikeClass(constructor,opt_superCtor){var definedPrototype;inertCtor(constructor,opt_superCtor||cajaVM.makeArrayLike(0),undefined,true),definedPrototype=constructor.prototype;function
updater(ArrayLike){var newPrototype;inertCtor(constructor,opt_superCtor||ArrayLike,undefined,true),newPrototype=constructor.prototype,assert(Object.isFrozen(definedPrototype)),Object.getOwnPropertyNames(definedPrototype).forEach(function(name){if(name==='constructor')return;Object.defineProperty(newPrototype,name,Object.getOwnPropertyDescriptor(definedPrototype,name))}),cajaVM.def(newPrototype)}arrayLikeCtorUpdaters.push(updater)}function
finishArrayLikeClass(constructor){var proto=constructor.prototype;cajaVM.tamperProof(proto),Object.getOwnPropertyNames(proto).forEach(function(prop){prop!=='constructor'&&cajaVM.def(Object.getOwnPropertyDescriptor(proto,prop))})}function
constructArrayLike(ctor,getItem,getLength){var len=+getLength(),ArrayLike=cajaVM.makeArrayLike(len),instance;return ctor.prototype
instanceof ArrayLike||arrayLikeCtorUpdaters.forEach(function(f){f(ArrayLike)}),instance=ArrayLike(ctor.prototype,getItem,getLength),Object.defineProperty(instance,'item',{'enumerable':true,'value':cajaVM.constFunc(getItem)}),instance}function
TameNodeList(nodeList,tameNodeCtor,opt_leafCtor){var visibleList=new NodeListFilter(nodeList),getLength,result;function
getItem(i){return i=+i,i>=visibleList.getLength()?void 0:tameNodeCtor(visibleList.item(i))}return getLength=visibleList.getLength.bind(visibleList),result=constructArrayLike(opt_leafCtor||TameNodeList,getItem,getLength),result}registerArrayLikeClass(TameNodeList),setToString(TameNodeList.prototype,innocuous(function(){return'[domado object NodeList]'})),finishArrayLikeClass(TameNodeList),proxiesAvailable&&proxiesInterceptNumeric?(namedNodeMapsAreLive=true,TameNamedNodeMap=function
TameNamedNodeMap1_(feral,mapping){var visibleList=new NodeListFilter(feral),proxy;return Props.define(this,null,{'length':{'get':innocuous(visibleList.getLength.bind(visibleList))},'item':{'value':innocuous(function(i){return mapping.tame(visibleList.item(i))})}}),Object.freeze(this),proxy=Proxy.create(new
NamedNodeMapProxyHandler(feral,mapping,visibleList,this),Object.getPrototypeOf(this)),proxy},inertCtor(TameNamedNodeMap,Object),setToString(TameNamedNodeMap.prototype,innocuous(function(){return'[domado object NamedNodeMap]'})),cajaVM.def(TameNamedNodeMap),NamedNodeMapProxyHandler=function
NamedNodeMapProxyHandler_(feral,mapping,visibleList,target){this.feral=feral,this.mapping=mapping,this.visibleList=visibleList,CollectionProxyHandler.call(this,target)},inherit(NamedNodeMapProxyHandler,CollectionProxyHandler),NamedNodeMapProxyHandler.prototype.toString=function(){return'[NamedNodeMapProxyHandler]'},NamedNodeMapProxyHandler.prototype.col_lookup=function(name){var
feral;return isNumericName(name)?this.visibleList.item(+name):(feral=this.feral.getNamedItem(this.mapping.untameName(name)),isNodeToBeHidden(feral)?null:feral)},NamedNodeMapProxyHandler.prototype.col_evaluate=function(feralNode){return this.mapping.tame(feralNode)},NamedNodeMapProxyHandler.prototype.col_names=function(){var
array=[],n=this.visibleList.getLength(),i;for(i=0;i<n;++i)array.push(String(i));return array},cajaVM.def(NamedNodeMapProxyHandler)):(namedNodeMapsAreLive=false,TameNamedNodeMap=function
TameNamedNodeMap2_(feral,mapping){var self=TameNodeList.call(this,feral,mapping.tame.bind(mapping),TameNamedNodeMap),i,tameNode;for(i=self.length-1;i>=0;--i)tameNode=self[i],Object.defineProperty(self,mapping.tameGetName(tameNode),{'configurable':false,'enumerable':false,'writable':false,'value':tameNode});return Object.freeze(self),self},registerArrayLikeClass(TameNamedNodeMap,TameNodeList),setToString(TameNamedNodeMap.prototype,innocuous(function(){return'[domado object NamedNodeMap]'})),finishArrayLikeClass(TameNamedNodeMap));function
TameOptionsList(nodeList,opt_tameNodeCtor){var visibleList=new NodeListFilter(nodeList),getLength,result;function
getItem(i){return i=+i,opt_tameNodeCtor(visibleList.item(i))}return getLength=visibleList.getLength.bind(visibleList),result=constructArrayLike(TameOptionsList,getItem,getLength),Object.defineProperty(result,'selectedIndex',{'get':innocuous(function(){return+nodeList.selectedIndex})}),result}registerArrayLikeClass(TameOptionsList),setToString(TameOptionsList.prototype,innocuous(function(){return'[domado object HTMLOptionsCollection]'})),finishArrayLikeClass(TameOptionsList);function
fakeNodeList(array,typename){return array.item=innocuous(function(i){return array[+i]}),array.toString=innocuous(function(){return'[domado object '+typename+']'}),Object.freeze(array)}function
mixinHTMLCollection(tamed,nodeList,opt_tameNodeCtor){var i,name,tameNode,tameNodes,tameNodesByName;mixinNodeList(tamed,nodeList,opt_tameNodeCtor),tameNodesByName={};for(i=0;i<tamed.length&&(tameNode=tamed[+i]);++i)name=void
0,tameNode.getAttribute&&(name=tameNode.getAttribute('name')),name&&!(name.charAt(name.length-1)==='_'||name
in tamed||name===String(name&2147483647))&&(tameNodesByName[name]||(tameNodesByName[name]=[]),tameNodesByName[name].push(tameNode));for(name
in tameNodesByName)tameNodes=tameNodesByName[name],tameNodes.length>1?(tamed[name]=fakeNodeList(tameNodes,'NodeList')):(tamed[name]=tameNodes[0]);return tamed.namedItem=cajaVM.constFunc(function(name){return name=String(name),name.charAt(name.length-1)==='_'?null:Object.prototype.hasOwnProperty.call(tamed,name)?cajaVM.passesGuard(TameNodeT,tamed[name])?tamed[name]:tamed[name][0]:null}),tamed}function
tameHTMLCollection(nodeList,opt_tameNodeCtor){return Object.freeze(mixinHTMLCollection([],nodeList,opt_tameNodeCtor))}function
tameGetElementsByTagName(rootNode,tagName){var eflags,feralList;return tagName=String(tagName),eflags=0,tagName!=='*'&&(tagName=tagName.toLowerCase(),tagName=virtualToRealElementName(tagName)),feralList=rootNode.getElementsByTagName(tagName),nodeListsAreLive&&taming.hasTameTwin(feralList)||taming.reTamesTo(feralList,new
TameNodeList(feralList,defaultTameNode)),taming.tame(feralList)}function tameGetElementsByClassName(rootNode,className){var
candidate,candidateClass,candidates,classes,classi,feralList,i,j,k,limit,matches,nClasses,tamed;className=String(className),classes=className.match(/[^\t\n\f\r ]+/g);for(i=classes?classes.length:0;--i>=0;)classi=classes[+i],FORBIDDEN_ID_PATTERN.test(classi)&&(classes[+i]=classes[classes.length-1],--classes.length);if(!classes||classes.length===0)return fakeNodeList([],'NodeList');if(typeof
rootNode.getElementsByClassName==='function')return feralList=rootNode.getElementsByClassName(classes.join(' ')),nodeListsAreLive&&taming.hasTameTwin(feralList)||taming.reTamesTo(feralList,new
TameNodeList(feralList,defaultTameNode)),taming.tame(feralList);nClasses=classes.length;for(i=nClasses;--i>=0;)classes[+i]=' '+classes[+i]+' ';candidates=rootNode.getElementsByTagName('*'),matches=[],limit=candidates.length,limit!==+limit&&(limit=(1/0));b:for(j=0,k=-1;j<limit&&(candidate=candidates[+j]);++j){candidateClass=' '+candidate.className+' ';for(i=nClasses;--i>=0;)if(-1===candidateClass.indexOf(classes[+i]))continue b;tamed=defaultTameNode(candidate),tamed&&(matches[++k]=tamed)}return fakeNodeList(matches,'NodeList')}function
querySelectorFail(tokens){var error=new Error(('Erroneous or unsupported selector syntax: '+tokens.join('')));throw error.name='SyntaxError',error}function
tameQuerySelector(rootFeralNode,guestSelector,returnAll){var sanitizedSelectors=sanitizeCssSelectorList(lexCss(guestSelector),qsaVirtualization,querySelectorFail);return sanitizedSelectors=sanitizedSelectors.join(','),returnAll?new
TameNodeList((rootFeralNode.querySelectorAll(sanitizedSelectors)),defaultTameNode):defaultTameNode(rootFeralNode.querySelector(sanitizedSelectors))}TokenListConf=new
Confidence('TameDOMTokenList');function TameDOMTokenList(feral,getTransform,setTransform){var
self;function getItem(i){return TameDOMTokenList.prototype.item.call(self,i)}function
getLength(){return feral.length}return self=constructArrayLike(this.constructor,getItem,getLength),TokenListConf.confide(self,taming),TokenListConf.amplify(self,function(privates){privates.feral=feral,privates.getT=getTransform,privates.setT=setTransform}),self}registerArrayLikeClass(TameDOMTokenList),Props.define(TameDOMTokenList.prototype,TokenListConf,{'length':PT.ro,'item':Props.ampMethod(function(privates,i){var
ftoken=privates.feral.item(i);return ftoken===null?null:privates.getT(ftoken)}),'contains':Props.ampMethod(function(privates,ttoken){var
ftoken=privates.setT(String(ttoken));return ftoken===null?false:!!privates.feral.contains(ftoken)}),'add':Props.ampMethod(function(privates,ttoken){var
ftoken=privates.setT(String(ttoken));if(ftoken===null)return;privates.feral.add(ftoken)}),'remove':Props.ampMethod(function(privates,ttoken){var
ftoken=privates.setT(String(ttoken));if(ftoken===null)return;privates.feral.remove(ftoken)}),'toggle':Props.ampMethod(function(privates,ttoken){var
ftoken=privates.setT(String(ttoken));return ftoken===null?false:!!privates.feral.toggle(ftoken)}),'toString':Props.ampMethod(function(privates){return privates.feral.toString().replace(/[^ \t\n\r\f]+/g,function(ftoken){var
ttoken=privates.getT(ftoken);return ttoken===null?'':ttoken})})}),finishArrayLikeClass(TameDOMTokenList);function
TameDOMSettableTokenList(feral,getTransform,setTransform){return TameDOMTokenList.call(this,feral,getTransform,setTransform)}registerArrayLikeClass(TameDOMSettableTokenList,TameDOMTokenList),elementForFeatureTests.classList&&elementForFeatureTests.classList.value!==undefined&&Props.define(TameDOMSettableTokenList.prototype,TokenListConf,{'value':{'get':TokenListConf.amplifying(function(privates){return privates.feral.value.replace(/[^ \t\n\r\f]+/g,function(s){var
ttoken=privates.getT(s);return ttoken===null?'':ttoken})}),'set':TokenListConf.amplifying(function(privates,val){privates.feral.value=val.replace(/[^ \t\n\r\f]+/g,function(s){var
ftoken=privates.setT(s);return ftoken===null?'':ftoken})})}}),finishArrayLikeClass(TameDOMSettableTokenList);function
tameTokenList(feral,getTransform,setTransform){return'value'in feral?new TameDOMSettableTokenList(feral,getTransform,setTransform):new
TameDOMTokenList(feral,getTransform,setTransform)}function makeEventHandlerWrapper(thisNode,listener){ensureValidCallback(listener);function
wrapper(event){return plugin_dispatchEvent(thisNode,event,getId(tameWindow),listener)}return wrapper}function
callAsEventListener(func,thisArg,tameEventObj){try{Function.prototype.call.call(func,thisArg,tameEventObj)}catch(e){try{tameWindow.onerror(e.message,'\x3c'+tameEventObj.type+' handler\x3e',0)}catch(e2){console.error('onerror handler failed\n',e,'\n',e2)}}}function
getFeralEventTarget(privates){return privates.feralEventTarget||privates.feral}tameAddEventListenerProp=Props.ampMethod(function(privates,name,listener,useCapture){var
feral,list,remove,wrappedListener;name=String(name),useCapture=Boolean(useCapture),feral=getFeralEventTarget(privates),privates.policy.requireEditable(),list=privates.wrappedListeners,list||(list=privates.wrappedListeners=[]),searchForListener(list,name,listener,useCapture)===null&&(wrappedListener=makeEventHandlerWrapper(feral,listener),remove=bridal.addEventListener(feral,name,wrappedListener,useCapture),list.push({'n':name,'l':listener,'c':useCapture,'remove':remove}))}),tameRemoveEventListenerProp=Props.ampMethod(function(privates,name,listener,useCapture){var
list,match;name=String(name),useCapture=Boolean(useCapture),privates.policy.requireEditable(),list=privates.wrappedListeners;if(!list)return;match=searchForListener(list,name,listener,useCapture),match!==null&&(list[match].remove(),arrayRemove(list,match,match))});function
searchForListener(list,name,listener,useCapture){var i,record;for(i=list.length;--i>=0;){record=list[+i];if(record.n===name&&record.l===listener&&record.c===useCapture)return i}return null}tameDispatchEventProp=Props.ampMethod(function(privates,evt){return Boolean(eventAmplify(evt,function(evtPriv){return bridal.dispatchEvent(getFeralEventTarget(privates),evtPriv.feral)}))});function
TameNode(policy){TameNodeConf.confide(this,taming);if(!policy||!policy.requireEditable)throw new
Error('Domado internal error: Policy missing or invalid');return TameNodeConf.amplify(this,function(privates){privates.policy=policy}),this}inertCtor(TameNode,Object,'Node'),Props.define(TameNode.prototype,TameNodeConf,{'toString':Props.overridable(false,innocuous(function(){return nodeToStringSearch(this,this)})),'baseURI':{'enumerable':true,'get':innocuous(function(){return domicile.pseudoLocation.href})},'ownerDocument':{'enumerable':true,'get':innocuous(function(){return tameDocument})}});function
nodeToStringSearch(self,prototype){var name;return typeof prototype!=='object'||prototype===Object.prototype?Object.prototype.toString.call(self):(name=tamingClassTable.getNameOfPrototype(prototype),name?(prototype===self?'[domado PROTOTYPE OF '+name:'[domado object '+name+' '+self.nodeName)+']':nodeToStringSearch(self,Object.getPrototypeOf(prototype)))}cajaVM.def(TameNode),TameBackedNodeConf=TameNodeConf.subtype('TameBackedNode');function
TameBackedNode(node,opt_policy,opt_proxyType){var parent,parentPolicy,policy;if(!node)throw new
Error('Creating tame node with undefined native delegate');parent=node.parentNode,!parent||isContainerNode(parent)||isContainerNode(node)?(parentPolicy=null):(parentPolicy=TameBackedNodeConf.amplify(defaultTameNode(parent),function(parentPriv){return parentPriv.policy})),opt_policy?(parentPolicy&&parentPolicy.childPolicy.assertRestrictedBy(opt_policy),policy=opt_policy):isContainerNode(parent)?(policy=nodePolicyEditable):(policy=parentPolicy?parentPolicy.childPolicy:nodePolicyEditable),TameNode.call(this,policy),TameBackedNodeConf.confide(this,taming),TameBackedNodeConf.amplify(this,function(privates){privates.feral=node,privates.wrappedListeners=[],proxiesAvailable&&opt_proxyType&&(privates.proxyHandler=new
opt_proxyType(this),privates.proxyInit=opt_proxyType.domadoProxyInit)})}inertCtor(TameBackedNode,TameNode),compareDocumentPositionAvailable='function'===typeof
elementForFeatureTests.compareDocumentPosition,containsAvailable=elementForFeatureTests.contains,Props.define(TameBackedNode.prototype,TameBackedNodeConf,{'nodeType':PT.ro,'nodeName':PT.ro,'nodeValue':PT.ro,'firstChild':NP_tameDescendant,'lastChild':NP_tameDescendant,'nextSibling':PT.related,'previousSibling':PT.related,'parentNode':PT.related,'childNodes':PT.TameMemoIf(nodeListsAreLive,function(privates,f){return privates.policy.childrenVisible?new
TameNodeList(f,defaultTameNode):fakeNodeList([],'NodeList')}),'attributes':PT.TameMemoIf(namedNodeMapsAreLive,function(privates,feralMap){var
feralOwnerElement;return privates.policy.attributesVisible?(feralOwnerElement=privates.feral,new
TameNamedNodeMap(feralMap,{'tame':function(feralNode){return tameAttributeNode(feralNode,feralOwnerElement)},'tameGetName':function(tameNode){return tameNode.name},'untameName':function(name){return rewriteAttributeName(feralOwnerElement,name)}})):fakeNodeList([],'HTMLCollection')}),'cloneNode':Props.ampMethod(function(privates,deep){var
clone;return privates.policy.requireUnrestricted(),clone=bridal.cloneNode(privates.feral,Boolean(deep)),defaultTameNode(clone)}),'appendChild':Props.ampMethod(function(privates,child){return child=child||{},TameBackedNodeConf.amplify(child,function(childPriv){return checkAdoption(privates,childPriv),privates.feral.appendChild(childPriv.feral),child})}),'insertBefore':Props.ampMethod(function(privates,toInsert,child){return child===void
0&&(child=null),TameBackedNodeConf.amplify(toInsert,function(iPriv){checkAdoption(privates,iPriv),child===null?privates.feral.insertBefore(iPriv.feral,null):TameBackedNodeConf.amplify(child,function(childPriv){privates.feral.insertBefore(iPriv.feral,childPriv.feral)})}),toInsert}),'removeChild':Props.ampMethod(function(privates,child){return TameBackedNodeConf.amplify(child,function(childPriv){privates.policy.requireChildrenEditable(),privates.feral.removeChild(childPriv.feral)}),child}),'replaceChild':Props.ampMethod(function(privates,newChild,oldChild){return TameBackedNodeConf.amplify(newChild,function(newPriv){TameBackedNodeConf.amplify(oldChild,function(oldPriv){checkAdoption(privates,newPriv),privates.feral.replaceChild(newPriv.feral,oldPriv.feral)})}),oldChild}),'hasChildNodes':Props.ampMethod(function(privates){return privates.policy.childrenVisible?!!privates.feral.hasChildNodes():false}),'addEventListener':tameAddEventListenerProp,'removeEventListener':tameRemoveEventListenerProp,'dispatchEvent':tameDispatchEventProp,'compareDocumentPosition':Props.cond(compareDocumentPositionAvailable,Props.ampMethod(function(privates,other){return other?TameBackedNodeConf.amplify(other,function(otherPriv){var
otherNode=otherPriv.feral,bitmask=+privates.feral.compareDocumentPosition(otherNode);return bitmask&1&&(bitmask&=-7),bitmask&31}):0})),'contains':containsAvailable?Props.ampMethod(function(privates,other){return other===null||other===void
0?false:TameBackedNodeConf.amplify(other,function(otherPriv){return privates.feral.contains(otherPriv.feral)})}):compareDocumentPositionAvailable?Props.ampMethod(function(other){var
docPos;return other===null||other===void 0?false:(docPos=this.compareDocumentPosition(other),!(!(docPos&16)&&docPos))}):Props.NO_PROPERTY});function
checkAdoption(parentPriv,childPriv){parentPriv.policy.requireChildrenEditable(),childPriv.policy.requireEditable(),parentPriv.policy.childPolicy.assertRestrictedBy(childPriv.policy)}cajaVM.def(TameBackedNode);function
TameOpaqueNode(node){TameBackedNode.call(this,node,nodePolicyOpaque)}inertCtor(TameOpaqueNode,TameBackedNode),cajaVM.def(TameOpaqueNode);function
TameForeignNode(node){TameBackedNode.call(this,node,nodePolicyForeign)}inertCtor(TameForeignNode,TameBackedNode),Props.define(TameForeignNode.prototype,TameNodeConf,{'getElementsByTagName':Props.plainMethod(function(tagName){return fakeNodeList([],'NodeList')}),'getElementsByClassName':Props.plainMethod(function(className){return fakeNodeList([],'HTMLCollection')})}),cajaVM.def(TameForeignNode),tamingClassTable.registerLazy('Text',function(){var
textAccessor;function TameTextNode(node){assert(node.nodeType===3),TameBackedNode.call(this,node)}return inertCtor(TameTextNode,TameBackedNode),textAccessor=Props.actAs('nodeValue',PT.filterProp(identity,function(value){return String(value||'')})),Props.define(TameTextNode.prototype,TameNodeConf,{'nodeValue':textAccessor,'textContent':textAccessor,'innerText':textAccessor,'data':textAccessor}),cajaVM.def(TameTextNode)}),tamingClassTable.registerLazy('Comment',function(){function
TameCommentNode(node){assert(node.nodeType===8),TameBackedNode.call(this,node)}return inertCtor(TameCommentNode,TameBackedNode),cajaVM.def(TameCommentNode)});function
tameAttributeNode(node,ownerElement){var self;return node===null||node===undefined?node:taming.hasTameTwin(node)?taming.tame(node):(self=new(tamingClassTable.getTamingCtor('Attr'))(node,ownerElement),taming.tamesTo(node,self),self)}tamingClassTable.registerLazy('Attr',function(){var
TameAttrConf=TameBackedNodeConf.subtype('TameAttr'),nameAccessor,notImplementedNodeMethod,valueAccessor;function
TameBackedAttributeNode(node,ownerElement){var ownerPolicy;if('ownerElement'in node&&node.ownerElement!==ownerElement)throw new
Error('Inconsistent ownerElement');ownerPolicy=TameElementConf.amplify(defaultTameNode(ownerElement),function(ownerPriv){return ownerPriv.policy}),TameBackedNode.call(this,node,ownerPolicy),TameAttrConf.confide(this,taming),TameAttrConf.amplify(this,function(privates){privates.ownerElement=ownerElement})}return inertCtor(TameBackedAttributeNode,TameBackedNode),nameAccessor=PT.ROView(function(name){return cajaPrefRe.test(name)&&(name=name.substring(cajaPrefix.length)),name}),valueAccessor={'enumerable':true,'get':innocuous(function(){return this.ownerElement.getAttribute(this.name)}),'set':innocuous(function(value){return this.ownerElement.setAttribute(this.name,value)})},notImplementedNodeMethod={'enumerable':true,'value':innocuous(function(){throw new
Error('Not implemented.')})},Props.define(TameBackedAttributeNode.prototype,TameAttrConf,{'nodeName':nameAccessor,'name':nameAccessor,'specified':{'enumerable':true,'get':innocuous(function(){return this.ownerElement.hasAttribute(this.name)})},'nodeValue':valueAccessor,'value':valueAccessor,'ownerElement':{'enumerable':true,'get':TameAttrConf.amplifying(function(privates){return defaultTameNode(privates.ownerElement)})},'nodeType':P_constant(2),'firstChild':P_UNIMPLEMENTED,'lastChild':P_UNIMPLEMENTED,'nextSibling':P_UNIMPLEMENTED,'previousSibling':P_UNIMPLEMENTED,'parentNode':P_UNIMPLEMENTED,'childNodes':P_UNIMPLEMENTED,'attributes':P_UNIMPLEMENTED,'cloneNode':Props.ampMethod(function(privates,deep){var
clone=bridal.cloneNode(privates.feral,Boolean(deep));return tameAttributeNode(clone,privates.ownerElement)}),'appendChild':notImplementedNodeMethod,'insertBefore':notImplementedNodeMethod,'removeChild':notImplementedNodeMethod,'replaceChild':notImplementedNodeMethod}),cajaVM.def(TameBackedAttributeNode)}),TameElementConf=TameBackedNodeConf.subtype('TameElement');function
registerElementScriptAttributeHandlers(tameElementPrototype){var seenAlready={},attrNameRe=/::(.*)/,html4Attrib;for(html4Attrib
in html4.ATTRIBS)html4.atype.SCRIPT===html4.ATTRIBS[html4Attrib]&&(function(attribName){if(Object.prototype.hasOwnProperty.call(seenAlready,attribName))return;seenAlready[attribName]=true,Object.defineProperty(tameElementPrototype,attribName,{'enumerable':canHaveEnumerableAccessors,'configurable':false,'set':TameElementConf.amplifying(function
eventHandlerSetter(privates,listener){return privates.policy.requireEditable(),listener?(privates.feral[attribName]=makeEventHandlerWrapper(privates.feral,listener)):(privates.feral[attribName]=null),listener})})})((html4Attrib.match(attrNameRe))[1])}function
TameElement(node,opt_policy,opt_proxyType){assert(node.nodeType===1),TameBackedNode.call(this,node,opt_policy,opt_proxyType),TameElementConf.confide(this),TameElementConf.amplify(this,function(privates){privates.geometryDelegate=node})}defaultNodeClassCtor=tamingClassTable.registerSafeCtor('Element',inertCtor(TameElement,TameBackedNode,'HTMLElement')),registerElementScriptAttributeHandlers(TameElement.prototype);function
innerTextOf(rawNode,out){var c;switch(rawNode.nodeType){case 1:if(htmlSchema.element(rawNode.tagName).allowed)for(c=rawNode.firstChild;c;c=c.nextSibling)innerTextOf(c,out);break;case
3:case 4:out[out.length]=rawNode.data;break;case 11:for(c=rawNode.firstChild;c;c=c.nextSibling)innerTextOf(c,out)}}geometryDelegateProperty=Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){return+privates.geometryDelegate[prop]})}}),geometryDelegatePropertySettable=Props.markPropMaker(function(env){var
desc=geometryDelegateProperty(env),prop=env.prop;return desc.set=env.amplifying(function(privates,value){privates.policy.requireEditable(),privates.geometryDelegate[prop]=+value}),desc}),textContentProp={'enumerable':true,'get':TameElementConf.amplifying(function(privates){var
text=[];return innerTextOf(privates.feral,text),text.join('')}),'set':TameElementConf.amplifying(function(privates,newText){var
c,el,newTextStr;privates.policy.requireChildrenEditable(),newTextStr=newText!=null?String(newText):'',el=privates.feral;for(;c=el.firstChild;)el.removeChild(c);newTextStr&&el.appendChild(el.ownerDocument.createTextNode(newTextStr))})},tagNameAttr=PT.ROView(function(name){return realToVirtualElementName(String(name))}),Props.define(TameElement.prototype,TameElementConf,{'id':PT.filterAttr(defaultToEmptyStr,identity),'className':{'enumerable':true,'get':innocuous(function(){return this.getAttribute('class')||''}),'set':innocuous(function(classes){return this.setAttribute('class',String(classes))})},'title':PT.filterAttr(defaultToEmptyStr,String),'dir':PT.filterAttr(defaultToEmptyStr,String),'textContent':textContentProp,'innerText':textContentProp,'nodeName':tagNameAttr,'tagName':tagNameAttr,'style':{'enumerable':true,'get':TameElementConf.amplifying(function(privates){return new(tamingClassTable.getTamingCtor('CSSStyleDeclaration'))(privates.feral.style,privates.policy.editable,this)}),'set':innocuous(function(value){this.setAttribute('style',value)})},'innerHTML':{'enumerable':true,'get':innocuous(function(){return htmlFragmentSerialization(this)}),'set':TameElementConf.amplifying(function(privates,htmlFragment){var
htmlFragmentString,isRCDATA,node,sanitizedHtml,schemaElem;privates.policy.requireChildrenEditable(),node=privates.feral,schemaElem=htmlSchema.element(node.tagName);if(!schemaElem.allowed)throw new
Error(('Can\'t set .innerHTML of non-whitelisted \x3c'+node.tagName+'\x3e'));isRCDATA=schemaElem.contentIsRCDATA,htmlFragment===null?(htmlFragmentString=''):(htmlFragmentString=''+htmlFragment),sanitizedHtml=isRCDATA?html.normalizeRCData(htmlFragmentString):sanitizeHtml(htmlFragmentString),node.innerHTML=sanitizedHtml})},'offsetParent':{'enumerable':true,'get':TameElementConf.amplifying(function(privates){var
feralOffsetParent=privates.feral.offsetParent;return feralOffsetParent&&(feralOffsetParent===feralPseudoDocument?TameBackedNodeConf.amplify(tameDocument.body,function(bodyPriv){var
feralBody=bodyPriv.feral,ancestor;for(ancestor=privates.feral.parentNode;ancestor!==feralPseudoDocument;ancestor=ancestor.parentNode)if(ancestor===feralBody)return defaultTameNode(feralBody);return null}):tameRelatedNode(feralOffsetParent))})},'accessKey':PT.rw,'tabIndex':PT.rw,'clientLeft':geometryDelegateProperty,'clientTop':geometryDelegateProperty,'clientWidth':geometryDelegateProperty,'clientHeight':geometryDelegateProperty,'offsetLeft':geometryDelegateProperty,'offsetTop':geometryDelegateProperty,'offsetWidth':geometryDelegateProperty,'offsetHeight':geometryDelegateProperty,'scrollLeft':geometryDelegatePropertySettable,'scrollTop':geometryDelegatePropertySettable,'scrollWidth':geometryDelegateProperty,'scrollHeight':geometryDelegateProperty,'blur':NP_noArgEditVoidMethod,'focus':Props.ampMethod(function(privates){return domicile.handlingUserAction&&privates.feral.focus()}),'setActive':Props.cond(elementForFeatureTests.setActive,Props.ampMethod(function(privates){return domicile.handlingUserAction&&privates.feral.setActive()})),'hasFocus':Props.cond(elementForFeatureTests.hasFocus,Props.ampMethod(function(privates){return privates.feral.hasFocus()})),'getAttribute':Props.ampMethod(function(privates,attribName){var
atype,feral,tagName,value;if(!privates.policy.attributesVisible)return null;feral=privates.feral,attribName=String(attribName).toLowerCase();if(/__$/.test(attribName))throw new
TypeError('Attributes may not end with __');return tagName=feral.tagName.toLowerCase(),atype=htmlSchema.attribute(tagName,attribName).type,atype===void
0?feral.getAttribute(cajaPrefix+attribName):(value=bridal.getAttribute(feral,attribName),'string'!==typeof
value?value:virtualizeAttributeValue(atype,value))}),'getAttributeNode':Props.ampMethod(function(privates,name){var
feral;return privates.policy.attributesVisible?(feral=privates.feral,tameAttributeNode(feral.getAttributeNode(rewriteAttributeName(feral,name)),feral)):null}),'hasAttribute':Props.ampMethod(function(privates,attribName){var
feral=privates.feral;return bridal.hasAttribute(feral,rewriteAttributeName(feral,attribName))}),'setAttribute':Props.ampMethod(function(privates,attribName,value){var
feral=privates.feral,atype,sanitizedValue,tagName;privates.policy.requireEditable(),attribName=String(attribName).toLowerCase();if(/__$/.test(attribName))throw new
TypeError('Attributes may not end with __');return privates.policy.attributesVisible?(tagName=feral.tagName.toLowerCase(),atype=htmlSchema.attribute(tagName,attribName).type,atype===void
0?bridal.setAttribute(feral,cajaPrefix+attribName,value):(sanitizedValue=rewriteAttribute(tagName,attribName,atype,value),sanitizedValue!==null?(bridal.setAttribute(feral,attribName,sanitizedValue),html4.ATTRIBS.hasOwnProperty(tagName+'::target')&&atype===html4.atype.URI&&(sanitizedValue.charAt(0)==='#'?feral.removeAttribute('target'):bridal.setAttribute(feral,'target',getSafeTargetAttribute(tagName,'target',bridal.getAttribute(feral,'target'))))):typeof
console!=='undefined'&&console.warn('Rejecting \x3c'+tagName+'\x3e.setAttribute(',attribName,',',value,')')),value):null}),'removeAttribute':Props.ampMethod(function(privates,attribName){var
feral=privates.feral;privates.policy.requireEditable(),feral.removeAttribute(rewriteAttributeName(feral,attribName))}),'getElementsByTagName':Props.ampMethod(function(privates,tagName){return tameGetElementsByTagName(privates.feral,tagName)}),'getElementsByClassName':Props.ampMethod(function(privates,className){return tameGetElementsByClassName(privates.feral,className)}),'querySelector':Props.cond(elementForFeatureTests.querySelector,Props.ampMethod(function(privates,selector){return tameQuerySelector(privates.feral,selector,false)})),'querySelectorAll':Props.cond(elementForFeatureTests.querySelectorAll,Props.ampMethod(function(privates,selector){return tameQuerySelector(privates.feral,selector,true)})),'getBoundingClientRect':Props.ampMethod(function(privates){var
elRect=bridal.getBoundingClientRect(privates.feral);return TameHTMLDocumentConf.amplify(this.ownerDocument,function(docPriv){var
vdoc=bridal.getBoundingClientRect(docPriv.feralContainerNode),vdocLeft=vdoc.left,vdocTop=vdoc.top;return{'top':elRect.top-vdocTop,'left':elRect.left-vdocLeft,'right':elRect.right-vdocLeft,'bottom':elRect.bottom-vdocTop}})})}),'classList'in
elementForFeatureTests&&Props.define(TameElement.prototype,TameNodeConf,{'classList':PT.TameMemoIf(true,function(privates,feralList){var
element=this;return new TameDOMSettableTokenList(feralList,function classListGetTransform(token){return virtualizeAttributeValue(html4.atype.CLASSES,token)},function
classListSetTransform(token){return rewriteAttribute(element.tagName,'class',html4.atype.CLASSES,token)})})}),cajaVM.def(TameElement),elementCtorConfidences=new
WeakMap,elementCtorConfidences.set(TameElement,TameElementConf);function defineElement(record){var
domClass=record.domClass,construct,opt_policy,proxyType,shouldBeVirtualized,superclassRef;if(!domClass)throw new
Error('Anonymous element classes are useless');superclassRef=record.superclass||'HTMLElement',proxyType=record.proxyType,construct=record.construct,shouldBeVirtualized='virtualized'in
record?record.virtualized:false,opt_policy=record.forceChildrenNotEditable?nodePolicyReadOnlyChildren:null;function
defineElementThunk(){var superclass=typeof superclassRef==='string'?tamingClassTable.getTamingCtor(superclassRef):superclassRef,confidence=elementCtorConfidences.get(superclass).subtype(domClass);function
TameSpecificElement(node){var isVirtualized;if(shouldBeVirtualized!==null){isVirtualized=htmlSchema.isVirtualizedElementName(node.tagName);if(!isVirtualized!==!shouldBeVirtualized)throw new
Error(('Domado internal inconsistency: '+node.tagName+' has inconsistent virtualization state with class '+record.domClass))}superclass.call(this,node,opt_policy,proxyType),confidence.confide(this,taming),construct&&confidence.amplify(this,construct)}return inertCtor(TameSpecificElement,superclass),record.properties&&Props.define(TameSpecificElement.prototype,confidence,record.properties()),elementCtorConfidences.set(TameSpecificElement,confidence),cajaVM.def(TameSpecificElement)}tamingClassTable.registerLazy(domClass,defineElementThunk)}cajaVM.def(defineElement);function
defineTrivialElement(domClass){defineElement({'domClass':domClass})}defineElement({'domClass':'HTMLAnchorElement','properties':function(){return{'hash':PT.filter(false,function(value){return unsuffix(value,idSuffix,value)},false,identity),'href':NP_UriValuedProperty('a','href')}}}),defineElement({'superclass':'HTMLMediaElement','domClass':'HTMLAudioElement'}),namedConstructors.Audio=innocuous(function
AudioCtor(src){var element=tameDocument.createElement('audio');return element.preload='auto',src!==undefined&&(element.src=src),element}),defineTrivialElement('HTMLBRElement'),defineElement({'virtualized':true,'domClass':'HTMLBodyElement','properties':function(){return{'setAttribute':Props.overridable(true,innocuous(function(attrib,value){var
attribName;TameElement.prototype.setAttribute.call(this,attrib,value),attribName=String(attrib).toLowerCase(),attribName==='onload'&&(tameWindow[attribName]=cajaVM.compileExpr('function cajaEventHandlerAttribFn_'+attribName+'(event) {\n'+value+'\n}')(tameWindow))}))}}}),(function(){var
canvasTest=document.createElement('canvas'),colorNameTable,tameDrawText,tameNoArgOp;if(typeof
canvasTest.getContext!=='function')return;function enforceType(specimen,typename,opt_name){if(typeof
specimen!==typename)throw new Error(('expected '+typename+' instead of '+typeof specimen+': '+(opt_name||specimen)));return specimen}function
sanitizeCssValue(cssPropertyName,value){var tokens;return typeof value!=='string'?'':(tokens=lexCss(value),sanitizeCssProperty(cssPropertyName,tokens),tokens.join(' '))}function
sanitizeFont(value){return sanitizeCssValue('font',value)}function sanitizeColor(value){var
style=sanitizeCssValue('color',value);return/\binherit\b/.test(style)?'':style}colorNameTable={' black':'#000000',' silver':'#c0c0c0',' gray':'#808080',' white':'#ffffff',' maroon':'#800000',' red':'#ff0000',' purple':'#800080',' fuchsia':'#ff00ff',' green':'#008000',' lime':'#00ff00',' olive':'#808000',' yellow':'#ffff00',' navy':'#000080',' blue':'#0000ff',' teal':'#008080',' aqua':'#00ffff'};function
StringTest(strings){var table={},i;for(i=strings.length;--i>=0;)table[strings[+i]]=table;return cajaVM.constFunc(function(string){return typeof
string==='string'&&table[string]===table})}function canonColor(colorString){return colorNameTable[' '+colorString]||colorString}tamingClassTable.registerLazy('ImageData',function(){function
TameImageData(imageData){TameImageDataConf.confide(this,taming),taming.permitUntaming(this),this.width=Number(imageData.width),this.height=Number(imageData.height),TameImageDataConf.amplify(this,function(privates){privates.feral=imageData,privates.tamePixelArray=undefined,privates.writeback=function(){privates.tamePixelArray&&privates.feral.data.set(privates.tamePixelArray)},Object.preventExtensions(privates)}),Object.freeze(this)}return inertCtor(TameImageData,Object),Props.define(TameImageData.prototype,TameImageDataConf,{'toString':Props.overridable(false,innocuous(function(){return'[domado object ImageData]'})),'data':Props.ampGetter(function(privates){return privates.tamePixelArray||(privates.tamePixelArray=new
Uint8ClampedArray(privates.feral.data)),privates.tamePixelArray})}),cajaVM.def(TameImageData)}),tamingClassTable.registerLazy('CanvasGradient',function(){function
TameGradient(gradient){TameGradientConf.confide(this,taming),TameGradientConf.amplify(this,function(privates){privates.feral=gradient}),taming.tamesTo(gradient,this),Object.freeze(this)}return inertCtor(TameGradient,Object),Props.define(TameGradient.prototype,TameGradientConf,{'toString':Props.plainMethod(function(){return'[domado object CanvasGradient]'}),'addColorStop':tameMethodCustom(function(privates,offset,color){var
sanColor;enforceType(offset,'number','color stop offset');if(!(0<=offset&&offset<=1))throw new
Error(INDEX_SIZE_ERROR);sanColor=sanitizeColor(color);if(sanColor==='')throw new
Error('SYNTAX_ERR');privates.feral.addColorStop(offset,sanColor)})}),cajaVM.def(TameGradient)});function
enforceFinite(value,name){enforceType(value,'number',name);if(!isFinite(value))throw new
Error('NOT_SUPPORTED_ERR')}tameNoArgOp=Props.markPropMaker(function(env){var prop=env.prop;return{'enumerable':true,'value':env.amplifying(function(privates){if(arguments.length!==1)throw new
Error((prop+' takes no args, not '+(arguments.length-1)));privates.feral[prop]()})}});function
tameFloatsOp(count){return Props.markPropMaker(function(env){var prop=env.prop;return{'enumerable':true,'value':env.amplifying(function(privates){var
args,feral,i;if(arguments.length-1!==count)throw new Error((prop+' takes '+count+' args, not '+(arguments.length-1)));args=new
Array(count);for(i=0;i<count;++i)args[+i]=enforceType(arguments[+i+1],'number',prop+' argument '+i);feral=privates.feral,feral[prop].apply(feral,args)})}})}function
tameRectMethod(resultFn){return Props.markPropMaker(function(env){var prop=env.prop;return{'enumerable':true,'value':env.amplifying(function(privates,x,y,w,h){if(arguments.length!==5)throw new
Error((prop+' takes 4 args, not '+(arguments.length-1)));return enforceType(x,'number','x'),enforceType(y,'number','y'),enforceType(w,'number','width'),enforceType(h,'number','height'),resultFn(privates.feral[prop](x,y,w,h))})}})}tameDrawText=Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'value':env.amplifying(function(privates,text,x,y,maxWidth){enforceType(text,'string','text'),enforceType(x,'number','x'),enforceType(y,'number','y');switch(arguments.length-1){case
3:return privates.feral[prop](text,x,y),void 0;case 4:return enforceType(maxWidth,'number','maxWidth'),privates.feral[prop](text,x,y,maxWidth),void
0;default:throw new Error((prop+' cannot accept '+(arguments.length-1)+' arguments'))}})}});function
tameMethodCustom(baseFunc,dontCheckLength){var expectedLength=baseFunc.length-1;return Props.markPropMaker(function(env){var
prop=env.prop,ampFn=env.amplifying(baseFunc);function argCheckingWrapper(){if(arguments.length!==expectedLength)throw new
Error((env+' takes '+expectedLength+' args, not '+arguments.length));return ampFn.apply(this,arguments)}return{'enumerable':true,'value':dontCheckLength?ampFn:argCheckingWrapper}})}tamingClassTable.registerLazy('TextMetrics',function(){function
TameTextMetrics(feralMetrics){['actualBoundingBoxAscent','actualBoundingBoxDescent','actualBoundingBoxLeft','actualBoundingBoxRight','alphabeticBaseline','emHeightAscent','emHeightDescent','fontBoundingBoxAscent','fontBoundingBoxDescent','hangingBaseline','ideographicBaseline','width'].forEach(function(prop){this[prop]=+feralMetrics[prop]},this),Object.freeze(this)}return inertCtor(TameTextMetrics,Object),cajaVM.def(TameTextMetrics)}),tamingClassTable.registerLazy('CanvasRenderingContext2D',function(){var
TameContext2DConf=new Confidence('TameContext2D'),CP_STYLE;function TameContext2D(feralContext,policy){TameContext2DConf.confide(this,taming),TameContext2DConf.amplify(this,function(privates){privates.feral=feralContext,privates.policy=policy,Object.preventExtensions(privates)})}return inertCtor(TameContext2D,Object),TameContext2D.prototype.toString=cajaVM.constFunc(function(){return'[domado object CanvasRenderingContext2D]'}),Props.define(TameContext2D.prototype,TameContext2DConf,{'save':tameNoArgOp,'restore':tameNoArgOp,'scale':tameFloatsOp(2),'rotate':tameFloatsOp(1),'translate':tameFloatsOp(2),'transform':tameFloatsOp(6),'setTransform':tameFloatsOp(6),'createLinearGradient':tameMethodCustom(function(privates,x0,y0,x1,y1){return enforceType(x0,'number','x0'),enforceType(y0,'number','y0'),enforceType(x1,'number','x1'),enforceType(y1,'number','y1'),new(tamingClassTable.getTamingCtor('CanvasGradient'))((privates.feral.createLinearGradient(x0,y0,x1,y1)))}),'createRadialGradient':tameMethodCustom(function(privates,x0,y0,r0,x1,y1,r1){return enforceType(x0,'number','x0'),enforceType(y0,'number','y0'),enforceType(r0,'number','r0'),enforceType(x1,'number','x1'),enforceType(y1,'number','y1'),enforceType(r1,'number','r1'),new(tamingClassTable.getTamingCtor('CanvasGradient'))((privates.feral.createRadialGradient(x0,y0,r0,x1,y1,r1)))}),'createPattern':tameMethodCustom(function(privates,imageElement,repetition){throw new
Error('Domado: canvas createPattern not yet implemented')}),'clearRect':tameRectMethod(function(){}),'fillRect':tameRectMethod(function(){}),'strokeRect':tameRectMethod(function(){}),'beginPath':tameNoArgOp,'closePath':tameNoArgOp,'moveTo':tameFloatsOp(2),'lineTo':tameFloatsOp(2),'quadraticCurveTo':tameFloatsOp(4),'bezierCurveTo':tameFloatsOp(6),'arcTo':tameFloatsOp(5),'rect':tameFloatsOp(4),'arc':tameMethodCustom(function(privates,x,y,radius,startAngle,endAngle,anticlockwise){enforceType(x,'number','x'),enforceType(y,'number','y'),enforceType(radius,'number','radius'),enforceType(startAngle,'number','startAngle'),enforceType(endAngle,'number','endAngle'),anticlockwise=anticlockwise||false,enforceType(anticlockwise,'boolean','anticlockwise'),privates.feral.arc(x,y,radius,startAngle,endAngle,anticlockwise)}),'fill':tameNoArgOp,'stroke':tameNoArgOp,'clip':tameNoArgOp,'isPointInPath':tameMethodCustom(function(privates,x,y){return enforceType(x,'number','x'),enforceType(y,'number','y'),enforceType(privates.feral.isPointInPath(x,y),'boolean')}),'fillText':tameDrawText,'strokeText':tameDrawText,'measureText':tameMethodCustom(function(privates,string){return enforceType(string,'string','measureText argument'),new(tamingClassTable.getTamingCtor('TextMetrics'))((privates.feral.measureText(string)))}),'drawImage':tameMethodCustom(function(privates,imageElement){throw new
Error('Domado: canvas drawImage not yet implemented')}),'createImageData':tameMethodCustom(function(privates,sw,sh){return enforceType(sw,'number','sw'),enforceType(sh,'number','sh'),new(tamingClassTable.getTamingCtor('ImageData'))((privates.feral.createImageData(sw,sh)))}),'getImageData':tameRectMethod(function(image){return new(tamingClassTable.getTamingCtor('ImageData'))(image)}),'putImageData':tameMethodCustom(function(privates,tameImageData,dx,dy,dirtyX,dirtyY,dirtyWidth,dirtyHeight){tameImageData=TameImageDataT.coerce(tameImageData),enforceFinite(dx,'dx'),enforceFinite(dy,'dy');switch(arguments.length-1){case
3:dirtyX=0,dirtyY=0,dirtyWidth=tameImageData.width,dirtyHeight=tameImageData.height;break;case
7:enforceFinite(dirtyX,'dirtyX'),enforceFinite(dirtyY,'dirtyY'),enforceFinite(dirtyWidth,'dirtyWidth'),enforceFinite(dirtyHeight,'dirtyHeight');break;default:throw'putImageData cannot accept '+(arguments.length-1)+' arguments'}TameImageDataConf.amplify(tameImageData,function(imageDataPriv){imageDataPriv.writeback(),privates.feral.putImageData(imageDataPriv.feral,dx,dy,dirtyX,dirtyY,dirtyWidth,dirtyHeight)})},true)}),CP_STYLE=Props.markPropMaker(function(env){var
prop=env.prop;return{'enumerable':true,'get':env.amplifying(function(privates){var
value=privates.feral[prop];if(typeof value==='string')return canonColor(value);else
if(cajaVM.passesGuard(TameGradientT,taming.tame(value)))return taming.tame(value);throw new
Error(('Internal: Can\'t tame value '+value+' of '+prop))}),'set':env.amplifying(function(privates,newValue){var
safeColor=sanitizeColor(newValue);return safeColor!==''?(privates.feral[prop]=safeColor):typeof
newValue==='object'&&cajaVM.passesGuard(TameGradientT,newValue)&&(privates.feral[prop]=taming.untame(newValue)),newValue})}}),Props.define(TameContext2D.prototype,TameContext2DConf,{'globalAlpha':PT.RWCond(function(v){return typeof
v==='number'&&0.0<=v&&v<=1.0}),'globalCompositeOperation':PT.RWCond(StringTest(['source-atop','source-in','source-out','source-over','destination-atop','destination-in','destination-out','destination-over','lighter','copy','xor'])),'strokeStyle':CP_STYLE,'fillStyle':CP_STYLE,'lineWidth':PT.RWCond(function(v){return typeof
v==='number'&&0.0<v&&v!==Infinity}),'lineCap':PT.RWCond(StringTest(['butt','round','square'])),'lineJoin':PT.RWCond(StringTest(['bevel','round','miter'])),'miterLimit':PT.RWCond(function(v){return typeof
v==='number'&&0<v&&v!==Infinity}),'shadowOffsetX':PT.RWCond(function(v){return typeof
v==='number'&&isFinite(v)}),'shadowOffsetY':PT.RWCond(function(v){return typeof
v==='number'&&isFinite(v)}),'shadowBlur':PT.RWCond(function(v){return typeof v==='number'&&0.0<=v&&v!==Infinity}),'shadowColor':Props.markPropMaker(function(env){return{'enumerable':true,'get':CP_STYLE(env).get,'set':PT.filterProp(identity,sanitizeColor)(env).set}}),'font':PT.filterProp(identity,sanitizeFont),'textAlign':PT.RWCond(StringTest(['start','end','left','right','center'])),'textBaseline':PT.RWCond(StringTest(['top','hanging','middle','alphabetic','ideographic','bottom']))}),cajaVM.def(TameContext2D)}),defineElement({'domClass':'HTMLCanvasElement','properties':function(){return{'height':PT.filter(false,identity,false,Number),'width':PT.filter(false,identity,false,Number),'getContext':Props.ampMethod(function(privates,contextId){var
TameContext,feralContext;privates.policy.requireEditable(),enforceType(contextId,'string','contextId');switch(contextId){case'2d':return feralContext=privates.feral.getContext('2d'),TameContext=tamingClassTable.getTamingCtor('CanvasRenderingContext2D'),taming.hasTameTwin(feralContext)||taming.tamesTo(feralContext,cajaVM.def(new
TameContext(feralContext,privates.policy))),taming.tame(feralContext);default:return null}}),'toDataURL':Props.ampMethod(function(privates,opt_type,opt_arg){opt_type!==undefined&&(opt_type=String(opt_type).toLowerCase());switch(opt_type){case'image/png':return privates.feral.toDataURL('image/png');case'image/jpeg':return privates.feral.toDataURL('image/jpeg',+opt_arg);default:console.warn('Domado: Discarding unrecognized MIME type '+opt_type+' for canvas.toDataURL.');case
undefined:return privates.feral.toDataURL()}})}}})})(),defineTrivialElement('HTMLDListElement'),defineTrivialElement('HTMLDivElement');function
FormElementProxyHandler(target){CollectionProxyHandler.call(this,target)}FormElementProxyHandler.domadoProxyInit=cajaVM.constFunc(function(proxy,handler){var
TameFormElementConf=elementCtorConfidences.get(tamingClassTable.getTamingCtor('HTMLFormElement'));[TameNodeConf,TameBackedNodeConf,TameElementConf,TameFormElementConf].forEach(function(c){c.confide(proxy,taming,handler.target)})}),inherit(FormElementProxyHandler,CollectionProxyHandler),Props.define(FormElementProxyHandler.prototype,null,{'toString':Props.overridable(false,function(){return'[FormElementProxyHandler]'}),'col_lookup':Props.overridable(true,cajaVM.constFunc(function(name){return TameElementConf.amplify(this.target,function(privates){return privates.feral.elements.namedItem(name)})})),'col_evaluate':Props.overridable(true,cajaVM.constFunc(function(nodeOrList){var
tameList;if(taming.hasTameTwin(nodeOrList))return taming.tame(nodeOrList);else if('nodeType'in
nodeOrList)return defaultTameNode(nodeOrList);else if('length'in nodeOrList)return tameList=new
TameNodeList(nodeOrList,defaultTameNode),taming.tamesTo(nodeOrList,tameList),tameList;throw new
Error('could not interpret form.elements result')})),'col_names':Props.overridable(true,cajaVM.constFunc(function(){return Object.keys(this.target.elements)}))}),cajaVM.def(FormElementProxyHandler),defineElement({'domClass':'HTMLFormElement','proxyType':FormElementProxyHandler,'construct':function(privates){Object.defineProperty(this,'length',{'value':privates.feral.length})},'properties':function(){return{'action':PT.filterAttr(defaultToEmptyStr,String),'elements':PT.TameMemoIf(false,function(privates,f){return tameHTMLCollection(f,defaultTameNode)}),'enctype':PT.filterAttr(defaultToEmptyStr,String),'encoding':Props.actAs('enctype',PT.filterAttr(defaultToEmptyStr,String)),'method':PT.filterAttr(defaultToEmptyStr,String),'target':PT.filterAttr(defaultToEmptyStr,String),'submit':Props.ampMethod(function(privates){return privates.policy.requireEditable(),domicile.handlingUserAction&&privates.feral.submit()}),'reset':Props.ampMethod(function(privates){return privates.policy.requireEditable(),privates.feral.reset()})}}}),defineTrivialElement('HTMLHeadingElement'),defineTrivialElement('HTMLHRElement'),defineElement({'virtualized':true,'domClass':'HTMLHeadElement'}),defineElement({'virtualized':true,'domClass':'HTMLHtmlElement'}),defineElement({'domClass':'HTMLIFrameElement','construct':function(privates){privates.contentDomicile=undefined,privates.seenContentDocument=undefined},'properties':function(){return{'align':Props.ampAccessor(function(privates){return privates.feral.align},function(privates,alignment){privates.policy.requireEditable(),alignment=String(alignment),(alignment==='left'||alignment==='right'||alignment==='center')&&(privates.feral.align=alignment)}),'frameBorder':Props.ampAccessor(function(privates){return privates.feral.frameBorder},function(privates,border){privates.policy.requireEditable(),border=String(border).toLowerCase(),(border==='0'||border==='1'||border==='no'||border==='yes')&&(privates.feral.frameBorder=border)}),'height':PT.filterProp(identity,Number),'width':PT.filterProp(identity,Number),'src':PT.filterAttr(identity,identity),'name':PT.filterAttr(identity,identity),'contentDocument':{'enumerable':true,'get':cajaVM.constFunc(function(){return contentDomicile(this).document})},'contentWindow':{'enumerable':true,'get':cajaVM.constFunc(function(){return contentDomicile(this).window})}}}});function
contentDomicile(tameIFrame){var TameIFrameConf=elementCtorConfidences.get(tamingClassTable.getTamingCtor('HTMLIFrameElement'));return TameIFrameConf.amplify(tameIFrame,function(privates){var
frameFeralDoc=privates.feral.contentDocument,child,emitter,subDomicile,tdoc;if(!privates.contentDomicile||frameFeralDoc!==privates.seenContentDocument){if(!frameFeralDoc)return{'document':null,'window':null};subDomicile=privates.contentDomicile=attachDocument('-caja-iframe___',naiveUriPolicy,frameFeralDoc,optTargetAttributePresets,taming,addImports),privates.seenContentDocument=frameFeralDoc,tdoc=subDomicile.document;while(child=tdoc.lastChild)tdoc.removeChild(child);emitter=new
HtmlEmitter(subDomicile.htmlEmitterTarget,naiveUriPolicy.mitigate,subDomicile),emitter.finish()}return privates.contentDomicile})}featureTestImage=document.createElement('img'),defineElement({'domClass':'HTMLImageElement','properties':function(){return{'alt':PT.filterProp(String,String),'height':PT.filterProp(Number,Number),'src':PT.filter(false,String,true,identity),'width':PT.filterProp(Number,Number),'naturalHeight':Props.cond('naturalHeight'in
featureTestImage,PT.filterProp(Number,Number)),'naturalWidth':Props.cond('naturalWidth'in
featureTestImage,PT.filterProp(Number,Number)),'complete':Props.cond('complete'in
featureTestImage,PT.filterProp(Boolean,Boolean))}}}),namedConstructors.Image=innocuous(function
ImageCtor(width,height){var element=tameDocument.createElement('img');return width!==undefined&&(element.width=width),height!==undefined&&(element.height=height),element});function
toInt(x){return x|0}defineElement({'domClass':'CajaFormField','properties':function(){return{'autofocus':NP_reflectBoolean,'disabled':NP_reflectBoolean,'form':PT.related,'maxLength':PT.rw,'name':PT.rw,'value':PT.filter(false,function(x){return x==null?null:String(x)},false,function(x){return x==null?'':''+x})}}}),defineElement({'superclass':'CajaFormField','domClass':'HTMLInputElement','properties':function(){return{'checked':PT.filterProp(identity,Boolean),'defaultChecked':PT.rw,'defaultValue':PT.filter(false,function(x){return x==null?null:String(x)},false,function(x){return x==null?'':''+x}),'min':PT.rw,'max':PT.rw,'readOnly':PT.rw,'selectedIndex':PT.filterProp(identity,toInt),'size':PT.rw,'step':PT.rw,'type':PT.rw,'valueAsNumber':PT.rw,'select':NP_noArgEditVoidMethod,'stepDown':NP_noArgEditVoidMethod,'stepUp':NP_noArgEditVoidMethod}}}),defineElement({'superclass':'CajaFormField','domClass':'HTMLButtonElement','properties':function(){return{'type':PT.filter(false,String,true,String)}}}),defineElement({'superclass':'CajaFormField','domClass':'HTMLSelectElement','properties':function(){return{'multiple':PT.rw,'options':PT.TameMemoIf(nodeListsAreLive,function(privates,f){return new
TameOptionsList(f,defaultTameNode,'name')}),'selectedIndex':PT.filterProp(identity,toInt),'type':PT.ro}}}),defineElement({'superclass':'CajaFormField','domClass':'HTMLTextAreaElement','properties':function(){return{'type':PT.rw}}}),defineElement({'domClass':'HTMLLabelElement','properties':function(){return{'htmlFor':Props.actAs('for',PT.filterAttr(identity,identity))}}}),defineElement({'domClass':'HTMLMediaElement','properties':function(){return{'autoplay':NP_writePolicyOnly,'controls':NP_writePolicyOnly,'crossOrigin':NP_writePolicyOnly,'currentSrc':PT.ro,'currentTime':PT.ro,'defaultMuted':Props.ampAccessor(function(privates){return privates.feral.defaultMuted},function(privates,value){value?this.setAttribute('muted',''):this.removeAttribute('muted')}),'defaultPlaybackRate':PT.filterProp(identity,Number),'duration':PT.ro,'ended':PT.ro,'loop':NP_writePolicyOnly,'mediaGroup':PT.filterAttr(identity,identity),'muted':PT.ro,'networkState':PT.ro,'paused':PT.ro,'playbackRate':PT.filterProp(identity,Number),'preload':NP_writePolicyOnly,'readyState':PT.ro,'seeking':PT.ro,'src':NP_writePolicyOnly,'volume':PT.ro,'canPlayType':Props.ampMethod(function(privates,type){return String(privates.feral.canPlayType(String(type)))}),'load':NP_noArgEditVoidMethod,'pause':NP_noArgEditVoidMethod,'play':Props.ampMethod(function(privates,time){domicile.handlingUserAction&&privates.feral.play()})}}}),defineElement({'domClass':'HTMLOptGroupElement','properties':function(){return{'disabled':NP_reflectBoolean,'label':NP_writePolicyOnly}}}),defineElement({'domClass':'HTMLOptionElement','properties':function(){return{'defaultSelected':PT.filterProp(Boolean,Boolean),'disabled':NP_reflectBoolean,'form':PT.related,'index':PT.filterProp(Number),'label':PT.filterProp(String,String),'selected':PT.filterProp(Boolean,Boolean),'text':PT.filterProp(String,String),'value':PT.filterProp(function(x){return x==null?null:String(x)},function(x){return x==null?'':''+x})}}}),namedConstructors.Option=innocuous(function
OptionCtor(text,value,defaultSelected,selected){var element=tameDocument.createElement('option');return text!==undefined&&(element.text=text),value!==undefined&&(element.value=value),defaultSelected!==undefined&&(element.defaultSelected=defaultSelected),selected!==undefined&&(element.selected=selected),element}),defineTrivialElement('HTMLParagraphElement'),defineTrivialElement('HTMLPreElement');function
dynamicCodeDispatchMaker(privates){var name;return window.cajaDynamicScriptCounter=window.cajaDynamicScriptCounter?window.cajaDynamicScriptCounter+1:0,name='caja_dynamic_script'+window.cajaDynamicScriptCounter+'___',window[name]=function(){try{privates.scriptSrc&&'function'===typeof
domicile.evaluateUntrustedExternalScript&&domicile.evaluateUntrustedExternalScript(URI.utils.resolve(domicile.pseudoLocation.href,privates.scriptSrc),privates.feral)}finally{window[name]=undefined}},name+'();'}postInitCreatedElement=TameElementConf.amplifying(function(privates){privates.feral.tagName==='SCRIPT'&&privates.feral.appendChild(document.createTextNode(dynamicCodeDispatchMaker(privates)))}),defineElement({'domClass':'HTMLScriptElement','forceChildrenNotEditable':true,'construct':function(privates){privates.scriptSrc=undefined},'properties':function(){return{'src':NP_writePolicyOnly,'setAttribute':Props.ampMethod(function(privates,attrib,value){var
feral=privates.feral,attribName;privates.policy.requireEditable(),TameElement.prototype.setAttribute.call(this,attrib,value),attribName=String(attrib).toLowerCase(),'src'===attribName&&(privates.scriptSrc=String(value))})}}}),defineTrivialElement('HTMLSpanElement'),defineElement({'domClass':'HTMLStyleElement','forceChildrenNotEditable':true,'properties':function(){var
styleForFeatureTests=document.createElement('style');return{'disabled':NP_reflectBoolean,'media':NP_writePolicyOnly,'scoped':Props.cond('scoped'in
styleForFeatureTests,PT.filterProp(identity,Boolean)),'type':PT.ro}}}),defineElement({'domClass':'HTMLTableColElement','properties':function(){return{'align':PT.filterProp(identity,identity),'vAlign':PT.filterProp(identity,identity)}}}),defineTrivialElement('HTMLTableCaptionElement'),defineElement({'domClass':'HTMLTableCellElement','properties':function(){return{'colSpan':PT.filterProp(identity,identity),'rowSpan':PT.filterProp(identity,identity),'cellIndex':PT.ro,'noWrap':PT.filterProp(identity,identity)}}}),defineElement({'superclass':'HTMLTableCellElement','domClass':'HTMLTableDataCellElement'}),defineElement({'superclass':'HTMLTableCellElement','domClass':'HTMLTableHeaderCellElement'});function
requireIntIn(idx,min,max){if(idx!==(idx|0)||idx<min||idx>max)throw new Error(INDEX_SIZE_ERROR)}defineElement({'domClass':'HTMLTableRowElement','properties':function(){return{'cells':PT.TameMemoIf(nodeListsAreLive,function(privates,feralList){return new
TameNodeList(feralList,defaultTameNode)}),'rowIndex':PT.ro,'sectionRowIndex':PT.ro,'insertCell':Props.ampMethod(function(privates,index){return privates.policy.requireEditable(),requireIntIn(index,-1,privates.feral.cells.length),defaultTameNode(privates.feral.insertCell(index),privates.editable)}),'deleteCell':Props.ampMethod(function(privates,index){privates.policy.requireEditable(),requireIntIn(index,-1,privates.feral.cells.length),privates.feral.deleteCell(index)})}}}),defineElement({'domClass':'HTMLTableSectionElement','properties':function(){return{'rows':PT.TameMemoIf(nodeListsAreLive,function(privates,feralList){return new
TameNodeList(feralList,defaultTameNode)}),'insertRow':Props.ampMethod(function(privates,index){return privates.policy.requireEditable(),requireIntIn(index,-1,privates.feral.rows.length),defaultTameNode(privates.feral.insertRow(index))}),'deleteRow':Props.ampMethod(function(privates,index){privates.policy.requireEditable(),requireIntIn(index,-1,privates.feral.rows.length),privates.feral.deleteRow(index)})}}}),defineElement({'superclass':'HTMLTableSectionElement','domClass':'HTMLTableElement','properties':function(){return{'tBodies':PT.TameMemoIf(nodeListsAreLive,function(privates,f){return privates.policy.childrenVisible?new
TameNodeList(f,defaultTameNode):fakeNodeList([],'NodeList')}),'tHead':NP_tameDescendant,'tFoot':NP_tameDescendant,'cellPadding':PT.filterAttr(Number,fromInt),'cellSpacing':PT.filterAttr(Number,fromInt),'border':PT.filterAttr(Number,fromInt),'createTHead':NP_noArgEditMethodReturningNode,'deleteTHead':NP_noArgEditVoidMethod,'createTFoot':NP_noArgEditMethodReturningNode,'deleteTFoot':NP_noArgEditVoidMethod,'createCaption':NP_noArgEditMethodReturningNode,'deleteCaption':NP_noArgEditVoidMethod,'insertRow':Props.ampMethod(function(privates,index){return privates.policy.requireEditable(),requireIntIn(index,-1,privates.feral.rows.length),defaultTameNode(privates.feral.insertRow(index))}),'deleteRow':Props.ampMethod(function(privates,index){privates.policy.requireEditable(),requireIntIn(index,-1,privates.feral.rows.length),privates.feral.deleteRow(index)})}}}),defineElement({'virtualized':true,'domClass':'HTMLTitleElement'}),defineTrivialElement('HTMLUListElement'),defineElement({'virtualized':null,'domClass':'HTMLUnknownElement'}),defineElement({'superclass':'HTMLMediaElement','domClass':'HTMLVideoElement','properties':function(){return{'height':PT.rw,'width':PT.rw,'poster':PT.filterAttr(identity,identity),'videoHeight':PT.rw,'videoWidth':PT.rw}}});function
fromInt(x){return''+(x|0)}function tameEvent(event){var tamed;return taming.hasTameTwin(event)||(tamed=new(tamingClassTable.getTamingCtor('Event'))(event,false),taming.tamesTo(event,tamed)),taming.tame(event)}tamingClassTable.registerLazy('Touch',function(){function
TameTouch(feral){this.identifier=+feral.identifier,this.screenX=+feral.screenX,this.screenY=+feral.screenY,this.clientX=+feral.clientX,this.clientY=+feral.clientY,this.pageX=+feral.pageX,this.pageY=+feral.pageY,this.radiusX=+feral.radiusX,this.radiusY=+feral.radiusY,this.rotationAngle=+feral.rotationAngle,this.force=+feral.force,this.target=tameRelatedNode(feral.target),Object.freeze(this)}return inertCtor(TameTouch,Object),cajaVM.def(TameTouch)}),tamingClassTable.registerLazy('TouchList',function(){var
TameTouch=tamingClassTable.getTamingCtor('Touch'),TameTouchListConf=new Confidence('TameTouchList');function
TameTouchList(feralList){var length=feralList.length,feralTouch,i,tamedTouch;this.length=length;for(i=0;i<length;++i)feralTouch=feralList.item(i),tamedTouch=new
TameTouch(feralTouch),taming.tamesTo(feralTouch,tamedTouch),this[i]=tamedTouch;TameTouchListConf.confide(this,taming),TameTouchListConf.amplify(this,function(privates){privates.feral=feralList}),Object.freeze(this)}return inertCtor(TameTouchList,Object),Props.define(TameTouchList.prototype,TameTouchListConf,{'identifiedTouch':Props.ampMethod(function(privates,id){var
feralTouch;id=+id,feralTouch=privates.feral.identifiedTouch(id);if(!feralTouch)return null;if(!taming.hasTameTwin(feralTouch))throw new
Error('can\'t happen: untamed Touch object');return taming.tame(feralTouch)}),'item':Props.plainMethod(function(index){return this[+index]})}),cajaVM.def(TameTouchList)}),tamingClassTable.registerLazy('Event',function(){var
featureTestKeyEvent,touchListProp;function eventVirtualizingAccessor(fn){return Props.addOverride(Props.ampGetter(fn))}function
P_e_view(transform){return Props.addOverride(PT.ROView(transform))}featureTestKeyEvent={};try{featureTestKeyEvent=document.createEvent('KeyboardEvent')}catch(e){}function
tameEventView(view){return view===window?tameWindow:view===null||view===undefined?view:(typeof
console!=='undefined'&&console.warn('Domado: Discarding unrecognized feral view value:',view),null)}function
untameEventView(view){return view===tameWindow?window:view===null||view===undefined?view:(typeof
console!=='undefined'&&console.warn('Domado: Discarding unrecognized guest view value:',view),null)}function
tameInitSomeEvent(privates,method,type,bubbles,cancelable,args){if(privates.notYetDispatched)bridal.initEvent(privates.feral,method,type,bubbles,cancelable,args)}touchListProp=Props.addOverride(PT.TameMemoIf(true,function(privates,feralList){return feralList?new(tamingClassTable.getTamingCtor('TouchList'))(feralList):undefined}));function
TameEvent(event,isSyntheticEvent){return assert(!!event),TameEventConf.confide(this,taming),eventAmplify(this,function(privates){privates.feral=event,privates.notYetDispatched=isSyntheticEvent,Object.preventExtensions(privates)}),this}return inertCtor(TameEvent,Object),Props.define(TameEvent.prototype,TameEventConf,{'eventPhase':P_e_view(Number),'type':P_e_view(function(type){return bridal.untameEventType(String(type))}),'bubbles':P_e_view(Boolean),'cancelable':P_e_view(Boolean),'view':P_e_view(tameEventView),'target':eventVirtualizingAccessor(function(privates){var
event=privates.feral;return tameEventTarget(event.target||event.srcElement)}),'srcElement':P_e_view(tameRelatedNode),'currentTarget':P_e_view(tameEventTarget),'relatedTarget':eventVirtualizingAccessor(function(privates){var
e=privates.feral,t=e.relatedTarget;return t||(e.type==='mouseout'?(t=e.toElement):e.type==='mouseover'&&(t=e.fromElement)),tameEventTarget(t)}),'fromElement':P_e_view(tameRelatedNode),'toElement':P_e_view(tameRelatedNode),'detail':P_e_view(Number),'pageX':P_e_view(Number),'pageY':P_e_view(Number),'altKey':P_e_view(Boolean),'ctrlKey':P_e_view(Boolean),'metaKey':P_e_view(Boolean),'shiftKey':P_e_view(Boolean),'button':P_e_view(function(v){return v&&Number(v)}),'clientX':P_e_view(Number),'clientY':P_e_view(Number),'screenX':P_e_view(Number),'screenY':P_e_view(Number),'which':P_e_view(function(v){return v&&Number(v)}),'location':P_e_view(Number),'keyCode':P_e_view(function(v){return v&&Number(v)}),'charCode':P_e_view(function(v){return v&&Number(v)}),'key':Props.cond('key'in
featureTestKeyEvent,P_e_view(String)),'char':Props.cond('char'in featureTestKeyEvent,P_e_view(String)),'touches':touchListProp,'targetTouches':touchListProp,'changedTouches':touchListProp,'stopPropagation':Props.ampMethod(function(privates){privates.feral.stopPropagation?privates.feral.stopPropagation():(privates.feral.cancelBubble=true)}),'preventDefault':Props.ampMethod(function(privates){privates.feral.preventDefault?privates.feral.preventDefault():(privates.feral.returnValue=false)}),'initEvent':Props.ampMethod(function(privates,type,bubbles,cancelable){tameInitSomeEvent.call(this,privates,'initEvent',type,bubbles,cancelable,[])}),'initUIEvent':Props.ampMethod(function(privates,type,bubbles,cancelable,view,detail){tameInitSomeEvent.call(this,privates,'initUIEvent',type,bubbles,cancelable,[untameEventView(view),+detail])}),'initMouseEvent':Props.ampMethod(function(privates,type,bubbles,cancelable,view,detail,screenX,screenY,clientX,clientY,ctrlKey,altKey,shiftKey,metaKey,button,relatedTarget){tameInitSomeEvent.call(this,privates,'initMouseEvent',type,bubbles,cancelable,[untameEventView(view),+detail,+screenX,+screenY,+clientX,+clientY,Boolean(ctrlKey),Boolean(altKey),Boolean(shiftKey),Boolean(metaKey),+button,toFeralNode(relatedTarget)])}),'initKeyEvent':Props.cond('initKeyEvent'in
featureTestKeyEvent,Props.ampMethod(function(privates,type,bubbles,cancelable,view,ctrlKey,altKey,shiftKey,metaKey,keyCode,charCode){tameInitSomeEvent.call(this,privates,'initKeyEvent',type,bubbles,cancelable,[untameEventView(view),Boolean(ctrlKey),Boolean(altKey),Boolean(shiftKey),Boolean(metaKey),Number(keyCode),Number(charCode)])})),'initKeyboardEvent':Props.cond('initKeyboardEvent'in
featureTestKeyEvent,Props.ampMethod(function(privates,type,bubbles,cancelable,view,char,key,location,modifiers,repeat,locale){tameInitSomeEvent.call(this,privates,'initKeyboardEvent',type,bubbles,cancelable,[untameEventView(view),String(char),String(key),Number(location),String(modifiers),Boolean(repeat),String(locale)])})),'initCustomEvent':Props.ampMethod(function(privates,type,bubbles,cancelable,detail){tameInitSomeEvent.call(this,privates,'initCustomEvent',type,bubbles,cancelable,[undefined]),this.detail=detail}),'toString':Props.overridable(false,innocuous(function(){return'[domado object Event]'}))}),cajaVM.def(TameEvent)}),eventTypeWhitelist={'Events':0,'Event':0,'UIEvents':0,'UIEvent':0,'MouseEvents':0,'MouseEvent':0,'HTMLEvents':0,'KeyEvents':0,'KeyboardEvent':0,'CustomEvent':0};function
escapeCSSString(value){return'\"'+String(value).replace(/[^\w-]/g,'\\$\x26')+'\"'}TameHTMLDocumentConf=TameNodeConf.subtype('TameHTMLDocument');function
TameHTMLDocument(doc,container,domain){TameNode.call(this,nodePolicyEditable),TameHTMLDocumentConf.confide(this,taming),TameHTMLDocumentConf.amplify(this,function(privates){privates.feralDoc=doc,privates.feralContainerNode=container,privates.onLoadListeners=[],privates.onDCLListeners=[],privates.wrappedListeners=[],privates.feralEventTarget=container,privates.tameContainerNode=finishNode(makeTameNodeByType(container))}),Props.define(this,TameHTMLDocumentConf,{'domain':P_constant(domain)}),installLocation(this),taming.tamesTo(container,this)}tamingClassTable.registerSafeCtor('Document',inertCtor(TameHTMLDocument,TameNode,'HTMLDocument')),forwardContainerProp=Props.markPropMaker(function(env){var
prop=env.prop;return Props.ampGetter(function(privates){return privates.tameContainerNode[prop]})}),forwardContainerMethod=Props.markPropMaker(function(env){var
prop=env.prop;return Props.ampMethod(function(privates,opt1,opt2){return privates.tameContainerNode[prop](opt1,opt2)})}),Props.define(TameHTMLDocument.prototype,TameHTMLDocumentConf,{'nodeType':P_constant(9),'nodeName':P_constant('#document'),'nodeValue':P_constant(null),'firstChild':forwardContainerProp,'lastChild':forwardContainerProp,'nextSibling':P_constant(null),'previousSibling':P_constant(null),'childNodes':forwardContainerProp,'attributes':{'enumerable':true,'get':innocuous(function(){return fakeNodeList([],'HTMLCollection')})},'parentNode':P_constant(null),'body':{'enumerable':true,'get':innocuous(function(){var
htmlEl=this.documentElement,n;if(!htmlEl)return null;for(n=htmlEl.firstChild;n;n=n.nextSibling)if(n.nodeName==='BODY'||n.nodeName==='FRAMESET')return n;return null}),'set':innocuous(function(newBody){var
currentBody,htmlEl;newBody=TameNodeT.coerce(newBody);if(!(newBody.nodeName==='BODY'||newBody.nodeName==='FRAMESET'))throw new
Error('Cannot set document.body except to \x3cbody\x3e or \x3cframeset\x3e.');currentBody=this.body;if(newBody===currentBody)return;htmlEl=this.documentElement;if(currentBody!==null)return htmlEl.replaceChild(newBody,currentBody),void
0;if(!htmlEl)throw new Error('Cannot set document.body with no \x3chtml\x3e.');htmlEl.appendChild(newBody)})},'documentElement':{'enumerable':true,'get':innocuous(function(){var
n;for(n=this.firstChild;n;n=n.nextSibling)if(n.nodeName==='HTML')return n;for(n=this.firstChild;n;n=n.nextSibling)if(n.nodeType===1)return n;return null})},'forms':Props.ampGetter(function(privates){var
tameForms=[],i,tameForm;for(i=0;i<document.forms.length;++i)tameForm=tameRelatedNode(document.forms.item(i)),tameForm!==null&&tameForms.push(tameForm);return fakeNodeList(tameForms,'HTMLCollection')}),'title':{'enumerable':true,'get':innocuous(function(){var
titleEl=(this.getElementsByTagName('title'))[0];return titleEl?trimHTML5Spaces(titleEl.textContent):''}),'set':innocuous(function(value){var
titleEl=(this.getElementsByTagName('title'))[0],head;if(!titleEl){head=(this.getElementsByTagName('head'))[0];if(head)titleEl=this.createElement('title'),head.appendChild(titleEl);else
return}titleEl.textContent=value})},'compatMode':P_constant('CSS1Compat'),'ownerDocument':P_constant(null),'appendChild':forwardContainerMethod,'insertBefore':forwardContainerMethod,'removeChild':forwardContainerMethod,'replaceChild':forwardContainerMethod,'hasChildNodes':forwardContainerMethod,'getElementsByTagName':Props.ampMethod(function(privates,tagName){return tagName=String(tagName).toLowerCase(),tameGetElementsByTagName(privates.feralContainerNode,tagName)}),'getElementsByClassName':Props.ampMethod(function(privates,className){return tameGetElementsByClassName(privates.feralContainerNode,className)}),'getElementsByName':Props.cond(elementForFeatureTests.querySelector,Props.ampMethod(function(privates,name){var
escName=escapeCSSString(name),selector='[name='+escName+'], [data-caja-name='+escName+']';return new
TameNodeList((privates.feralContainerNode.querySelectorAll(selector)),defaultTameNode)})),'querySelector':Props.cond(elementForFeatureTests.querySelector,Props.ampMethod(function(privates,selector){return tameQuerySelector(privates.feralContainerNode,selector,false)})),'querySelectorAll':Props.cond(elementForFeatureTests.querySelectorAll,Props.ampMethod(function(privates,selector){return tameQuerySelector(privates.feralContainerNode,selector,true)})),'addEventListener':tameAddEventListenerProp,'removeEventListener':tameRemoveEventListenerProp,'dispatchEvent':tameDispatchEventProp,'createComment':Props.ampMethod(function(privates,text){return defaultTameNode(privates.feralDoc.createComment(' '))}),'createDocumentFragment':Props.ampMethod(function(privates){return privates.policy.requireEditable(),defaultTameNode(privates.feralDoc.createDocumentFragment())}),'createElement':Props.ampMethod(function(privates,tagName){var
attribs,i,newEl,tameEl;privates.policy.requireEditable(),tagName=String(tagName).toLowerCase(),tagName=htmlSchema.virtualToRealElementName(tagName),newEl=privates.feralDoc.createElement(tagName),'canvas'==tagName&&bridal.initCanvasElement(newEl);if(elementPolicies.hasOwnProperty(tagName)){attribs=elementPolicies[tagName]([]);if(attribs)for(i=0;i<attribs.length;i+=2)bridal.setAttribute(newEl,attribs[+i],attribs[i+1])}return tameEl=defaultTameNode(newEl),postInitCreatedElement.call(tameEl),tameEl}),'createTextNode':Props.ampMethod(function(privates,text){return privates.policy.requireEditable(),defaultTameNode(privates.feralDoc.createTextNode(text!==null&&text!==void
0?''+text:''))}),'getElementById':Props.ampMethod(function(privates,id){var node;return id+=idSuffix,node=privates.feralDoc.getElementById(id),defaultTameNode(node)}),'createEvent':Props.ampMethod(function(privates,type){var
document,rawEvent,tamedEvent;type=String(type);if(!eventTypeWhitelist.hasOwnProperty(type))throw new
Error(('Domado: Non-whitelisted event type \"'+type+'\"'));return document=privates.feralDoc,document.createEvent?(rawEvent=document.createEvent(type)):(rawEvent=document.createEventObject(),rawEvent.eventType='ondataavailable'),tamedEvent=new(tamingClassTable.getTamingCtor('Event'))(rawEvent,true),taming.tamesTo(rawEvent,tamedEvent),tamedEvent}),'write':Props.ampMethod(function(privates){if(!domicile.writeHook)throw new
Error('document.write not provided for this document');return domicile.writeHook.write.apply(undefined,Array.prototype.slice.call(arguments,1))}),'writeln':Props.ampMethod(function(privates){var
args;if(!domicile.writeHook)throw new Error('document.writeln not provided for this document');args=Array.prototype.slice.call(arguments,1),args.push('\n'),domicile.writeHook.write.apply(undefined,args)}),'open':Props.ampMethod(function(privates){if(!domicile.writeHook)throw new
Error('document.open not provided for this document');return domicile.writeHook.open()}),'close':Props.ampMethod(function(privates){if(!domicile.writeHook)throw new
Error('document.close not provided for this document');return domicile.writeHook.close()})}),cajaVM.def(TameHTMLDocument),domicile.setBaseUri=cajaVM.constFunc(function(base){var
parsed=URI.parse(base),host=null;parsed.hasDomain()&&(host=parsed.hasPort()?parsed.getDomain()+':'+parsed.getPort():parsed.getDomain()),parsed.hasPath()||parsed.setRawPath('/'),domicile.pseudoLocation={'href':parsed.toString(),'hash':parsed.hasFragment()?'#'+parsed.getRawFragment():'','host':host,'hostname':parsed.getDomain(),'port':parsed.hasPort()?parsed.getPort():'','protocol':parsed.hasScheme()?parsed.getScheme()+':':null,'pathname':parsed.getRawPath(),'search':parsed.hasQuery()?'?'+parsed.getRawQuery():''}});function
dispatchToListeners(tameNode,eventType,eventName){var event=tameDocument.createEvent(eventType);event.initEvent(eventName,true,false),eventName==='load'&&(tameWindow.onload&&callAsEventListener(tameWindow.onload,tameNode,event)),tameNode.dispatchEvent(event)}domicile.signalLoaded=cajaVM.constFunc(function(){dispatchToListeners(tameDocument,'Event','DOMContentLoaded'),dispatchToListeners(tameWindow,'UIEvent','load')}),domicile.fireVirtualEvent=function(feralNode,type,name){var
event=document.createEvent(type);bridal.initEvent(event,'initEvent',name,false,false,[],true),feralNode.dispatchEvent(event)};function
toFeralNode(tame){return tame===null||tame===undefined?tame:TameNodeConf.amplify(tame,function(privates){return privates.feral})}cajaVM.constFunc(toFeralNode),domicile.handlers=[],domicile.tameNode=cajaVM.def(defaultTameNode),domicile.feralNode=cajaVM.def(toFeralNode),domicile.tameEvent=cajaVM.def(tameEvent),domicile.fetchUri=cajaVM.constFunc(function(uri,mime,callback){uriFetch(naiveUriPolicy,URI.utils.resolve(domicile.pseudoLocation.href,uri),mime,callback)}),domicile.rewriteUri=cajaVM.constFunc(function(uri,mimeType,opt_hints){return uriRewrite(naiveUriPolicy,String(uri),html4.ueffects.SAME_DOCUMENT,html4.ltypes.SANDBOXED,opt_hints||{})}),domicile.cssUri=cajaVM.constFunc(function(uri,mimeType,prop){return uri=String(uri),uriRewriterForCss?uriRewriterForCss(uri,prop):null}),domicile.suffix=cajaVM.constFunc(function(nmtokens){var
p=String(nmtokens).replace(/^\s+|\s+$/g,'').split(/\s+/g),out=[],i,nmtoken;for(i=0;i<p.length;++i){nmtoken=rewriteAttribute(null,null,html4.atype.ID,p[+i]);if(!nmtoken)throw new
Error(nmtokens);out.push(nmtoken)}return out.join(' ')}),domicile.rewriteUriInCss=cajaVM.constFunc(function(value,propName){return value?uriRewrite(naiveUriPolicy,value,html4.ueffects.SAME_DOCUMENT,html4.ltypes.SANDBOXED,{'TYPE':'CSS','CSS_PROP':propName}):void
0}),domicile.rewriteUriInAttribute=cajaVM.constFunc(function(value,tagName,attribName){var
schemaAttr;return isValidFragment(value)?value+idSuffix:(schemaAttr=htmlSchema.attribute(tagName,attribName),value?uriRewrite(naiveUriPolicy,value,schemaAttr.uriEffect,schemaAttr.loaderType,{'TYPE':'MARKUP','XML_ATTR':attribName,'XML_TAG':tagName}):void
0)}),domicile.rewriteTargetAttribute=cajaVM.constFunc(function(value,tagName,attribName){var
atype=null,attribKey;return(attribKey=tagName+'::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))?(atype=html4.ATTRIBS[attribKey],rewriteAttribute(tagName,attribName,atype,value)):null}),tamingClassTable.registerLazy('CSSStyleDeclaration',function(){var
allCssProperties=CssPropertiesCollection(),TameStyleConf=new Confidence('Style');function
allowProperty(cssPropertyName){return allCssProperties.isCssName(cssPropertyName)}function
TameStyle(style,editable,tameEl){TameStyleConf.confide(this,taming),TameStyleConf.amplify(this,function(privates){privates.feral=style,privates.editable=editable,privates.tameElement=tameEl,privates.readByCanonicalName=function(canonName){return String(style[canonName]||'')},privates.writeByCanonicalName=function(canonName,val){style[canonName]=val},privates.rawElement=undefined,privates.pseudoElement=undefined,Object.preventExtensions(privates)})}return inertCtor(TameStyle,Object),TameStyle.prototype.getPropertyValue=TameStyleConf.amplifying(function(privates,cssPropertyName){var
canonName;return cssPropertyName=String(cssPropertyName||'').toLowerCase(),allowProperty(cssPropertyName)?(canonName=allCssProperties.cssToDom(cssPropertyName),privates.readByCanonicalName(canonName)):''}),Props.define(TameStyle.prototype,TameStyleConf,{'toString':Props.overridable(false,innocuous(function(){return'[domado object Style]'})),'cssText':{'enumerable':true,'set':TameStyleConf.amplifying(function(privates,value){return typeof
privates.feral.cssText==='string'?(privates.feral.cssText=sanitizeStyleAttrValue(value)):privates.tameElement.setAttribute('style',value),true})}}),allCssProperties.forEachDomName(function(stylePropertyName){var
cssPropertyName=allCssProperties.domToCss(stylePropertyName),canonName=allCssProperties.cssToDom(cssPropertyName),allowed=allowProperty(cssPropertyName);Object.defineProperty(TameStyle.prototype,stylePropertyName,{'enumerable':canHaveEnumerableAccessors,'get':TameStyleConf.amplifying(function(privates){return privates.feral&&allowed?privates.readByCanonicalName(canonName):void
0}),'set':TameStyleConf.amplifying(function(privates,value){var tokens;if(!privates.editable)throw new
Error('style not editable');if(!allowed)return;tokens=lexCss(value),tokens.length===0||tokens.length===1&&tokens[0]===' '?(value=''):(sanitizeStyleProperty(cssPropertyName,tokens)||console.log('bad value `'+value+'` for CSS property '+stylePropertyName),value=tokens.join(' ')),privates.writeByCanonicalName(canonName,value)})})}),TameStyle.TameStyleConf=TameStyleConf,TameStyle.allCssProperties=allCssProperties,cajaVM.def(TameStyle)}),tamingClassTable.registerLazy('CajaComputedCSSStyleDeclaration',function(){var
TameStyle,TameStyleConf,allCssProperties;function isNestedInAnchor(el){for(;el&&el!==feralPseudoDocument;el=el.parentNode)if(el.tagName&&el.tagName.toLowerCase()==='a')return true;return false}TameStyle=tamingClassTable.getTamingCtor('CSSStyleDeclaration'),TameStyleConf=TameStyle.TameStyleConf,allCssProperties=TameStyle.allCssProperties;function
TameComputedStyle(rawElement,pseudoElement){rawElement=rawElement||document.createElement('div'),TameStyle.call(this,bridal.getComputedStyle(rawElement,pseudoElement),false),TameStyleConf.amplify(this,function(privates){var
superReadByCanonicalName;privates.rawElement=rawElement,privates.pseudoElement=pseudoElement,superReadByCanonicalName=privates.readByCanonicalName,privates.readByCanonicalName=function(canonName){var
propName=allCssProperties.domToCss(canonName),schemaElement=cssSchema[propName];return superReadByCanonicalName.call(this,canonName)},privates.writeByCanonicalName=function(canonName){throw'Computed styles not editable: This code should be unreachable'}})}return inertCtor(TameComputedStyle,tamingClassTable.getTamingCtor('CSSStyleDeclaration')),Props.define(TameComputedStyle,TameStyleConf,{'toString':Props.overridable(false,innocuous(function(){return'[Fake Computed Style]'}))}),cajaVM.def(TameComputedStyle)}),tamingClassTable.registerLazy('XMLHttpRequest',function(){return cajaVM.def(TameXMLHttpRequest(taming,XMLHttpRequestCtor(window.XMLHttpRequest,window.ActiveXObject,window.XDomainRequest),naiveUriPolicy,function(){return domicile.pseudoLocation.href}))}),cssIdClassPrefixRE=new
RegExp(('(^|[},])\\s*\\.'+idClass+' '),'g'),domicile.emitCss=cajaVM.constFunc(function(cssText){outerContainerNode===document&&(cssText=cssText.replace(cssIdClassPrefixRE,'')),this.getCssContainer().appendChild(bridal.createStylesheet(document,cssText))}),domicile.getCssContainer=cajaVM.constFunc(function(){var
e=(document.getElementsByTagName('head'))[0]||(outerContainerNode.getElementsByTagName('caja-v-head'))[0];return e||(typeof
console!=='undefined'&&console.warn('Domado: Unable to find location to stash stylesheet'),e=document.createElement('head')),e}),idClassPattern=new
RegExp(('(?:^|\\s)'+idClass.replace(/[\.$]/g,'\\$\x26')+'(?:\\s|$)'));function isContainerNode(node){return node===feralPseudoDocument||node&&node.nodeType===1&&idClassPattern.test(node.className)}domicile.getIdClass=cajaVM.constFunc(function(){return idClass}),domicile.getPseudoDocument=cajaVM.constFunc(function(){return feralPseudoDocument}),TameWindowConf=new
Confidence('TameWindow');function TameWindow(feralWinNode,feralDocNode){TameWindowConf.confide(this,taming),TameWindowConf.amplify(this,function(privates){privates.feralContainerNode=feralDocNode,privates.policy=nodePolicyEditable,privates.wrappedListeners=[],privates.feralEventTarget=feralWinNode,Object.preventExtensions(privates)}),addImports(this),installLocation(this),Object.defineProperty(this,'navigator',{'value':tameNavigator,'configurable':false,'enumerable':true,'writable':false}),taming.tamesTo(feralWinNode,this),['top','self','opener','parent','window','frames'].forEach(function(prop){this[prop]=this},this),this.length=0,tameSetAndClear(this,window.setTimeout,window.clearTimeout,'setTimeout','clearTimeout',false,true,this),tameSetAndClear(this,window.setInterval,window.clearInterval,'setInterval','clearInterval',false,true,this),window.requestAnimationFrame&&tameSetAndClear(this,function(code,ignored){return window.requestAnimationFrame(code)},window.cancelAnimationFrame,'requestAnimationFrame','cancelAnimationFrame',true,false,undefined)}inertCtor(TameWindow,Object,'Window'),Props.define(TameWindow.prototype,TameWindowConf,{'toString':Props.overridable(false,innocuous(function(){return'[domado object Window]'}))}),tamingClassTable.registerLazy('Location',function(){function
TameLocation(){var self=this;function defineLocationField(f,dflt){Object.defineProperty(self,f,{'configurable':false,'enumerable':true,'get':innocuous(function(){var
v;try{return v=domicile.pseudoLocation[f],String(v!==null?v:dflt)}catch(e){throw tameException(e)}})})}defineLocationField('href','http://nosuchhost.invalid:80/'),defineLocationField('hash',''),defineLocationField('host','nosuchhost.invalid:80'),defineLocationField('hostname','nosuchhost.invalid'),defineLocationField('pathname','/'),defineLocationField('port','80'),defineLocationField('protocol','http:'),defineLocationField('search','')}return inertCtor(TameLocation,Object),setToString(TameLocation.prototype,innocuous(function(){return this.href})),cajaVM.def(TameLocation)}),installLocation=(function(){var
tameLocation;function tameLocationGetter(){return tameLocation||(tameLocation=new(tamingClassTable.getTamingCtor('Location'))),tameLocation}cajaVM.constFunc(tameLocationGetter);function
tameLocationSetter(){throw new Error('Caja does not currently support assigning to .location')}return cajaVM.constFunc(tameLocationSetter),function
installLocation(obj){Object.defineProperty(obj,'location',{'configurable':false,'enumerable':true,'get':tameLocationGetter,'set':tameLocationSetter})}})(),navigator=window.navigator,tameNavigator=cajaVM.def({'appName':String(navigator.appName),'appVersion':String(navigator.appVersion),'platform':String(navigator.platform),'userAgent':String(navigator.userAgent),'cajaVersion':'1.0'}),PSEUDO_ELEMENT_WHITELIST={'first-letter':true,'first-line':true},noopWindowFunctionProp=Props.markPropMaker(function(env){var
prop=env.prop,notify=true;return{'configurable':true,'enumerable':true,'writable':true,'value':innocuous(function
domadoNoop(){notify&&(notify=false,typeof console!=='undefined'&&console.warn('Domado: ignoring window.'+prop+'(\u2026).'))})}}),stubBarPropProp=Props.overridable(true,cajaVM.def({'visible':false})),Props.define(TameWindow.prototype,TameWindowConf,{'addEventListener':tameAddEventListenerProp,'removeEventListener':tameRemoveEventListenerProp,'dispatchEvent':tameDispatchEventProp,'scrollBy':Props.ampMethod(function(privates,dx,dy){(dx||dy)&&makeScrollable(bridal,privates.feralContainerNode),tameScrollBy(privates.feralContainerNode,dx,dy)}),'scrollTo':Props.ampMethod(function(privates,x,y){makeScrollable(bridal,privates.feralContainerNode),tameScrollTo(privates.feralContainerNode,x,y)}),'resizeTo':Props.ampMethod(function(privates,w,h){tameResizeTo(privates.feralContainerNode,w,h)}),'resizeBy':Props.ampMethod(function(privates,dw,dh){tameResizeBy(privates.feralContainerNode,dw,dh)}),'getComputedStyle':Props.plainMethod(function(tameElement,pseudoElement){return TameElementConf.amplify(tameElement,function(elPriv){pseudoElement=pseudoElement===null||pseudoElement===void
0||''===pseudoElement?void 0:String(pseudoElement).toLowerCase();if(pseudoElement!==void
0&&!PSEUDO_ELEMENT_WHITELIST.hasOwnProperty(pseudoElement))throw new Error(('Bad pseudo element '+pseudoElement));return new(tamingClassTable.getTamingCtor('CajaComputedCSSStyleDeclaration'))(elPriv.feral,pseudoElement)})}),'pageXOffset':Props.aliasRO(true,'scrollX'),'pageYOffset':Props.aliasRO(true,'scrollY'),'scrollX':Props.ampGetter(function(p){return p.feralContainerNode.scrollLeft}),'scrollY':Props.ampGetter(function(p){return p.feralContainerNode.scrollTop}),'innerHeight':Props.ampGetter(function(p){return p.feralContainerNode.offsetHeight}),'innerWidth':Props.ampGetter(function(p){return p.feralContainerNode.offsetWidth}),'outerHeight':Props.ampGetter(function(p){return p.feralContainerNode.offsetHeight}),'outerWidth':Props.ampGetter(function(p){return p.feralContainerNode.offsetWidth}),'blur':noopWindowFunctionProp,'focus':noopWindowFunctionProp,'close':noopWindowFunctionProp,'moveBy':noopWindowFunctionProp,'moveTo':noopWindowFunctionProp,'print':noopWindowFunctionProp,'stop':noopWindowFunctionProp,'locationbar':stubBarPropProp,'personalbar':stubBarPropProp,'menubar':stubBarPropProp,'scrollbars':stubBarPropProp,'statusbar':stubBarPropProp,'toolbar':stubBarPropProp}),cajaVM.def(TameWindow),tamingClassTable.finish(),tameDocument=new
TameHTMLDocument(document,feralPseudoDocument,(String(undefined||'nosuchhost.invalid'))),domicile.htmlEmitterTarget=feralPseudoDocument,tameWindow=new
TameWindow(feralPseudoWindow,feralPseudoDocument),TameHTMLDocumentConf.amplify(tameDocument,function(p){return p.policy.editable})&&(tameDocument.defaultView=tameWindow,domicile.sanitizeAttrs=sanitizeAttrs),tamingClassTable.exportTo(tameWindow),allDomNodeClasses=htmlSchema.getAllKnownScriptInterfaces();for(i=0;i<allDomNodeClasses.length;++i)className=allDomNodeClasses[+i],className
in tameWindow||Object.defineProperty(tameWindow,className,{'enumerable':true,'configurable':true,'writable':true,'value':defaultNodeClassCtor});return Object.freeze(namedConstructors),Object.getOwnPropertyNames(namedConstructors).forEach(function(name){Object.defineProperty(tameWindow,name,{'enumerable':true,'configurable':true,'writable':true,'value':namedConstructors[name]})}),tameDocument=finishNode(tameDocument),domicile.window=tameWindow,domicile.document=tameDocument,Object.defineProperty(tameWindow,'document',{'value':tameDocument,'configurable':false,'enumerable':true,'writable':false}),pluginId=getId(tameWindow),windowToDomicile.set(tameWindow,domicile),document.caja_gadgetStylesheetInstalled||(function(){var
element;document.caja_gadgetStylesheetInstalled=true,element=document.createElement('style'),element.setAttribute('type','text/css'),element.textContent='.vdoc-container___ {position:relative!important;overflow:auto!important;clip:rect(auto,auto,auto,auto)!important;}caja-v-base,caja-v-basefont,caja-v-head,caja-v-link,caja-v-meta,caja-v-noembed,caja-v-noframes,caja-v-param,caja-v-source,caja-v-track,caja-v-title{display:none;}caja-v-html, caja-v-body {display:block;}',domicile.getCssContainer().appendChild(element)})(),domicile}function
plugin_dispatchEvent(thisNode,event,pluginId,handler){var window=bridalMaker.getWindow(thisNode),domicile,imports,isUserAction,node;event=event||window.event,event.currentTarget||(event.currentTarget=thisNode),imports=getImports(pluginId),domicile=windowToDomicile.get(imports),node=domicile.tameNode(thisNode),isUserAction=eventIsUserAction(event,window);try{return dispatch(isUserAction,pluginId,handler,[node,domicile.tameEvent(event)])}catch(ex){imports.onerror(ex.message,'unknown',0)}}function
eventIsUserAction(event,window){if(!(event instanceof window.UIEvent))return false;switch(event.type){case'click':case'dblclick':case'keypress':case'keydown':case'keyup':case'mousedown':case'mouseup':case'touchstart':case'touchend':return true}return false}function
plugin_dispatchToHandler(pluginId,handler,args){return dispatch(true,pluginId,handler,args)}function
dispatch(isUserAction,pluginId,handler,args){var domicile=windowToDomicile.get(getImports(pluginId)),fn;switch(typeof
handler){case'number':handler=domicile.handlers[+handler];break;case'string':fn=void
0,fn=domicile.window[handler],handler=fn&&typeof fn.call==='function'?fn:void 0;break;case'function':case'object':break;default:throw new
Error(('Expected function as event handler, not '+typeof handler))}domicile.handlingUserAction=isUserAction;try{return handler.call.apply(handler,args)}catch(ex){throw domicile.handlingUserAction=false,ex}finally{domicile.handlingUserAction=false}}return cajaVM.def({'attachDocument':attachDocument,'plugin_dispatchEvent':plugin_dispatchEvent,'plugin_dispatchToHandler':plugin_dispatchToHandler,'getDomicileForWindow':windowToDomicile.get.bind(windowToDomicile)})})})(),typeof
window!=='undefined'&&(window['Domado']=Domado);function TamingSchema(helper){'use strict';var
fixed,functionAdvice,grantAs,grantTypes,tameAs,tameCtorSuper,tameFunctionName,tameTypes;function
PropertyFlags(){var map=new WeakMap;return Object.freeze({'has':function(obj,prop,flag){return prop='$'+prop,map.has(obj)&&map.get(obj).hasOwnProperty(prop)&&(map.get(obj))[prop].indexOf(flag)!==-1},'set':function(obj,prop,flag){var
o;prop='$'+prop,map.has(obj)||map.set(obj,{}),o=map.get(obj),o.hasOwnProperty(prop)||(o[prop]=[]),o[prop].indexOf(flag)===-1&&o[prop].push(flag)},'getProps':function(obj){return map.has(obj)?Object.getOwnPropertyNames(map.get(obj)).map(function(s){return s.substring(1)}):[]}})}grantTypes=Object.freeze({'METHOD':'method','READ':'read','WRITE':'write','OVERRIDE':'override'}),grantAs=PropertyFlags(),tameTypes=Object.freeze({'CONSTRUCTOR':'constructor','FUNCTION':'function','XO4A':'xo4a','READ_ONLY_RECORD':'read_only_record'});function
makeWeakMap(){var map=new WeakMap;return helper.weakMapPermitHostObjects(map),map}tameAs=makeWeakMap(),tameFunctionName=makeWeakMap(),tameCtorSuper=makeWeakMap(),functionAdvice=makeWeakMap();function
applyFeralFunction(f,self,args){return initAdvice(f)(self,args)}function isNumericName(n){return typeof
n==='number'||''+ +n===n}function checkNonNumeric(prop){if(isNumericName(prop))throw new
TypeError(('Cannot control numeric property names: '+prop))}fixed=makeWeakMap();function
checkCanControlTaming(f){var to=typeof f;if(!f||to!=='function'&&to!=='object')throw new
TypeError(('Taming controls not for non-objects: '+f));if(fixed.has(f))throw new
TypeError(('Taming controls not for already tamed: '+f));if(helper.isDefinedInCajaFrame(f))throw new
TypeError(('Taming controls not for Caja objects: '+f))}function fix(f){fixed.set(f,true)}function
markTameAsReadOnlyRecord(f){return checkCanControlTaming(f),tameAs.set(f,tameTypes.READ_ONLY_RECORD),f}function
markTameAsFunction(f,name){return checkCanControlTaming(f),tameAs.set(f,tameTypes.FUNCTION),tameFunctionName.set(f,name),f}function
markTameAsCtor(ctor,opt_super,name){var ctype,stype;checkCanControlTaming(ctor),ctype=typeof
ctor,stype=typeof opt_super;if(ctype!=='function')throw new TypeError(('Cannot tame '+ctype+' as ctor'));if(opt_super&&stype!=='function')throw new
TypeError(('Cannot tame '+stype+' as superclass ctor'));return tameAs.set(ctor,tameTypes.CONSTRUCTOR),tameFunctionName.set(ctor,name),tameCtorSuper.set(ctor,opt_super),ctor}function
markTameAsXo4a(f,name){var ftype;checkCanControlTaming(f),ftype=typeof f;if(ftype!=='function')throw new
TypeError(('Cannot tame '+ftype+' as function'));return tameAs.set(f,tameTypes.XO4A),tameFunctionName.set(f,name),f}function
grantTameAsMethod(f,prop){checkCanControlTaming(f),checkNonNumeric(prop),grantAs.set(f,prop,grantTypes.METHOD),grantAs.set(f,prop,grantTypes.READ)}function
grantTameAsRead(f,prop){checkCanControlTaming(f),checkNonNumeric(prop),grantAs.set(f,prop,grantTypes.READ)}function
grantTameAsReadWrite(f,prop){checkCanControlTaming(f),checkNonNumeric(prop),grantAs.set(f,prop,grantTypes.READ),grantAs.set(f,prop,grantTypes.WRITE)}function
grantTameAsReadOverride(f,prop){checkCanControlTaming(f),checkNonNumeric(prop),grantAs.set(f,prop,grantTypes.READ),grantAs.set(f,prop,grantTypes.OVERRIDE)}function
initAdvice(f){return functionAdvice.has(f)||functionAdvice.set(f,function tamingNullAdvice(self,args){return f.apply(self,args)}),functionAdvice.get(f)}function
adviseFunctionBefore(f,advice){var p=initAdvice(f);functionAdvice.set(f,function
tamingBeforeAdvice(self,args){return p(self,advice(f,self,args))})}function adviseFunctionAfter(f,advice){var
p=initAdvice(f);functionAdvice.set(f,function tamingAfterAdvice(self,args){return advice(f,self,p(self,args))})}function
adviseFunctionAround(f,advice){var p=initAdvice(f);functionAdvice.set(f,function
tamingAroundAdvice(self,args){return advice(p,self,args)})}return Object.freeze({'published':Object.freeze({'markTameAsReadOnlyRecord':markTameAsReadOnlyRecord,'markTameAsFunction':markTameAsFunction,'markTameAsCtor':markTameAsCtor,'markTameAsXo4a':markTameAsXo4a,'grantTameAsMethod':grantTameAsMethod,'grantTameAsRead':grantTameAsRead,'grantTameAsReadWrite':grantTameAsReadWrite,'grantTameAsReadOverride':grantTameAsReadOverride,'adviseFunctionBefore':adviseFunctionBefore,'adviseFunctionAfter':adviseFunctionAfter,'adviseFunctionAround':adviseFunctionAround}),'control':Object.freeze({'grantTypes':grantTypes,'grantAs':grantAs,'tameTypes':tameTypes,'tameAs':tameAs,'tameFunctionName':tameFunctionName,'tameCtorSuper':tameCtorSuper,'applyFeralFunction':applyFeralFunction,'fix':fix})})}typeof
window!=='undefined'&&(window['TamingSchema']=TamingSchema);function TamingMembrane(helper,schema){'use strict';var
BASE_OBJECT_CONSTRUCTOR,feralByTame,tameByFeral;feralByTame=new WeakMap,tameByFeral=new
WeakMap,helper.weakMapPermitHostObjects(tameByFeral),feralByTame.set(helper.USELESS,helper.USELESS),tameByFeral.set(helper.USELESS,helper.USELESS),BASE_OBJECT_CONSTRUCTOR=Object.freeze({});function
directConstructor(obj){var directCtor,directProto;return obj===null?void 0:obj===void
0?void 0:typeof obj!=='object'?void 0:(directProto=Object.getPrototypeOf(obj),directProto?(directCtor=directProto.constructor,directCtor?(helper.allFrames().forEach(function(w){var
O;try{O=w.Object}catch(e){return}directCtor===O&&(Object.prototype.hasOwnProperty.call(directProto,'constructor')?(directCtor=BASE_OBJECT_CONSTRUCTOR):(directCtor=void
0))}),directCtor):void 0):void 0)}function getObjectCtorFor(o){var ot,proto;if(o===undefined||o===null)return;ot=typeof
o;if(ot!=='object'&&ot!=='function')throw new TypeError('Cannot obtain ctor for non-object');proto=undefined;while(o)proto=o,o=Object.getPrototypeOf(o);return proto.constructor}function
isNumericName(n){return typeof n==='number'||''+ +n===n}function preventExtensions(o){return void
0===o?void 0:Object.preventExtensions(o)}function applyFeralFunction(feralFunction,feralThis,feralArguments){try{return tame(schema.applyFeralFunction(feralFunction,feralThis,feralArguments))}catch(e){throw tameException(e)}}function
applyTameFunction(tameFunction,tameThis,tameArguments){try{return untame(tameFunction.apply(tameThis,tameArguments))}catch(e){throw untameException(e)}}function
getFeralProperty(feralObject,feralProp){try{return tame(feralObject[feralProp])}catch(e){throw tameException(e)}}function
setFeralProperty(feralObject,feralProp,feralValue){try{feralObject[feralProp]=feralValue}catch(e){throw tameException(e)}}function
getTameProperty(tameObject,tameProp){try{return untame(tameObject[tameProp])}catch(e){throw untameException(e)}}function
setTameProperty(tameObject,tameProp,tameValue){try{tameObject[tameProp]=tameValue}catch(e){throw untameException(e)}}function
copyTreatedImmutable(o){var t=void 0,msg,name;switch(Object.prototype.toString.call(o)){case'[object Boolean]':t=new
Boolean((o.valueOf()));break;case'[object Date]':t=new Date((o.valueOf()));break;case'[object Number]':t=new
Number((o.valueOf()));break;case'[object RegExp]':t=new RegExp(o.source,((o.global?'g':'')+(o.ignoreCase?'i':'')+(o.multiline?'m':'')));break;case'[object String]':t=new
String((o.valueOf()));break;case'[object Error]':case'[object DOMException]':msg=''+o.message,name=o.name;switch(name){case'Error':t=new
Error(msg);break;case'EvalError':t=new EvalError(msg);break;case'RangeError':t=new
RangeError(msg);break;case'ReferenceError':t=new ReferenceError(msg);break;case'SyntaxError':t=new
SyntaxError(msg);break;case'TypeError':t=new TypeError(msg);break;case'URIError':t=new
URIError(msg);break;default:t=new Error(msg),t.name=''+name}}return t}function
copyArray(o,recursor){var copy=[],i;for(i=0;i<o.length;++i)copy[i]=recursor(o[i]);return Object.freeze(copy)}function
copyTreatedMutable(o,recursor){var t;if(Array.isArray(o))return copyArray(o,recursor);t=undefined;switch(Object.prototype.toString.call(o)){case'[object ArrayBuffer]':t=ArrayBuffer.prototype.slice.call(o,0);break;case'[object Int8Array]':t=new
Int8Array(o);break;case'[object Uint8Array]':t=new Uint8Array(o);break;case'[object Uint8ClampedArray]':t=new
Uint8ClampedArray(o);break;case'[object Int16Array]':t=new Int16Array(o);break;case'[object Uint16Array]':t=new
Uint16Array(o);break;case'[object Int32Array]':t=new Int32Array(o);break;case'[object Uint32Array]':t=new
Uint32Array(o);break;case'[object Float32Array]':t=new Float32Array(o);break;case'[object Float64Array]':t=new
Float64Array(o);break;case'[object DataView]':t=new DataView((recursor(o.buffer)),o.byteOffset,o.byteLength)}return t}function
makeNeutralException(e){var str='Error';try{str=e.toString()}catch(ex){}return new
Error(str)}function tameException(f){var t=void 0;try{t=tame(f)}catch(e){}return t!==void
0?t:makeNeutralException(f)}function untameException(t){var f=void 0;try{f=untame(t)}catch(e){}return f!==void
0?f:makeNeutralException(t)}function tamesTo(f,t){var ef,et;if(f&&tameByFeral.has(f)||t&&feralByTame.has(t))throw et=tameByFeral.get(f),ef=feralByTame.get(t),new
TypeError(('Attempt to multiply tame: '+f+(ef?' (already '+(ef===f?'same':ef)+')':'')+' \x3c-\x3e '+t+(et?' (already '+(et===t?'same':et)+')':'')));reTamesTo(f,t)}function
reTamesTo(f,t){var ftype=typeof f,ttype;if(!f||ftype!=='function'&&ftype!=='object')throw new
TypeError('Unexpected feral primitive: ',f);ttype=typeof t;if(!t||ttype!=='function'&&ttype!=='object')throw new
TypeError('Unexpected tame primitive: ',t);tameByFeral.set(f,t),feralByTame.set(t,f),schema.fix(f)}function
errGet(p){return Object.freeze(function(){throw new TypeError(('Unreadable property: '+p))})}function
errSet(p){return Object.freeze(function(){throw new TypeError(('Unwriteable property: '+p))})}function
tame(f){var ctor,ftype,t;if(f!==Object(f))return f;t=tameByFeral.get(f);if(t)return t;t=copyTreatedMutable(f,tame);if(t)return t;if(feralByTame.has(f))throw new
TypeError(('Tame object found on feral side of taming membrane: '+f+'. The membrane has previously been compromised.'));ftype=typeof
f;if(ftype==='object'){ctor=directConstructor(f);if(ctor===BASE_OBJECT_CONSTRUCTOR)t=preventExtensions(tameRecord(f));else{t=copyTreatedImmutable(f);if(t===void
0){if(ctor===void 0)throw new TypeError(('Cannot determine ctor of: '+f));t=tamePreviouslyConstructedObject(f,ctor)}}}else
if(ftype==='function')switch(schema.tameAs.get(f)){case schema.tameTypes.CONSTRUCTOR:t=tameCtor(f,schema.tameCtorSuper.get(f),schema.tameFunctionName.get(f));break;case
schema.tameTypes.FUNCTION:t=tamePureFunction(f,schema.tameFunctionName.get(f));break;case
schema.tameTypes.XO4A:t=tameXo4a(f,schema.tameFunctionName.get(f));break;default:t=void
0}return t&&tamesTo(f,t),t}function isValidPropertyName(p){return!/.*__$/.test(p)}function
tameRecord(f,t){var readOnly;return t||(t={}),readOnly=schema.tameAs.get(f)===schema.tameTypes.READ_ONLY_RECORD,Object.keys(f).forEach(function(p){var
get,set;if(isNumericName(p))return;if(!isValidPropertyName(p))return;get=function(){return getFeralProperty(f,p)},set=readOnly?undefined:function(v){return setFeralProperty(f,p,untame(v)),v},Object.defineProperty(t,p,{'enumerable':true,'configurable':false,'get':get,'set':set?set:errSet(p)})}),t}function
tamePreviouslyConstructedObject(f,fc){var t,tc;return schema.tameAs.get(fc)!==schema.tameTypes.CONSTRUCTOR?void
0:(tc=tame(fc),t=Object.create(tc.prototype),tameObjectWithMethods(f,t),t)}function
addFunctionPropertyHandlers(f,t){schema.grantAs.getProps(f).forEach(function(p){var
get,set;if(!isValidPropertyName(p))return;get=!schema.grantAs.has(f,p,schema.grantTypes.READ)?undefined:function(){return getFeralProperty(f,p)},set=!schema.grantAs.has(f,p,schema.grantTypes.WRITE)?undefined:function(v){return setFeralProperty(f,p,untame(v)),v},(get||set)&&Object.defineProperty(t,p,{'enumerable':true,'configurable':false,'get':get?get:errGet(p),'set':set?set:errSet(p)})})}function
tamePureFunction(f){var t=function(_){return applyFeralFunction(f,helper.USELESS,copyArray(arguments,untame))};return addFunctionPropertyHandlers(f,t),preventExtensions(t),t}function
tameCtor(f,fSuper,name){var fPrototype=f.prototype,t=function(_){var o;if(!(this
instanceof t))return applyFeralFunction(f,void 0,copyArray(arguments,untame));o=Object.create(fPrototype),applyFeralFunction(f,o,copyArray(arguments,untame)),tameObjectWithMethods(o,this),tamesTo(o,this)},tPrototype;if(tameByFeral.get(fPrototype))throw new
TypeError(('Prototype of constructor '+f+' has already been tamed'));return tameRecord(f,t),tPrototype=(function(){var
tSuper;if(!fSuper||fSuper===getObjectCtorFor(fSuper))return{};if(!schema.tameAs.get(fSuper)===schema.tameTypes.CONSTRUCTOR)throw new
TypeError(('Super ctor '+fSuper+' not granted as such'));return tSuper=tame(fSuper),Object.create(tSuper.prototype)})(),tameObjectWithMethods(fPrototype,tPrototype),Object.defineProperty(tPrototype,'constructor',{'writable':false,'configurable':false,'enumerable':true,'value':t}),Object.freeze(tPrototype),tamesTo(fPrototype,tPrototype),t.prototype=tPrototype,Object.freeze(t),t}function
tameXo4a(f){var t=function(_){return applyFeralFunction(f,untame(this),copyArray(arguments,untame))};return addFunctionPropertyHandlers(f,t),preventExtensions(t),t}function
makePrototypeMethod(proto,func){return function(_){if(!inheritsFrom(this,proto))throw new
TypeError(('Target object not permitted: '+this));return func.apply(this,arguments)}}function
makeStrictPrototypeMethod(proto,func){return function(_){if(this===proto||!inheritsFrom(this,proto))throw new
TypeError(('Target object not permitted: '+this));return func.apply(this,arguments)}}function
inheritsFrom(o,proto){while(o){if(o===proto)return true;o=Object.getPrototypeOf(o)}return false}function
makePropertyGetter(f,t,p){return schema.grantAs.has(f,p,schema.grantTypes.METHOD)?makePrototypeMethod(t,function(){var
self=this;return function(_){return applyFeralFunction((untame(self))[p],untame(self),copyArray(arguments,untame))}}):schema.grantAs.has(f,p,schema.grantTypes.READ)?makePrototypeMethod(t,function(){return getFeralProperty(untame(this),p)}):undefined}function
makePropertySetter(f,t,p){var override=schema.grantAs.has(f,p,schema.grantTypes.OVERRIDE)||schema.grantAs.has(f,p,schema.grantTypes.METHOD)&&schema.grantAs.has(f,p,schema.grantTypes.WRITE);return override?makeStrictPrototypeMethod(t,function(v){return setFeralProperty(untame(this),p,untame(v)),v}):schema.grantAs.has(f,p,schema.grantTypes.WRITE)?makePrototypeMethod(t,function(v){return setFeralProperty(untame(this),p,untame(v)),v}):undefined}function
defineObjectProperty(f,t,p){var get=makePropertyGetter(f,t,p),set=makePropertySetter(f,t,p);(get||set)&&Object.defineProperty(t,p,{'enumerable':true,'configurable':false,'get':get?get:errGet(p),'set':set?set:errSet(p)})}function
tameObjectWithMethods(f,t){return t||(t={}),schema.grantAs.getProps(f).forEach(function(p){isValidPropertyName(p)&&defineObjectProperty(f,t,p)}),t}function
untame(t){var ctor,f,ttype;if(t!==Object(t))return t;f=feralByTame.get(t);if(f)return f;f=copyTreatedMutable(t,untame);if(f)return f;if(tameByFeral.has(t))throw new
TypeError(('Feral object found on tame side of taming membrane: '+t+'. The membrane has previously been compromised.'));if(!helper.isDefinedInCajaFrame(t))throw new
TypeError('Host object leaked without being tamed');ttype=typeof t;if(ttype==='object'){ctor=directConstructor(t);if(ctor===BASE_OBJECT_CONSTRUCTOR)f=untameCajaRecord(t);else{f=copyTreatedImmutable(t);if(f===void
0)throw new TypeError(('Untaming of guest constructed objects unsupported: '+t))}}else
if(ttype==='function')f=Object.freeze(untameCajaFunction(t));return f&&tamesTo(f,t),f}function
untameCajaFunction(t){return function(_){return applyTameFunction(t,tame(this),copyArray(arguments,tame))}}function
untameCajaRecord(t){var f={};return Object.getOwnPropertyNames(t).forEach(function(p){var
d=Object.getOwnPropertyDescriptor(t,p),read=d.get||d.hasOwnProperty('value'),write=d.set||d.hasOwnProperty('value')&&d.writable,get=!read?undefined:function(){return getTameProperty(t,p)},set=!write?undefined:function(v){return setTameProperty(t,p,tame(v)),v};(get||set)&&Object.defineProperty(f,p,{'enumerable':true,'configurable':false,'get':get?get:errGet(p),'set':set?set:errSet(p)})}),preventExtensions(f)}function
hasTameTwin(f){return tameByFeral.has(f)}function hasFeralTwin(t){return feralByTame.has(t)}return Object.freeze({'tame':tame,'untame':untame,'tamesTo':tamesTo,'reTamesTo':reTamesTo,'hasTameTwin':hasTameTwin,'hasFeralTwin':hasFeralTwin,'tameException':tameException,'untameException':untameException})}typeof
window!=='undefined'&&(window['TamingMembrane']=TamingMembrane),(function(){'use strict';var
enqueue,promises;promises=new WeakMap(true);function reject(reason){function rejected(op,arg1,arg2,arg3){return undefined===op?rejected:'WHEN'===op?(arg2||reject)(reason):arg1?arg1(reject(reason)):reject(reason)}return rejected.reason=reason,promises.set(rejected,true),rejected}function
ref(value){if(null===value||undefined===value)return reject({'class':['NaO']});if('number'===typeof
value&&!isFinite(value))return reject({'class':['NaN']});function fulfilled(op,arg1,arg2,arg3){var
r;if(undefined===op)return value;switch(op){case'WHEN':r=value;break;case'GET':undefined===arg2||null===arg2?(r=value):(r=value[arg2]);break;case'POST':undefined===arg2||null===arg2?(r=reject({})):(r=value[arg2].apply(value,arg3));break;case'PUT':undefined===arg2||null===arg2?(r=reject({})):(value[arg2]=arg3,r={});break;case'DELETE':undefined===arg2||null===arg2?(r=reject({})):(delete
value[arg2],r={});break;default:r=reject({})}return arg1?arg1.apply(null,[r]):r}return promises.set(fulfilled,true),fulfilled}enqueue=(function(){var
active=false,pending=[],run=function(){var task=pending.shift();0===pending.length?(active=false):setTimeout(run,0),task()};return function(task){pending.push(task),active||(setTimeout(run,0),active=true)}})();function
forward(p,op,arg1,arg2,arg3){enqueue(function(){p(op,arg1,arg2,arg3)})}function
promised(value){return'function'===typeof value&&promises.get(value)?value:ref(value)}function
defer(){var pending=[],value;function promise(op,arg1,arg2,arg3){if(undefined===op)return pending?promise:value();pending?pending.push({'op':op,'arg1':arg1,'arg2':arg2,'arg3':arg3}):forward(value,op,arg1,arg2,arg3)}return promises.set(promise,true),cajaVM.def({'promise':promise,'resolve':function(p){var
i,todo,x;if(!pending)return;todo=pending,pending=null,value=promised(p);for(i=0;i!==todo.length;i+=1)x=todo[+i],forward(value,x.op,x.arg1,x.arg2,x.arg3)}})}Q=cajaVM.def({'run':enqueue,'reject':reject,'ref':ref,'defer':defer,'near':function(value){return'function'===typeof
value&&promises.get(value)?value():value},'when':function(value,fulfilled,rejected){var
r=defer(),done=false;return forward(promised(value),'WHEN',function(x){if(done)throw new
Error;done=true,r.resolve(ref(x)('WHEN',fulfilled,rejected))},function(reason){if(done)throw new
Error;done=true,r.resolve(rejected?rejected.apply(null,[reason]):reject(reason))}),r.promise},'get':function(target,noun){var
r=defer();return forward(promised(target),'GET',r.resolve,noun),r.promise},'post':function(target,verb,argv){var
r=defer();return forward(promised(target),'POST',r.resolve,verb,argv),r.promise},'put':function(target,noun,value){var
r=defer();return forward(promised(target),'PUT',r.resolve,noun,value),r.promise},'remove':function(target,noun){var
r=defer();return forward(promised(target),'DELETE',r.resolve,noun),r.promise}})})(),typeof
window!=='undefined'&&(window['Q']=Q);function GuestManager(frameTamingSchema,frameTamingMembrane,divInfo,hostBaseUrl,domicile,htmlEmitter,guestWin,USELESS,uriPolicy,runImpl){var
args={'url':undefined,'mimeType':undefined,'uncajoledContent':undefined,'moreImports':undefined,'flash':true},self;function
copyStringMap(o){var r={},k;for(k in o)Object.prototype.hasOwnProperty.call(o,k)&&(r[k]=o[k]);return r}return self={'div':divInfo.opt_div&&divInfo.opt_div.parentNode,'idClass':divInfo.idClass,'getUrl':function(){return args.url},'getUriPolicy':function(){return uriPolicy},'getElementByGuestId':domicile?function(id){return self.untame(Object.prototype.v___?self.imports.v___('document').m___('getElementById',[id]):self.imports.document.getElementById(id))}:function(_){return null},'rewriteUri':domicile?function(url,mime,opts){return self.untame(Object.prototype.v___?domicile.m___('rewriteUri',[url,mime,copyStringMap(opts)]):domicile.rewriteUri(url,mime,copyStringMap(opts)))}:function(_){return null},'idSuffix':divInfo.idClass,'iframe':guestWin.frameElement,'imports':domicile?domicile.window:guestWin.cajaVM.makeImports(),'innerContainer':domicile&&domicile.getPseudoDocument(),'outerContainer':divInfo.opt_div,'domicile':domicile,'htmlEmitter':htmlEmitter,'tame':frameTamingMembrane.tame,'untame':frameTamingMembrane.untame,'tamesTo':frameTamingMembrane.tamesTo,'reTamesTo':frameTamingMembrane.reTamesTo,'hasTameTwin':frameTamingMembrane.hasTameTwin,'markReadOnlyRecord':frameTamingSchema.published.markTameAsReadOnlyRecord,'markFunction':frameTamingSchema.published.markTameAsFunction,'markCtor':frameTamingSchema.published.markTameAsCtor,'markXo4a':frameTamingSchema.published.markTameAsXo4a,'grantMethod':frameTamingSchema.published.grantTameAsMethod,'grantRead':frameTamingSchema.published.grantTameAsRead,'grantReadWrite':frameTamingSchema.published.grantTameAsReadWrite,'grantReadOverride':frameTamingSchema.published.grantTameAsReadOverride,'adviseFunctionBefore':frameTamingSchema.published.adviseFunctionBefore,'adviseFunctionAfter':frameTamingSchema.published.adviseFunctionAfter,'adviseFunctionAround':frameTamingSchema.published.adviseFunctionAround,'USELESS':USELESS,'api':function(imports){return args.moreImports=imports,self},'flash':function(flag){return args.flash=!!flag,self},'code':function(url,opt_mimeType,opt_content){return args.url=url,args.mimeType=opt_mimeType,args.uncajoledContent=opt_content,self},'content':function(url,content,opt_mimeType){return self.code(url,opt_mimeType,content)},'url':function(url,opt_mimeType){return self.code(url,opt_mimeType,undefined)},'run':run},self;function
run(opt_arg1,opt_arg2){var moreImports,opt_runDone;return opt_arg2?(moreImports=opt_arg1||args.moreImports||{},opt_runDone=opt_arg2):(moreImports=args.moreImports||{},opt_runDone=opt_arg1),domicile&&domicile.setBaseUri(URI.utils.resolve(hostBaseUrl,args.url)),runImpl(self,args,moreImports,function(result){setTimeout(function(){opt_runDone&&opt_runDone(result)},0)})}}typeof
window!=='undefined'&&(window['GuestManager']=GuestManager),cajaFrameTracker=(function(){var
guestWindows=[];return{'addGuestWindow':addGuestWindow,'isDefinedInCajaFrame':isDefinedInCajaFrame};function
addGuestWindow(w){guestWindows.push(w)}function isDefinedInCajaFrame(o){var ot=typeof
o,i;if(ot!=='object'&&ot!=='function')return false;if(o instanceof Object)return true;for(i=0;i<guestWindows.length;++i)if(o
instanceof guestWindows[i].Object)return true;return false}})(),typeof window!=='undefined'&&(window['cajaFrameTracker']=cajaFrameTracker);function
SESFrameGroup(cajaInt,config,tamingWin,feralWin,additionalParams){var USELESS,bridal,frameGroup,frameGroupTamingMembrane,frameGroupTamingSchema,lazyDomado,tamingHelper,unsafe;if(tamingWin!==window)throw new
Error('wrong frame');tamingWin.ses.mitigateSrcGotchas=additionalParams.mitigateSrcGotchas,USELESS=Object.freeze({'USELESS':'USELESS','toString':function(){return'[Caja USELESS object]'}}),tamingHelper=Object.freeze({'isDefinedInCajaFrame':cajaFrameTracker.isDefinedInCajaFrame,'USELESS':USELESS,'weakMapPermitHostObjects':ses.weakMapPermitHostObjects,'allFrames':allFrames});function
allFrames(){var a=Array.prototype.slice.call(feralWin.frames);return a.push(feralWin),a}frameGroupTamingSchema=TamingSchema(tamingHelper),frameGroupTamingMembrane=TamingMembrane(tamingHelper,frameGroupTamingSchema.control);function
getDomado(){return lazyDomado||(lazyDomado=Domado())}return bridal=bridalMaker(feralWin.document),unsafe=false,frameGroup={'makeDefensibleObject___':makeDefensibleObject,'makeDefensibleFunction___':makeDefensibleFunction,'tame':frameGroupTamingMembrane.tame,'tamesTo':frameGroupTamingMembrane.tamesTo,'reTamesTo':frameGroupTamingMembrane.reTamesTo,'untame':frameGroupTamingMembrane.untame,'unwrapDom':function(o){return o},'markReadOnlyRecord':frameGroupTamingSchema.published.markTameAsReadOnlyRecord,'markFunction':frameGroupTamingSchema.published.markTameAsFunction,'markCtor':frameGroupTamingSchema.published.markTameAsCtor,'markXo4a':frameGroupTamingSchema.published.markTameAsXo4a,'grantMethod':frameGroupTamingSchema.published.grantTameAsMethod,'grantRead':frameGroupTamingSchema.published.grantTameAsRead,'grantReadWrite':frameGroupTamingSchema.published.grantTameAsReadWrite,'grantReadOverride':frameGroupTamingSchema.published.grantTameAsReadOverride,'adviseFunctionBefore':frameGroupTamingSchema.published.adviseFunctionBefore,'adviseFunctionAfter':frameGroupTamingSchema.published.adviseFunctionAfter,'adviseFunctionAround':frameGroupTamingSchema.published.adviseFunctionAround,'USELESS':USELESS,'iframe':window.frameElement,'Q':Q,'makeES5Frame':makeES5Frame,'disableSecurityForDebugger':disableSecurityForDebugger},frameGroup;function
disableSecurityForDebugger(value){unsafe=!!value,tamingWin&&(tamingWin.ses.DISABLE_SECURITY_FOR_DEBUGGER=unsafe)}function
makeDefensibleObject(descriptors){return Object.seal(Object.create(Object.prototype,descriptors))}function
makeDefensibleFunction(f){return Object.freeze(function(){return f.apply(USELESS,Array.prototype.slice.call(arguments,0))})}function
applyFunction(f,dis,args){return f.apply(dis,args)}function getProperty(o,p){return o[p]}function
setProperty(o,p,v){return o[p]=v}function makeES5Frame(div,uriPolicy,es5ready,domOpts){var
divInfo=cajaInt.prepareContainerDiv(div,feralWin,domOpts),frameTamingSchema=TamingSchema(tamingHelper),frameTamingMembrane=TamingMembrane(tamingHelper,frameTamingSchema.control),domicileAndEmitter=makeDomicileAndEmitter(frameTamingMembrane,divInfo,uriPolicy),domicile=domicileAndEmitter&&domicileAndEmitter[0],htmlEmitter=domicileAndEmitter&&domicileAndEmitter[1],gman=GuestManager(frameTamingSchema,frameTamingMembrane,divInfo,cajaInt.documentBaseUrl(),domicile,htmlEmitter,window,USELESS,uriPolicy,sesRun);es5ready(gman)}function
makeDomicileAndEmitter(frameTamingMembrane,divInfo,uriPolicy){var containerFeralWin,domicile,htmlEmitter,uriPolicyWrapper;if(!divInfo.opt_div)return null;function
FeralTwinStub(){}FeralTwinStub.prototype.toString=function(){return'[feral twin stub:'+tamingWin.taming.tame(this)+']'};function
permitUntaming(o){(typeof o==='object'||typeof o==='function')&&frameTamingMembrane.tamesTo(new
FeralTwinStub,o)}return uriPolicyWrapper={},['rewrite','fetch'].forEach(function(name){var
f;name in uriPolicy&&(f=uriPolicy[name],uriPolicyWrapper[name]=function(){var args=Array.prototype.slice.call(arguments),uriArg=arguments[0];if(uriArg){if(!uriArg
instanceof URI)throw new Error('oops, not URI');frameTamingMembrane.tamesTo(uriArg.clone(),uriArg)}try{return frameTamingMembrane.tame(f.apply(uriPolicy,Array.prototype.map.call(arguments,frameTamingMembrane.untame)))}catch(e){throw frameTamingMembrane.tameException(e)}})}),domicile=getDomado().attachDocument('-'+divInfo.idClass,uriPolicyWrapper,divInfo.opt_div,config.targetAttributePresets,Object.freeze({'permitUntaming':permitUntaming,'tame':frameTamingMembrane.tame,'untame':frameTamingMembrane.untame,'tamesTo':frameTamingMembrane.tamesTo,'reTamesTo':frameTamingMembrane.reTamesTo,'hasTameTwin':frameTamingMembrane.hasTameTwin,'hasFeralTwin':frameTamingMembrane.hasFeralTwin,'tameException':frameTamingMembrane.tameException,'untameException':frameTamingMembrane.untameException}),cajaVM.constFunc(function(imports){cajaVM.copyToImports(imports,cajaVM.sharedImports)})),htmlEmitter=new
tamingWin.HtmlEmitter(domicile.htmlEmitterTarget,uriPolicy.mitigate,domicile,window),containerFeralWin=(divInfo.opt_div.ownerDocument||divInfo.opt_div).defaultView,containerFeralWin.___.plugin_dispatchEvent___=getDomado().plugin_dispatchEvent,[domicile,htmlEmitter]}function
identity(x){return x}function sesRun(gman,args,moreImports,opt_runDone){var imports,promise;moreImports.onerror||(moreImports.onerror=onerror),imports=gman.imports,Object.getOwnPropertyNames(moreImports).forEach(function(i){Object.defineProperty(imports,i,Object.getOwnPropertyDescriptor(moreImports,i))}),args.uncajoledContent!==undefined?(promise=loadContent(gman,Q.ref({'contentType':args.mimeType||'text/html','responseText':args.uncajoledContent}))):(promise=loadContent(gman,fetch(args.url),args.mimeType)),Q.when(promise,function(compiledFunc){var
result=compiledFunc(imports);opt_runDone&&opt_runDone(result)},function(failure){config.console.log('Failed to load guest content: '+failure)})}function
onerror(message,source,lineNum){config.console.log('Uncaught script error: '+message+' in source: \"'+source+'\" at line: '+lineNum)}function
loadContent(gman,contentPromise,opt_expectedContentType){return Q.when(contentPromise,function(xhrRecord){var
contentType=opt_expectedContentType||xhrRecord.contentType,theContent=xhrRecord.responseText,writeComplete;if(contentType==='text/javascript'||contentType==='application/javascript'||contentType==='application/x-javascript'||contentType==='text/ecmascript'||contentType==='application/ecmascript'||contentType==='text/jscript')return gman.htmlEmitter&&gman.htmlEmitter.finish(),Q.ref(cajaVM.compileExpr('(function () {'+theContent+'\n})()'));else
if(contentType==='text/html')return writeComplete=gman.imports.document.write(theContent),Q.when(writeComplete,function(importsAgain){return gman.htmlEmitter.finish(),gman.htmlEmitter.signalLoaded(),function(){}});throw new
TypeError(('Unimplemented content-type '+contentType))})}function fetch(url){var
pair=Q.defer(),resolve=pair.resolve,xhr=bridal.makeXhr();return xhr.open('GET',url,true),xhr.onreadystatechange=function(){xhr.readyState===4&&(xhr.status===200?resolve({'contentType':xhr.getResponseHeader('Content-Type'),'responseText':xhr.responseText}):resolve(Q.reject(xhr.status+' '+xhr.statusText)))},xhr.send(null),pair.promise}}typeof
window!=='undefined'&&(window['SESFrameGroup']=SESFrameGroup),cajaIframeDone___()}