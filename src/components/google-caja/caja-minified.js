var caja=function(){var cajaBuildVersion="5669";var defaultServer="https://caja.appspot.com/";var defaultFrameGroup;var readyQueue=[];var registeredImports=[];var nextId=0;var UNREADY="UNREADY",PENDING="PENDING",READY="READY";var state=UNREADY;var globalConfig=undefined;var GUESS="GUESS";var ajaxCounter=1;var unsafe=false;var loaderDocument;function proxyFetchMaker(proxyServer){return function(url,mime,callback){if(!url){callback(undefined);return}var rndName="caja_ajax_"+ajaxCounter++;window[rndName]=function(result){try{callback(result)}finally{window[rndName]=undefined}};installSyncScript(rndName,(proxyServer?String(proxyServer):caja["server"])+"/proxy?url="+encodeURIComponent(url.toString())+"&input-mime-type="+encodeURIComponent(mime)+"&callback="+encodeURIComponent(rndName)+"&alt=json-in-script")}}function xhrFetcher(url,mime,callback){var request=new XMLHttpRequest;request.open("GET",url.toString(),true);request.overrideMimeType(mime);request.onreadystatechange=function(){if(request.readyState==4){callback({html:request.responseText})}};request.send()}var uriPolicies={net:{rewriter:{NO_NETWORK:function(){return null},ALL:function(uri){return String(uri)}},fetcher:{USE_XHR:xhrFetcher,USE_AS_PROXY:proxyFetchMaker},NO_NETWORK:{rewrite:function(){return null},fetch:function(url,mime,callback){setTimeout(function(){callback({})},0)}},ALL:{rewrite:function(uri){return String(uri)},fetch:proxyFetchMaker(undefined)},only:policyOnly},ATTRIBUTETYPES:undefined,LOADERTYPES:undefined,URIEFFECTS:undefined};var caja={initialize:initialize,load:load,whenReady:whenReady,policy:uriPolicies,iframe:null,USELESS:undefined,tame:premature,tamesTo:premature,reTamesTo:premature,untame:premature,unwrapDom:premature,markReadOnlyRecord:premature,markFunction:premature,markCtor:premature,markXo4a:premature,grantMethod:premature,grantRead:premature,grantReadWrite:premature,adviseFunctionBefore:premature,adviseFunctionAfter:premature,adviseFunctionAround:premature,makeDefensibleObject___:premature,makeDefensibleFunction___:premature,initFeralFrame:initFeralFrame,makeFrameGroup:makeFrameGroup,configure:makeFrameGroup,disableSecurityForDebugger:disableSecurityForDebugger,Q:premature,console:{error:makeLogMethod("error"),info:makeLogMethod("info"),log:makeLogMethod("log"),warn:makeLogMethod("warn")},closureCanary:1};var cajaInt={documentBaseUrl:documentBaseUrl,getId:getId,getImports:getImports,joinUrl:joinUrl,loadCajaFrame:loadCajaFrame,prepareContainerDiv:prepareContainerDiv,unregister:unregister,readPropertyAsHostFrame:readPropertyAsHostFrame};function makeLogMethod(m){return function(){globalConfig&&globalConfig.console[m].apply(globalConfig.console,arguments)}}function premature(){throw new Error("Calling taming function before Caja is ready")}function disableSecurityForDebugger(value){unsafe=!!value;if(defaultFrameGroup){defaultFrameGroup["disableSecurityForDebugger"](value)}}function policyOnly(allowedUri){allowedUri=String(allowedUri);return{rewrite:function(uri){uri=String(uri);return uri===allowedUri?uri:null}}}function initialize(config){if(state!==UNREADY){throw new Error("Caja cannot be initialized more than once")}var onSuccess=arguments[1];var onFailure=arguments[2];state=PENDING;makeFrameGroup(config,function(frameGroup){defaultFrameGroup=frameGroup;caja["iframe"]=frameGroup["iframe"];caja["USELESS"]=frameGroup["USELESS"];for(var i in caja){if(caja[i]===premature){caja[i]=frameGroup[i]}}frameGroup["disableSecurityForDebugger"](unsafe);state=READY;var detail={};detail["es5Mode"]=true;if("function"===typeof onSuccess){onSuccess(detail)}whenReady(null)},function(err){state=UNREADY;onFailure(err)})}function load(div,uriPolicy,loadDone,domOpts){uriPolicy=uriPolicy||caja["policy"]["net"]["NO_NETWORK"];if(state===UNREADY){initialize({})}whenReady(function(){defaultFrameGroup["makeES5Frame"](div,uriPolicy,loadDone,domOpts)})}function whenReady(opt_func){if(typeof opt_func==="function"){readyQueue.push(opt_func)}if(state===READY){for(var i=0;i<readyQueue.length;i++){setTimeout(readyQueue[i],0)}readyQueue=[]}}function makeFrameGroup(config,frameGroupReady,onFailure){initFeralFrame(window);globalConfig=config=resolveConfig(config);caja["server"]=config["server"];trySES(config,frameGroupReady,onFailure)}function resolveConfig(partial){partial=partial||{};var full={};full["server"]=String(partial["server"]||partial["cajaServer"]||defaultServer);full["resources"]=String(partial["resources"]||full["server"]);full["debug"]=!!partial["debug"];if("forceES5Mode"in partial&&partial["forceES5Mode"]!==true&&partial["forceES5Mode"]!==undefined){throw new Error("forceES5Mode: false is no longer supported")}if("es5Mode"in partial&&partial["es5Mode"]!==true&&partial["es5Mode"]!==undefined){throw new Error("es5Mode: false is no longer supported")}var severity=String(partial["maxAcceptableSeverity"]||"SAFE_SPEC_VIOLATION");if(severity==="NO_KNOWN_EXPLOIT_SPEC_VIOLATION"){severity="SAFE_SPEC_VIOLATION";full["acceptNoKnownExploitProblems"]=true}full["maxAcceptableSeverity"]=severity;if(partial["console"]){full["console"]=partial["console"]}else if(partial["log"]){full["console"]={log:partial["log"],warn:partial["log"],error:partial["log"],info:partial["log"]}}else if(window["console"]&&typeof window["console"]["log"]==="function"){full["console"]=window["console"]}else{full["console"]={log:function(){},warn:function(){},error:function(){},info:function(){}}}if(partial["targetAttributePresets"]){if(!partial["targetAttributePresets"]["default"]){throw"targetAttributePresets must contain a default"}if(!partial["targetAttributePresets"]["whitelist"]){throw"targetAttributePresets must contain a whitelist"}if(partial["targetAttributePresets"]["whitelist"]["length"]===0){throw"targetAttributePresets.whitelist array must be nonempty"}full["targetAttributePresets"]=partial["targetAttributePresets"]}if(typeof partial["cajolingServiceClient"]==="object"){full["cajolingServiceClient"]=partial["cajolingServiceClient"]}return full}function initFeralFrame(feralWin){if(feralWin["Object"]["FERAL_FRAME_OBJECT___"]===feralWin["Object"]){return}feralWin["___"]={};feralWin["Object"]["FERAL_FRAME_OBJECT___"]=feralWin["Object"]}function trySES(config,frameGroupReady,onFailure){function frameInit(frameWin){var ses=frameWin["ses"]||(frameWin["ses"]={});ses["maxAcceptableSeverityName"]=config["maxAcceptableSeverity"];if(config["acceptNoKnownExploitProblems"]){ses["acceptableProblems"]={DEFINING_READ_ONLY_PROTO_FAILS_SILENTLY:{permit:true},PUSH_IGNORES_SEALED:{permit:true,doNotRepair:true},UNSHIFT_IGNORES_SEALED:{permit:true},SPLICE_IGNORES_SEALED:{permit:true},SHIFT_IGNORES_SEALED:{permit:true},PUSH_DOES_NOT_THROW_ON_FROZEN_ARRAY:{permit:true,doNotRepair:true},ARRAYS_DELETE_NONCONFIGURABLE:{permit:true},ARRAYS_MODIFY_READONLY:{permit:true},FREEZE_IS_FRAME_DEPENDENT:{permit:true},SYNTAX_ERRORS_ARENT_ALWAYS_EARLY:{permit:true},NESTED_STRICT_FUNCTIONS_LEAK:{permit:true}}}ses["mitigateSrcGotchas"]=function(){throw new EvalError("This function is a placeholder that should "+"have been replaced by the real "+"ses.mitigateSrcGotchas.")}}var sesMaker=makeFrameMaker(config,"ses-single-frame",frameInit);loadCajaFrame(config,"utility-frame",function(mitigateWin){var mitigateSrcGotchas=mitigateWin["ses"]["mitigateSrcGotchas"];sesMaker["make"](function(tamingWin){if(tamingWin["ses"]["ok"]()){var fg=tamingWin["SESFrameGroup"](cajaInt,config,tamingWin,window,{mitigateSrcGotchas:mitigateSrcGotchas});frameGroupReady(fg)}else{var err=new Error("Caja: Browser is unsupported");if("function"===typeof onFailure){onFailure(err)}else{throw err}}})})}function makeFrameMaker(config,filename,opt_frameCreated){var IDLE="IDLE",LOADING="LOADING",WAITING="WAITING";var preState=IDLE,preWin,preReady;var self={preload:function(){if(preState===IDLE){preState=LOADING;preWin=null;loadCajaFrame(config,filename,function(win){preWin=win;consumeIfReady()},opt_frameCreated)}},make:function(onReady){if(preState===LOADING){preState=WAITING;preReady=onReady;consumeIfReady()}else{loadCajaFrame(config,filename,onReady,opt_frameCreated)}}};self["preload"]();return self;function consumeIfReady(){if(preState===WAITING&&preWin){var win=preWin,ready=preReady;preState=IDLE;preWin=null;preReady=null;ready(win)}}}function loadCajaFrame(config,filename,frameReady,opt_frameCreated){var frameWin=createFrame(filename);var suffix=config["debug"]?".js?debug=1":".opt.js?debug=1";var url=joinUrl(config["resources"],cajaBuildVersion+"/"+filename+suffix);setTimeout(function(){frameWin["cajaIframeDone___"]=function(){versionCheck(config,frameWin,filename);frameReady(frameWin)};if(opt_frameCreated){opt_frameCreated(frameWin)}setTimeout(function(){installAsyncScript(frameWin,url)},0)},0)}function versionCheck(config,frameWin,filename){if(cajaBuildVersion!==frameWin["cajaBuildVersion"]){var message="Version error: caja.js version "+cajaBuildVersion+" does not match "+filename+" version "+frameWin["cajaBuildVersion"]+".";var majorCajaVersion=String(cajaBuildVersion).split(/[mM]/)[0];var majorWinVersion=String(frameWin["cajaBuildVersion"]).split(/[mM]/)[0];if(majorCajaVersion===majorWinVersion){message+="  Continuing because major versions match.";config["console"]["log"](message)}else{config["console"]["log"](message);throw new Error(message)}}}function prepareContainerDiv(opt_container,feralWin,domOpts){domOpts=domOpts||{};var opt_idClass=domOpts?domOpts["idClass"]:void 0;var idClass=opt_idClass||"caja-guest-"+nextId++ +"___";if(opt_container&&opt_container.nodeType===9){caja["console"]["warn"]("Warning: Using a document, rather than an "+"element, as a Caja virtual document container is an experimental "+"feature and may not operate correctly or support all features.");initFeralFrame(opt_container.defaultView)}return{idClass:idClass,opt_div:opt_container}}function createFrame(opt_className){var frame=document.createElement("iframe");frame.style.display="none";frame.width=0;frame.height=0;frame.className=opt_className||"";var where=document.getElementsByTagName("script")[0];where.parentNode.insertBefore(frame,where);return frame.contentWindow}function installAsyncScript(frameWin,scriptUrl){var frameDoc=frameWin["document"];var script=frameDoc.createElement("script");script.setAttribute("type","text/javascript");script.src=scriptUrl;frameDoc.body.appendChild(script)}function escapeAttr(s){var ampRe=/&/g;var ltRe=/[<]/g;var gtRe=/>/g;var quotRe=/\"/g;return(""+s).replace(ampRe,"&amp;").replace(ltRe,"&lt;").replace(gtRe,"&gt;").replace(quotRe,"&#34;")}function installSyncScript(name,url){if(!loaderDocument){loaderDocument=createFrame("loader-frame").document}var result=""+'<script>var $name = parent.window["$name"];</script>'.replace(/[$]name/g,name)+'<script type="text/javascript" src="$url"></script>'.replace(/[$]url/g,escapeAttr(url));loaderDocument.write(result)}function joinUrl(base,path){base=base.replace(/\/+$/,"");path=path.replace(/^\/+/,"");return base+"/"+path}function documentBaseUrl(){var bases=document.getElementsByTagName("base");if(bases.length==0){return document.location.toString()}else if(bases.length==1){var href=bases[0].href;if(typeof href!=="string"){throw new Error("Caja loader error: <base> without a href.")}return href}else{throw new Error("Caja loader error: document contains multiple <base>.")}}function enforceType(specimen,typename,opt_name){if(typeof specimen!==typename){throw new TypeError("expected "+typename+" instead of "+typeof specimen+": "+(opt_name||specimen))}return specimen}function readPropertyAsHostFrame(object,property){return object[property]}function getId(imports){enforceType(imports,"object","imports");var id;if("id___"in imports){id=enforceType(imports["id___"],"number","id")}else{id=imports["id___"]=registeredImports.length}registeredImports[id]=imports;return id}function getImports(id){var result=registeredImports[enforceType(id,"number","id")];if(result===void 0){throw new Error("Internal: imports#",id," unregistered")}return result}function unregister(imports){enforceType(imports,"object","imports");if("id___"in imports){var id=enforceType(imports["id___"],"number","id");registeredImports[id]=void 0}}return caja}();if(typeof window!=="undefined"){window["caja"]=caja}